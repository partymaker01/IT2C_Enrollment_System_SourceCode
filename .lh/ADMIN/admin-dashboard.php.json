{
    "sourceFile": "ADMIN/admin-dashboard.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1749398707087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749398776682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,58 +1,116 @@\n <?php\r\n session_start();\r\n include '../db.php';\r\n \r\n+// Check if database connection exists\r\n+if (!$conn) {\r\n+    die(\"Database connection failed. Please check your database configuration.\");\r\n+}\r\n+\r\n // Check admin authentication\r\n-if (!isset($_SESSION['admin_id'])) {\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n-// Get admin info\r\n-$stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n-$stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n-$stmt->execute();\r\n-$admin = $stmt->get_result()->fetch_assoc();\r\n+// Get admin info with error handling\r\n+$admin = [\r\n+    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n+    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n+    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n+    'image' => '../img/default_admin.png'\r\n+];\r\n \r\n-// Get dashboard statistics\r\n+// If admin_id is set in session, get more details from database\r\n+if (isset($_SESSION['admin_id'])) {\r\n+    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n+    if ($stmt) {\r\n+        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n+        $stmt->execute();\r\n+        $result = $stmt->get_result();\r\n+        if ($result->num_rows > 0) {\r\n+            $admin = $result->fetch_assoc();\r\n+        }\r\n+        $stmt->close();\r\n+    }\r\n+}\r\n+\r\n+// Get dashboard statistics - Fixed queries\r\n $stats = [];\r\n \r\n // Enrollment statistics\r\n $stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n $stmt->execute();\r\n $result = $stmt->get_result();\r\n+$stats['enrollments'] = [];\r\n while ($row = $result->fetch_assoc()) {\r\n     $stats['enrollments'][$row['status']] = $row['count'];\r\n }\r\n \r\n // Student statistics\r\n $stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n $stmt->execute();\r\n-$stats['total_students'] = $stmt->get_result()->fetch_assoc()['total'];\r\n+$result = $stmt->get_result();\r\n+$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n \r\n // Subject statistics\r\n $stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n $stmt->execute();\r\n-$stats['total_subjects'] = $stmt->get_result()->fetch_assoc()['total'];\r\n+$result = $stmt->get_result();\r\n+$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n \r\n-// Recent enrollments\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT e.*, CONCAT(e.first_name, ' ', e.last_name) as student_name \r\n-    FROM enrollments e \r\n-    ORDER BY e.date_submitted DESC \r\n-    LIMIT 5\r\n-\");\r\n-$stmt->execute();\r\n-$recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+// Recent enrollments - Fixed query based on actual table structure\r\n+$recentEnrollments = [];\r\n+try {\r\n+    $stmt = $conn->prepare(\"\r\n+        SELECT \r\n+            e.id,\r\n+            e.student_id,\r\n+            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n+            e.program,\r\n+            e.year_level,\r\n+            e.status,\r\n+            e.date_submitted\r\n+        FROM enrollments e \r\n+        LEFT JOIN students s ON e.student_id = s.student_id\r\n+        ORDER BY e.date_submitted DESC \r\n+        LIMIT 5\r\n+    \");\r\n+    $stmt->execute();\r\n+    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+    $stmt->close();\r\n+} catch (Exception $e) {\r\n+    // Fallback query if JOIN fails\r\n+    try {\r\n+        $stmt = $conn->prepare(\"\r\n+            SELECT \r\n+                id,\r\n+                student_id,\r\n+                CONCAT('Student ID: ', student_id) as student_name,\r\n+                program,\r\n+                year_level,\r\n+                status,\r\n+                date_submitted\r\n+            FROM enrollments \r\n+            ORDER BY date_submitted DESC \r\n+            LIMIT 5\r\n+        \");\r\n+        $stmt->execute();\r\n+        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+        $stmt->close();\r\n+    } catch (Exception $e2) {\r\n+        $recentEnrollments = [];\r\n+    }\r\n+}\r\n \r\n // Current enrollment period\r\n $stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n $stmt->execute();\r\n $result = $stmt->get_result();\r\n $currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n \r\n-// Monthly enrollment trends\r\n+// Monthly enrollment trends - Fixed query\r\n $stmt = $conn->prepare(\"\r\n     SELECT \r\n         DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n         COUNT(*) as count\r\n@@ -63,9 +121,9 @@\n \");\r\n $stmt->execute();\r\n $monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n \r\n-// Program distribution\r\n+// Program distribution - Fixed query\r\n $stmt = $conn->prepare(\"\r\n     SELECT program, COUNT(*) as count \r\n     FROM enrollments \r\n     WHERE status IN ('approved', 'enrolled')\r\n"
                },
                {
                    "date": 1749401424052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jgp') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401436793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jgp') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401568081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401612208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401637914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401651918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '..//picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401677165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '..//picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401720460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,557 @@\n+<?php\r\n+session_start();\r\n+include '../db.php';\r\n+\r\n+// Check if database connection exists\r\n+if (!$conn) {\r\n+    die(\"Database connection failed. Please check your database configuration.\");\r\n+}\r\n+\r\n+// Check admin authentication\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n+    exit();\r\n+}\r\n+\r\n+// Get admin info with error handling\r\n+$admin = [\r\n+    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n+    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n+    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n+    'image' => '../img/default_admin.png'\r\n+];\r\n+\r\n+// If admin_id is set in session, get more details from database\r\n+if (isset($_SESSION['admin_id'])) {\r\n+    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n+    if ($stmt) {\r\n+        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n+        $stmt->execute();\r\n+        $result = $stmt->get_result();\r\n+        if ($result->num_rows > 0) {\r\n+            $admin = $result->fetch_assoc();\r\n+        }\r\n+        $stmt->close();\r\n+    }\r\n+}\r\n+\r\n+// Get dashboard statistics - Fixed queries\r\n+$stats = [];\r\n+\r\n+// Enrollment statistics\r\n+$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['enrollments'] = [];\r\n+while ($row = $result->fetch_assoc()) {\r\n+    $stats['enrollments'][$row['status']] = $row['count'];\r\n+}\r\n+\r\n+// Student statistics\r\n+$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n+\r\n+// Subject statistics\r\n+$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n+\r\n+// Recent enrollments - Fixed query based on actual table structure\r\n+$recentEnrollments = [];\r\n+try {\r\n+    $stmt = $conn->prepare(\"\r\n+        SELECT \r\n+            e.id,\r\n+            e.student_id,\r\n+            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n+            e.program,\r\n+            e.year_level,\r\n+            e.status,\r\n+            e.date_submitted\r\n+        FROM enrollments e \r\n+        LEFT JOIN students s ON e.student_id = s.student_id\r\n+        ORDER BY e.date_submitted DESC \r\n+        LIMIT 5\r\n+    \");\r\n+    $stmt->execute();\r\n+    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+    $stmt->close();\r\n+} catch (Exception $e) {\r\n+    // Fallback query if JOIN fails\r\n+    try {\r\n+        $stmt = $conn->prepare(\"\r\n+            SELECT \r\n+                id,\r\n+                student_id,\r\n+                CONCAT('Student ID: ', student_id) as student_name,\r\n+                program,\r\n+                year_level,\r\n+                status,\r\n+                date_submitted\r\n+            FROM enrollments \r\n+            ORDER BY date_submitted DESC \r\n+            LIMIT 5\r\n+        \");\r\n+        $stmt->execute();\r\n+        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+        $stmt->close();\r\n+    } catch (Exception $e2) {\r\n+        $recentEnrollments = [];\r\n+    }\r\n+}\r\n+\r\n+// Current enrollment period\r\n+$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n+\r\n+// Monthly enrollment trends - Fixed query\r\n+$stmt = $conn->prepare(\"\r\n+    SELECT \r\n+        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n+        COUNT(*) as count\r\n+    FROM enrollments \r\n+    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n+    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n+    ORDER BY month\r\n+\");\r\n+$stmt->execute();\r\n+$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+\r\n+// Program distribution - Fixed query\r\n+$stmt = $conn->prepare(\"\r\n+    SELECT program, COUNT(*) as count \r\n+    FROM enrollments \r\n+    WHERE status IN ('approved', 'enrolled')\r\n+    GROUP BY program \r\n+    ORDER BY count DESC\r\n+\");\r\n+$stmt->execute();\r\n+$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+?>\r\n+\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n+    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n+    <style>\r\n+        body {\r\n+            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n+            font-family: 'Segoe UI', sans-serif;\r\n+        }\r\n+        .navbar {\r\n+            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+        }\r\n+        .school-logo {\r\n+            width: 50px;\r\n+            height: 50px;\r\n+            object-fit: cover;\r\n+            border-radius: 50%;\r\n+            margin-right: 10px;\r\n+            border: 2px solid #fff;\r\n+        }\r\n+        .stats-card {\r\n+            border-radius: 15px;\r\n+            border: none;\r\n+            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n+            transition: transform 0.3s ease;\r\n+            background: white;\r\n+        }\r\n+        .stats-card:hover {\r\n+            transform: translateY(-5px);\r\n+        }\r\n+        .stats-icon {\r\n+            width: 60px;\r\n+            height: 60px;\r\n+            border-radius: 50%;\r\n+            display: flex;\r\n+            align-items: center;\r\n+            justify-content: center;\r\n+            font-size: 1.5rem;\r\n+            color: white;\r\n+        }\r\n+        .quick-action-card {\r\n+            border-radius: 12px;\r\n+            border: none;\r\n+            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n+            transition: all 0.3s ease;\r\n+        }\r\n+        .quick-action-card:hover {\r\n+            transform: translateY(-2px);\r\n+            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n+        }\r\n+        .period-alert {\r\n+            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n+            border: none;\r\n+            border-radius: 10px;\r\n+            color: white;\r\n+        }\r\n+        .chart-container {\r\n+            position: relative;\r\n+            height: 300px;\r\n+        }\r\n+    </style>\r\n+</head>\r\n+<body>\r\n+    <!-- Navigation -->\r\n+    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n+        <div class=\"container-fluid\">\r\n+            <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n+                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n+                TLGC Admin Panel\r\n+            </a>\r\n+            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n+                <span class=\"navbar-toggler-icon\"></span>\r\n+            </button>\r\n+            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n+                <ul class=\"navbar-nav ms-auto\">\r\n+                    <li class=\"nav-item dropdown\">\r\n+                        <ul class=\"dropdown-menu\">\r\n+                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n+                                <i class=\"bi bi-person me-2\"></i>Profile\r\n+                            </a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n+                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n+                            </a></li>\r\n+                            <li><hr class=\"dropdown-divider\"></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n+                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n+                            </a></li>\r\n+                        </ul>\r\n+                    </li>\r\n+                </ul>\r\n+            </div>\r\n+        </div>\r\n+    </nav>\r\n+\r\n+    <div class=\"container-fluid py-4\">\r\n+        <!-- Welcome Section -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"d-flex justify-content-between align-items-center\">\r\n+                    <div>\r\n+                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n+                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n+                    </div>\r\n+                    <div class=\"text-end\">\r\n+                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n+                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Current Period Alert -->\r\n+        <?php if ($currentPeriod): ?>\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"alert period-alert\">\r\n+                    <div class=\"d-flex align-items-center\">\r\n+                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n+                        <div>\r\n+                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n+                            <p class=\"mb-0\">\r\n+                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n+                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n+                            </p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+        <?php endif; ?>\r\n+\r\n+        <!-- Statistics Cards -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-warning me-3\">\r\n+                            <i class=\"bi bi-clock-history\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-success me-3\">\r\n+                            <i class=\"bi bi-check-circle\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-primary me-3\">\r\n+                            <i class=\"bi bi-people\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Total Students</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-info me-3\">\r\n+                            <i class=\"bi bi-book\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Quick Actions -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <h4 class=\"mb-3\">Quick Actions</h4>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Charts and Recent Activity -->\r\n+        <div class=\"row\">\r\n+            <!-- Enrollment Trends Chart -->\r\n+            <div class=\"col-lg-8 mb-4\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header\">\r\n+                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"chart-container\">\r\n+                            <canvas id=\"enrollmentChart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Program Distribution -->\r\n+            <div class=\"col-lg-4 mb-4\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header\">\r\n+                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"chart-container\">\r\n+                            <canvas id=\"programChart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Recent Enrollments -->\r\n+        <div class=\"row\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n+                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n+                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n+                    </div>\r\n+                    <div class=\"card-body p-0\">\r\n+                        <?php if (empty($recentEnrollments)): ?>\r\n+                            <div class=\"text-center py-4\">\r\n+                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n+                            </div>\r\n+                        <?php else: ?>\r\n+                            <div class=\"table-responsive\">\r\n+                                <table class=\"table table-hover mb-0\">\r\n+                                    <thead class=\"table-light\">\r\n+                                        <tr>\r\n+                                            <th>Student</th>\r\n+                                            <th>Program</th>\r\n+                                            <th>Year Level</th>\r\n+                                            <th>Status</th>\r\n+                                            <th>Date Submitted</th>\r\n+                                        </tr>\r\n+                                    </thead>\r\n+                                    <tbody>\r\n+                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n+                                        <tr>\r\n+                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n+                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n+                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n+                                            <td>\r\n+                                                <?php\r\n+                                                $statusClass = [\r\n+                                                    'pending' => 'warning',\r\n+                                                    'approved' => 'success',\r\n+                                                    'rejected' => 'danger',\r\n+                                                    'missing_documents' => 'info'\r\n+                                                ];\r\n+                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n+                                                ?>\r\n+                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n+                                            </td>\r\n+                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n+                                        </tr>\r\n+                                        <?php endforeach; ?>\r\n+                                    </tbody>\r\n+                                </table>\r\n+                            </div>\r\n+                        <?php endif; ?>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+\r\n+    <script>\r\n+        // Enrollment Trends Chart\r\n+        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n+        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n+        \r\n+        new Chart(enrollmentCtx, {\r\n+            type: 'line',\r\n+            data: {\r\n+                labels: enrollmentData.map(item => {\r\n+                    const date = new Date(item.month + '-01');\r\n+                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n+                }),\r\n+                datasets: [{\r\n+                    label: 'Enrollments',\r\n+                    data: enrollmentData.map(item => item.count),\r\n+                    borderColor: '#2e7d32',\r\n+                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n+                    tension: 0.4,\r\n+                    fill: true\r\n+                }]\r\n+            },\r\n+            options: {\r\n+                responsive: true,\r\n+                maintainAspectRatio: false,\r\n+                plugins: {\r\n+                    legend: {\r\n+                        display: false\r\n+                    }\r\n+                },\r\n+                scales: {\r\n+                    y: {\r\n+                        beginAtZero: true,\r\n+                        ticks: {\r\n+                            stepSize: 1\r\n+                        }\r\n+                    }\r\n+                }\r\n+            }\r\n+        });\r\n+\r\n+        // Program Distribution Chart\r\n+        const programCtx = document.getElementById('programChart').getContext('2d');\r\n+        const programData = <?= json_encode($programDistribution) ?>;\r\n+        \r\n+        new Chart(programCtx, {\r\n+            type: 'doughnut',\r\n+            data: {\r\n+                labels: programData.map(item => item.program),\r\n+                datasets: [{\r\n+                    data: programData.map(item => item.count),\r\n+                    backgroundColor: [\r\n+                        '#2e7d32',\r\n+                        '#388e3c',\r\n+                        '#4caf50',\r\n+                        '#66bb6a',\r\n+                        '#81c784',\r\n+                        '#a5d6a7'\r\n+                    ]\r\n+                }]\r\n+            },\r\n+            options: {\r\n+                responsive: true,\r\n+                maintainAspectRatio: false,\r\n+                plugins: {\r\n+                    legend: {\r\n+                        position: 'bottom'\r\n+                    }\r\n+                }\r\n+            }\r\n+        });\r\n+    </script>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1749401721857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -554,566 +554,4 @@\n         });\r\n     </script>\r\n </body>\r\n </html>\r\n-<?php\r\n-session_start();\r\n-include '../db.php';\r\n-\r\n-// Check if database connection exists\r\n-if (!$conn) {\r\n-    die(\"Database connection failed. Please check your database configuration.\");\r\n-}\r\n-\r\n-// Check admin authentication\r\n-if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit();\r\n-}\r\n-\r\n-// Get admin info with error handling\r\n-$admin = [\r\n-    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n-    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n-    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n-    'image' => '../img/default_admin.png'\r\n-];\r\n-\r\n-// If admin_id is set in session, get more details from database\r\n-if (isset($_SESSION['admin_id'])) {\r\n-    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n-    if ($stmt) {\r\n-        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n-        $stmt->execute();\r\n-        $result = $stmt->get_result();\r\n-        if ($result->num_rows > 0) {\r\n-            $admin = $result->fetch_assoc();\r\n-        }\r\n-        $stmt->close();\r\n-    }\r\n-}\r\n-\r\n-// Get dashboard statistics - Fixed queries\r\n-$stats = [];\r\n-\r\n-// Enrollment statistics\r\n-$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['enrollments'] = [];\r\n-while ($row = $result->fetch_assoc()) {\r\n-    $stats['enrollments'][$row['status']] = $row['count'];\r\n-}\r\n-\r\n-// Student statistics\r\n-$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n-\r\n-// Subject statistics\r\n-$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n-\r\n-// Recent enrollments - Fixed query based on actual table structure\r\n-$recentEnrollments = [];\r\n-try {\r\n-    $stmt = $conn->prepare(\"\r\n-        SELECT \r\n-            e.id,\r\n-            e.student_id,\r\n-            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n-            e.program,\r\n-            e.year_level,\r\n-            e.status,\r\n-            e.date_submitted\r\n-        FROM enrollments e \r\n-        LEFT JOIN students s ON e.student_id = s.student_id\r\n-        ORDER BY e.date_submitted DESC \r\n-        LIMIT 5\r\n-    \");\r\n-    $stmt->execute();\r\n-    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-    $stmt->close();\r\n-} catch (Exception $e) {\r\n-    // Fallback query if JOIN fails\r\n-    try {\r\n-        $stmt = $conn->prepare(\"\r\n-            SELECT \r\n-                id,\r\n-                student_id,\r\n-                CONCAT('Student ID: ', student_id) as student_name,\r\n-                program,\r\n-                year_level,\r\n-                status,\r\n-                date_submitted\r\n-            FROM enrollments \r\n-            ORDER BY date_submitted DESC \r\n-            LIMIT 5\r\n-        \");\r\n-        $stmt->execute();\r\n-        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-        $stmt->close();\r\n-    } catch (Exception $e2) {\r\n-        $recentEnrollments = [];\r\n-    }\r\n-}\r\n-\r\n-// Current enrollment period\r\n-$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n-\r\n-// Monthly enrollment trends - Fixed query\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT \r\n-        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n-        COUNT(*) as count\r\n-    FROM enrollments \r\n-    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n-    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n-    ORDER BY month\r\n-\");\r\n-$stmt->execute();\r\n-$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-\r\n-// Program distribution - Fixed query\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT program, COUNT(*) as count \r\n-    FROM enrollments \r\n-    WHERE status IN ('approved', 'enrolled')\r\n-    GROUP BY program \r\n-    ORDER BY count DESC\r\n-\");\r\n-$stmt->execute();\r\n-$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-?>\r\n-\r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n-    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n-    <style>\r\n-        body {\r\n-            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n-            font-family: 'Segoe UI', sans-serif;\r\n-        }\r\n-        .navbar {\r\n-            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n-            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n-        }\r\n-        .school-logo {\r\n-            width: 50px;\r\n-            height: 50px;\r\n-            object-fit: cover;\r\n-            border-radius: 50%;\r\n-            margin-right: 10px;\r\n-            border: 2px solid #fff;\r\n-        }\r\n-        .stats-card {\r\n-            border-radius: 15px;\r\n-            border: none;\r\n-            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n-            transition: transform 0.3s ease;\r\n-            background: white;\r\n-        }\r\n-        .stats-card:hover {\r\n-            transform: translateY(-5px);\r\n-        }\r\n-        .stats-icon {\r\n-            width: 60px;\r\n-            height: 60px;\r\n-            border-radius: 50%;\r\n-            display: flex;\r\n-            align-items: center;\r\n-            justify-content: center;\r\n-            font-size: 1.5rem;\r\n-            color: white;\r\n-        }\r\n-        .quick-action-card {\r\n-            border-radius: 12px;\r\n-            border: none;\r\n-            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n-            transition: all 0.3s ease;\r\n-        }\r\n-        .quick-action-card:hover {\r\n-            transform: translateY(-2px);\r\n-            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n-        }\r\n-        .period-alert {\r\n-            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n-            border: none;\r\n-            border-radius: 10px;\r\n-            color: white;\r\n-        }\r\n-        .chart-container {\r\n-            position: relative;\r\n-            height: 300px;\r\n-        }\r\n-    </style>\r\n-</head>\r\n-<body>\r\n-    <!-- Navigation -->\r\n-    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n-        <div class=\"container-fluid\">\r\n-            <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n-                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n-                TLGC Admin Panel\r\n-            </a>\r\n-            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n-                <span class=\"navbar-toggler-icon\"></span>\r\n-            </button>\r\n-            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n-                <ul class=\"navbar-nav ms-auto\">\r\n-                    <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n-                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n-                            <?= htmlspecialchars($admin['name']) ?>\r\n-                        </a>\r\n-                        <ul class=\"dropdown-menu\">\r\n-                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n-                                <i class=\"bi bi-person me-2\"></i>Profile\r\n-                            </a></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n-                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n-                            </a></li>\r\n-                            <li><hr class=\"dropdown-divider\"></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n-                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n-                            </a></li>\r\n-                        </ul>\r\n-                    </li>\r\n-                </ul>\r\n-            </div>\r\n-        </div>\r\n-    </nav>\r\n-\r\n-    <div class=\"container-fluid py-4\">\r\n-        <!-- Welcome Section -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"d-flex justify-content-between align-items-center\">\r\n-                    <div>\r\n-                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n-                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n-                    </div>\r\n-                    <div class=\"text-end\">\r\n-                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n-                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Current Period Alert -->\r\n-        <?php if ($currentPeriod): ?>\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"alert period-alert\">\r\n-                    <div class=\"d-flex align-items-center\">\r\n-                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n-                        <div>\r\n-                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n-                            <p class=\"mb-0\">\r\n-                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n-                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n-                            </p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-        <?php endif; ?>\r\n-\r\n-        <!-- Statistics Cards -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-warning me-3\">\r\n-                            <i class=\"bi bi-clock-history\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-success me-3\">\r\n-                            <i class=\"bi bi-check-circle\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-primary me-3\">\r\n-                            <i class=\"bi bi-people\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Total Students</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-info me-3\">\r\n-                            <i class=\"bi bi-book\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Quick Actions -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <h4 class=\"mb-3\">Quick Actions</h4>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Charts and Recent Activity -->\r\n-        <div class=\"row\">\r\n-            <!-- Enrollment Trends Chart -->\r\n-            <div class=\"col-lg-8 mb-4\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header\">\r\n-                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n-                    </div>\r\n-                    <div class=\"card-body\">\r\n-                        <div class=\"chart-container\">\r\n-                            <canvas id=\"enrollmentChart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Program Distribution -->\r\n-            <div class=\"col-lg-4 mb-4\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header\">\r\n-                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n-                    </div>\r\n-                    <div class=\"card-body\">\r\n-                        <div class=\"chart-container\">\r\n-                            <canvas id=\"programChart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Recent Enrollments -->\r\n-        <div class=\"row\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n-                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n-                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n-                    </div>\r\n-                    <div class=\"card-body p-0\">\r\n-                        <?php if (empty($recentEnrollments)): ?>\r\n-                            <div class=\"text-center py-4\">\r\n-                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n-                            </div>\r\n-                        <?php else: ?>\r\n-                            <div class=\"table-responsive\">\r\n-                                <table class=\"table table-hover mb-0\">\r\n-                                    <thead class=\"table-light\">\r\n-                                        <tr>\r\n-                                            <th>Student</th>\r\n-                                            <th>Program</th>\r\n-                                            <th>Year Level</th>\r\n-                                            <th>Status</th>\r\n-                                            <th>Date Submitted</th>\r\n-                                        </tr>\r\n-                                    </thead>\r\n-                                    <tbody>\r\n-                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n-                                        <tr>\r\n-                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n-                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n-                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n-                                            <td>\r\n-                                                <?php\r\n-                                                $statusClass = [\r\n-                                                    'pending' => 'warning',\r\n-                                                    'approved' => 'success',\r\n-                                                    'rejected' => 'danger',\r\n-                                                    'missing_documents' => 'info'\r\n-                                                ];\r\n-                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n-                                                ?>\r\n-                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n-                                            </td>\r\n-                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n-                                        </tr>\r\n-                                        <?php endforeach; ?>\r\n-                                    </tbody>\r\n-                                </table>\r\n-                            </div>\r\n-                        <?php endif; ?>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-\r\n-    <script>\r\n-        // Enrollment Trends Chart\r\n-        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n-        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n-        \r\n-        new Chart(enrollmentCtx, {\r\n-            type: 'line',\r\n-            data: {\r\n-                labels: enrollmentData.map(item => {\r\n-                    const date = new Date(item.month + '-01');\r\n-                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n-                }),\r\n-                datasets: [{\r\n-                    label: 'Enrollments',\r\n-                    data: enrollmentData.map(item => item.count),\r\n-                    borderColor: '#2e7d32',\r\n-                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n-                    tension: 0.4,\r\n-                    fill: true\r\n-                }]\r\n-            },\r\n-            options: {\r\n-                responsive: true,\r\n-                maintainAspectRatio: false,\r\n-                plugins: {\r\n-                    legend: {\r\n-                        display: false\r\n-                    }\r\n-                },\r\n-                scales: {\r\n-                    y: {\r\n-                        beginAtZero: true,\r\n-                        ticks: {\r\n-                            stepSize: 1\r\n-                        }\r\n-                    }\r\n-                }\r\n-            }\r\n-        });\r\n-\r\n-        // Program Distribution Chart\r\n-        const programCtx = document.getElementById('programChart').getContext('2d');\r\n-        const programData = <?= json_encode($programDistribution) ?>;\r\n-        \r\n-        new Chart(programCtx, {\r\n-            type: 'doughnut',\r\n-            data: {\r\n-                labels: programData.map(item => item.program),\r\n-                datasets: [{\r\n-                    data: programData.map(item => item.count),\r\n-                    backgroundColor: [\r\n-                        '#2e7d32',\r\n-                        '#388e3c',\r\n-                        '#4caf50',\r\n-                        '#66bb6a',\r\n-                        '#81c784',\r\n-                        '#a5d6a7'\r\n-                    ]\r\n-                }]\r\n-            },\r\n-            options: {\r\n-                responsive: true,\r\n-                maintainAspectRatio: false,\r\n-                plugins: {\r\n-                    legend: {\r\n-                        position: 'bottom'\r\n-                    }\r\n-                }\r\n-            }\r\n-        });\r\n-    </script>\r\n-</body>\r\n-</html>\r\n"
                },
                {
                    "date": 1749401729696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,8 +216,13 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n+                            <?= htmlspecialchars($admin['name']) ?>\r\n+                        </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n                                 <i class=\"bi bi-person me-2\"></i>Profile\r\n                             </a></li>\r\n"
                },
                {
                    "date": 1749401754707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,9 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"/picture/tlgc_pic.jpg\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                             <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n"
                },
                {
                    "date": 1749401771507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,9 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"/picture/tlgc_pic.jpg\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                             <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n"
                },
                {
                    "date": 1749402068816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                            \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749402077519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,9 +218,8 @@\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                             \r\n-                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749402092996,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,8 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            \r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749402105754,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,10 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\"><img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749402158930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,10 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\"><img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749402168953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749402183946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,10 +217,10 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n-                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n+                            <!-- <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n+                                alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\"> -->\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749404418364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,8 +143,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n     <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n     <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n+    <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n     <style>\r\n         body {\r\n             background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n             font-family: 'Segoe UI', sans-serif;\r\n"
                }
            ],
            "date": 1749398707087,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\ninclude '../db.php';\r\n\r\n// Check admin authentication\r\nif (!isset($_SESSION['admin_id'])) {\r\n    header(\"Location: ../logregfor/admin-login.php\");\r\n    exit();\r\n}\r\n\r\n// Get admin info\r\n$stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n$stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n$stmt->execute();\r\n$admin = $stmt->get_result()->fetch_assoc();\r\n\r\n// Get dashboard statistics\r\n$stats = [];\r\n\r\n// Enrollment statistics\r\n$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n$stmt->execute();\r\n$result = $stmt->get_result();\r\nwhile ($row = $result->fetch_assoc()) {\r\n    $stats['enrollments'][$row['status']] = $row['count'];\r\n}\r\n\r\n// Student statistics\r\n$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n$stmt->execute();\r\n$stats['total_students'] = $stmt->get_result()->fetch_assoc()['total'];\r\n\r\n// Subject statistics\r\n$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n$stmt->execute();\r\n$stats['total_subjects'] = $stmt->get_result()->fetch_assoc()['total'];\r\n\r\n// Recent enrollments\r\n$stmt = $conn->prepare(\"\r\n    SELECT e.*, CONCAT(e.first_name, ' ', e.last_name) as student_name \r\n    FROM enrollments e \r\n    ORDER BY e.date_submitted DESC \r\n    LIMIT 5\r\n\");\r\n$stmt->execute();\r\n$recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n\r\n// Current enrollment period\r\n$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n$stmt->execute();\r\n$result = $stmt->get_result();\r\n$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n\r\n// Monthly enrollment trends\r\n$stmt = $conn->prepare(\"\r\n    SELECT \r\n        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n        COUNT(*) as count\r\n    FROM enrollments \r\n    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n    ORDER BY month\r\n\");\r\n$stmt->execute();\r\n$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n\r\n// Program distribution\r\n$stmt = $conn->prepare(\"\r\n    SELECT program, COUNT(*) as count \r\n    FROM enrollments \r\n    WHERE status IN ('approved', 'enrolled')\r\n    GROUP BY program \r\n    ORDER BY count DESC\r\n\");\r\n$stmt->execute();\r\n$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n?>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n    <style>\r\n        body {\r\n            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n            font-family: 'Segoe UI', sans-serif;\r\n        }\r\n        .navbar {\r\n            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .school-logo {\r\n            width: 50px;\r\n            height: 50px;\r\n            object-fit: cover;\r\n            border-radius: 50%;\r\n            margin-right: 10px;\r\n            border: 2px solid #fff;\r\n        }\r\n        .stats-card {\r\n            border-radius: 15px;\r\n            border: none;\r\n            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n            transition: transform 0.3s ease;\r\n            background: white;\r\n        }\r\n        .stats-card:hover {\r\n            transform: translateY(-5px);\r\n        }\r\n        .stats-icon {\r\n            width: 60px;\r\n            height: 60px;\r\n            border-radius: 50%;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            font-size: 1.5rem;\r\n            color: white;\r\n        }\r\n        .quick-action-card {\r\n            border-radius: 12px;\r\n            border: none;\r\n            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n            transition: all 0.3s ease;\r\n        }\r\n        .quick-action-card:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .period-alert {\r\n            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n            border: none;\r\n            border-radius: 10px;\r\n            color: white;\r\n        }\r\n        .chart-container {\r\n            position: relative;\r\n            height: 300px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <!-- Navigation -->\r\n    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n        <div class=\"container-fluid\">\r\n            <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n                TLGC Admin Panel\r\n            </a>\r\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n                <span class=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                <ul class=\"navbar-nav ms-auto\">\r\n                    <li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                            <?= htmlspecialchars($admin['name']) ?>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n                                <i class=\"bi bi-person me-2\"></i>Profile\r\n                            </a></li>\r\n                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n                            </a></li>\r\n                            <li><hr class=\"dropdown-divider\"></li>\r\n                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n                            </a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n\r\n    <div class=\"container-fluid py-4\">\r\n        <!-- Welcome Section -->\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <div>\r\n                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n                    </div>\r\n                    <div class=\"text-end\">\r\n                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Current Period Alert -->\r\n        <?php if ($currentPeriod): ?>\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <div class=\"alert period-alert\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n                        <div>\r\n                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n                            <p class=\"mb-0\">\r\n                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <?php endif; ?>\r\n\r\n        <!-- Statistics Cards -->\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-warning me-3\">\r\n                            <i class=\"bi bi-clock-history\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-success me-3\">\r\n                            <i class=\"bi bi-check-circle\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-primary me-3\">\r\n                            <i class=\"bi bi-people\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n                            <p class=\"text-muted mb-0\">Total Students</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-info me-3\">\r\n                            <i class=\"bi bi-book\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Quick Actions -->\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <h4 class=\"mb-3\">Quick Actions</h4>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Charts and Recent Activity -->\r\n        <div class=\"row\">\r\n            <!-- Enrollment Trends Chart -->\r\n            <div class=\"col-lg-8 mb-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"chart-container\">\r\n                            <canvas id=\"enrollmentChart\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Program Distribution -->\r\n            <div class=\"col-lg-4 mb-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"chart-container\">\r\n                            <canvas id=\"programChart\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Recent Enrollments -->\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n                    </div>\r\n                    <div class=\"card-body p-0\">\r\n                        <?php if (empty($recentEnrollments)): ?>\r\n                            <div class=\"text-center py-4\">\r\n                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n                            </div>\r\n                        <?php else: ?>\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table table-hover mb-0\">\r\n                                    <thead class=\"table-light\">\r\n                                        <tr>\r\n                                            <th>Student</th>\r\n                                            <th>Program</th>\r\n                                            <th>Year Level</th>\r\n                                            <th>Status</th>\r\n                                            <th>Date Submitted</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n                                        <tr>\r\n                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n                                            <td>\r\n                                                <?php\r\n                                                $statusClass = [\r\n                                                    'pending' => 'warning',\r\n                                                    'approved' => 'success',\r\n                                                    'rejected' => 'danger',\r\n                                                    'missing_documents' => 'info'\r\n                                                ];\r\n                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n                                                ?>\r\n                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n                                            </td>\r\n                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n                                        </tr>\r\n                                        <?php endforeach; ?>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        <?php endif; ?>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        // Enrollment Trends Chart\r\n        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n        \r\n        new Chart(enrollmentCtx, {\r\n            type: 'line',\r\n            data: {\r\n                labels: enrollmentData.map(item => {\r\n                    const date = new Date(item.month + '-01');\r\n                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n                }),\r\n                datasets: [{\r\n                    label: 'Enrollments',\r\n                    data: enrollmentData.map(item => item.count),\r\n                    borderColor: '#2e7d32',\r\n                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n                    tension: 0.4,\r\n                    fill: true\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: {\r\n                        display: false\r\n                    }\r\n                },\r\n                scales: {\r\n                    y: {\r\n                        beginAtZero: true,\r\n                        ticks: {\r\n                            stepSize: 1\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Program Distribution Chart\r\n        const programCtx = document.getElementById('programChart').getContext('2d');\r\n        const programData = <?= json_encode($programDistribution) ?>;\r\n        \r\n        new Chart(programCtx, {\r\n            type: 'doughnut',\r\n            data: {\r\n                labels: programData.map(item => item.program),\r\n                datasets: [{\r\n                    data: programData.map(item => item.count),\r\n                    backgroundColor: [\r\n                        '#2e7d32',\r\n                        '#388e3c',\r\n                        '#4caf50',\r\n                        '#66bb6a',\r\n                        '#81c784',\r\n                        '#a5d6a7'\r\n                    ]\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: {\r\n                        position: 'bottom'\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}