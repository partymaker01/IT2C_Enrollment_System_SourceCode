{
    "sourceFile": "ADMIN/admin-dashboard.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 23,
            "patches": [
                {
                    "date": 1749398707087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749398776682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,58 +1,116 @@\n <?php\r\n session_start();\r\n include '../db.php';\r\n \r\n+// Check if database connection exists\r\n+if (!$conn) {\r\n+    die(\"Database connection failed. Please check your database configuration.\");\r\n+}\r\n+\r\n // Check admin authentication\r\n-if (!isset($_SESSION['admin_id'])) {\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n-// Get admin info\r\n-$stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n-$stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n-$stmt->execute();\r\n-$admin = $stmt->get_result()->fetch_assoc();\r\n+// Get admin info with error handling\r\n+$admin = [\r\n+    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n+    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n+    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n+    'image' => '../img/default_admin.png'\r\n+];\r\n \r\n-// Get dashboard statistics\r\n+// If admin_id is set in session, get more details from database\r\n+if (isset($_SESSION['admin_id'])) {\r\n+    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n+    if ($stmt) {\r\n+        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n+        $stmt->execute();\r\n+        $result = $stmt->get_result();\r\n+        if ($result->num_rows > 0) {\r\n+            $admin = $result->fetch_assoc();\r\n+        }\r\n+        $stmt->close();\r\n+    }\r\n+}\r\n+\r\n+// Get dashboard statistics - Fixed queries\r\n $stats = [];\r\n \r\n // Enrollment statistics\r\n $stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n $stmt->execute();\r\n $result = $stmt->get_result();\r\n+$stats['enrollments'] = [];\r\n while ($row = $result->fetch_assoc()) {\r\n     $stats['enrollments'][$row['status']] = $row['count'];\r\n }\r\n \r\n // Student statistics\r\n $stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n $stmt->execute();\r\n-$stats['total_students'] = $stmt->get_result()->fetch_assoc()['total'];\r\n+$result = $stmt->get_result();\r\n+$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n \r\n // Subject statistics\r\n $stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n $stmt->execute();\r\n-$stats['total_subjects'] = $stmt->get_result()->fetch_assoc()['total'];\r\n+$result = $stmt->get_result();\r\n+$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n \r\n-// Recent enrollments\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT e.*, CONCAT(e.first_name, ' ', e.last_name) as student_name \r\n-    FROM enrollments e \r\n-    ORDER BY e.date_submitted DESC \r\n-    LIMIT 5\r\n-\");\r\n-$stmt->execute();\r\n-$recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+// Recent enrollments - Fixed query based on actual table structure\r\n+$recentEnrollments = [];\r\n+try {\r\n+    $stmt = $conn->prepare(\"\r\n+        SELECT \r\n+            e.id,\r\n+            e.student_id,\r\n+            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n+            e.program,\r\n+            e.year_level,\r\n+            e.status,\r\n+            e.date_submitted\r\n+        FROM enrollments e \r\n+        LEFT JOIN students s ON e.student_id = s.student_id\r\n+        ORDER BY e.date_submitted DESC \r\n+        LIMIT 5\r\n+    \");\r\n+    $stmt->execute();\r\n+    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+    $stmt->close();\r\n+} catch (Exception $e) {\r\n+    // Fallback query if JOIN fails\r\n+    try {\r\n+        $stmt = $conn->prepare(\"\r\n+            SELECT \r\n+                id,\r\n+                student_id,\r\n+                CONCAT('Student ID: ', student_id) as student_name,\r\n+                program,\r\n+                year_level,\r\n+                status,\r\n+                date_submitted\r\n+            FROM enrollments \r\n+            ORDER BY date_submitted DESC \r\n+            LIMIT 5\r\n+        \");\r\n+        $stmt->execute();\r\n+        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+        $stmt->close();\r\n+    } catch (Exception $e2) {\r\n+        $recentEnrollments = [];\r\n+    }\r\n+}\r\n \r\n // Current enrollment period\r\n $stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n $stmt->execute();\r\n $result = $stmt->get_result();\r\n $currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n \r\n-// Monthly enrollment trends\r\n+// Monthly enrollment trends - Fixed query\r\n $stmt = $conn->prepare(\"\r\n     SELECT \r\n         DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n         COUNT(*) as count\r\n@@ -63,9 +121,9 @@\n \");\r\n $stmt->execute();\r\n $monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n \r\n-// Program distribution\r\n+// Program distribution - Fixed query\r\n $stmt = $conn->prepare(\"\r\n     SELECT program, COUNT(*) as count \r\n     FROM enrollments \r\n     WHERE status IN ('approved', 'enrolled')\r\n"
                },
                {
                    "date": 1749401424052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jgp') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401436793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jgp') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401568081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401612208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401637914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401651918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '..//picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401677165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '..//picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749401720460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,557 @@\n+<?php\r\n+session_start();\r\n+include '../db.php';\r\n+\r\n+// Check if database connection exists\r\n+if (!$conn) {\r\n+    die(\"Database connection failed. Please check your database configuration.\");\r\n+}\r\n+\r\n+// Check admin authentication\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n+    exit();\r\n+}\r\n+\r\n+// Get admin info with error handling\r\n+$admin = [\r\n+    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n+    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n+    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n+    'image' => '../img/default_admin.png'\r\n+];\r\n+\r\n+// If admin_id is set in session, get more details from database\r\n+if (isset($_SESSION['admin_id'])) {\r\n+    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n+    if ($stmt) {\r\n+        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n+        $stmt->execute();\r\n+        $result = $stmt->get_result();\r\n+        if ($result->num_rows > 0) {\r\n+            $admin = $result->fetch_assoc();\r\n+        }\r\n+        $stmt->close();\r\n+    }\r\n+}\r\n+\r\n+// Get dashboard statistics - Fixed queries\r\n+$stats = [];\r\n+\r\n+// Enrollment statistics\r\n+$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['enrollments'] = [];\r\n+while ($row = $result->fetch_assoc()) {\r\n+    $stats['enrollments'][$row['status']] = $row['count'];\r\n+}\r\n+\r\n+// Student statistics\r\n+$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n+\r\n+// Subject statistics\r\n+$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n+\r\n+// Recent enrollments - Fixed query based on actual table structure\r\n+$recentEnrollments = [];\r\n+try {\r\n+    $stmt = $conn->prepare(\"\r\n+        SELECT \r\n+            e.id,\r\n+            e.student_id,\r\n+            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n+            e.program,\r\n+            e.year_level,\r\n+            e.status,\r\n+            e.date_submitted\r\n+        FROM enrollments e \r\n+        LEFT JOIN students s ON e.student_id = s.student_id\r\n+        ORDER BY e.date_submitted DESC \r\n+        LIMIT 5\r\n+    \");\r\n+    $stmt->execute();\r\n+    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+    $stmt->close();\r\n+} catch (Exception $e) {\r\n+    // Fallback query if JOIN fails\r\n+    try {\r\n+        $stmt = $conn->prepare(\"\r\n+            SELECT \r\n+                id,\r\n+                student_id,\r\n+                CONCAT('Student ID: ', student_id) as student_name,\r\n+                program,\r\n+                year_level,\r\n+                status,\r\n+                date_submitted\r\n+            FROM enrollments \r\n+            ORDER BY date_submitted DESC \r\n+            LIMIT 5\r\n+        \");\r\n+        $stmt->execute();\r\n+        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+        $stmt->close();\r\n+    } catch (Exception $e2) {\r\n+        $recentEnrollments = [];\r\n+    }\r\n+}\r\n+\r\n+// Current enrollment period\r\n+$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n+\r\n+// Monthly enrollment trends - Fixed query\r\n+$stmt = $conn->prepare(\"\r\n+    SELECT \r\n+        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n+        COUNT(*) as count\r\n+    FROM enrollments \r\n+    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n+    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n+    ORDER BY month\r\n+\");\r\n+$stmt->execute();\r\n+$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+\r\n+// Program distribution - Fixed query\r\n+$stmt = $conn->prepare(\"\r\n+    SELECT program, COUNT(*) as count \r\n+    FROM enrollments \r\n+    WHERE status IN ('approved', 'enrolled')\r\n+    GROUP BY program \r\n+    ORDER BY count DESC\r\n+\");\r\n+$stmt->execute();\r\n+$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+?>\r\n+\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n+    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n+    <style>\r\n+        body {\r\n+            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n+            font-family: 'Segoe UI', sans-serif;\r\n+        }\r\n+        .navbar {\r\n+            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+        }\r\n+        .school-logo {\r\n+            width: 50px;\r\n+            height: 50px;\r\n+            object-fit: cover;\r\n+            border-radius: 50%;\r\n+            margin-right: 10px;\r\n+            border: 2px solid #fff;\r\n+        }\r\n+        .stats-card {\r\n+            border-radius: 15px;\r\n+            border: none;\r\n+            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n+            transition: transform 0.3s ease;\r\n+            background: white;\r\n+        }\r\n+        .stats-card:hover {\r\n+            transform: translateY(-5px);\r\n+        }\r\n+        .stats-icon {\r\n+            width: 60px;\r\n+            height: 60px;\r\n+            border-radius: 50%;\r\n+            display: flex;\r\n+            align-items: center;\r\n+            justify-content: center;\r\n+            font-size: 1.5rem;\r\n+            color: white;\r\n+        }\r\n+        .quick-action-card {\r\n+            border-radius: 12px;\r\n+            border: none;\r\n+            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n+            transition: all 0.3s ease;\r\n+        }\r\n+        .quick-action-card:hover {\r\n+            transform: translateY(-2px);\r\n+            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n+        }\r\n+        .period-alert {\r\n+            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n+            border: none;\r\n+            border-radius: 10px;\r\n+            color: white;\r\n+        }\r\n+        .chart-container {\r\n+            position: relative;\r\n+            height: 300px;\r\n+        }\r\n+    </style>\r\n+</head>\r\n+<body>\r\n+    <!-- Navigation -->\r\n+    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n+        <div class=\"container-fluid\">\r\n+            <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n+                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n+                TLGC Admin Panel\r\n+            </a>\r\n+            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n+                <span class=\"navbar-toggler-icon\"></span>\r\n+            </button>\r\n+            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n+                <ul class=\"navbar-nav ms-auto\">\r\n+                    <li class=\"nav-item dropdown\">\r\n+                        <ul class=\"dropdown-menu\">\r\n+                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n+                                <i class=\"bi bi-person me-2\"></i>Profile\r\n+                            </a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n+                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n+                            </a></li>\r\n+                            <li><hr class=\"dropdown-divider\"></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n+                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n+                            </a></li>\r\n+                        </ul>\r\n+                    </li>\r\n+                </ul>\r\n+            </div>\r\n+        </div>\r\n+    </nav>\r\n+\r\n+    <div class=\"container-fluid py-4\">\r\n+        <!-- Welcome Section -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"d-flex justify-content-between align-items-center\">\r\n+                    <div>\r\n+                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n+                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n+                    </div>\r\n+                    <div class=\"text-end\">\r\n+                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n+                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Current Period Alert -->\r\n+        <?php if ($currentPeriod): ?>\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"alert period-alert\">\r\n+                    <div class=\"d-flex align-items-center\">\r\n+                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n+                        <div>\r\n+                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n+                            <p class=\"mb-0\">\r\n+                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n+                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n+                            </p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+        <?php endif; ?>\r\n+\r\n+        <!-- Statistics Cards -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-warning me-3\">\r\n+                            <i class=\"bi bi-clock-history\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-success me-3\">\r\n+                            <i class=\"bi bi-check-circle\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-primary me-3\">\r\n+                            <i class=\"bi bi-people\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Total Students</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-info me-3\">\r\n+                            <i class=\"bi bi-book\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Quick Actions -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <h4 class=\"mb-3\">Quick Actions</h4>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Charts and Recent Activity -->\r\n+        <div class=\"row\">\r\n+            <!-- Enrollment Trends Chart -->\r\n+            <div class=\"col-lg-8 mb-4\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header\">\r\n+                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"chart-container\">\r\n+                            <canvas id=\"enrollmentChart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+\r\n+            <!-- Program Distribution -->\r\n+            <div class=\"col-lg-4 mb-4\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header\">\r\n+                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"chart-container\">\r\n+                            <canvas id=\"programChart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <!-- Recent Enrollments -->\r\n+        <div class=\"row\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n+                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n+                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n+                    </div>\r\n+                    <div class=\"card-body p-0\">\r\n+                        <?php if (empty($recentEnrollments)): ?>\r\n+                            <div class=\"text-center py-4\">\r\n+                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n+                            </div>\r\n+                        <?php else: ?>\r\n+                            <div class=\"table-responsive\">\r\n+                                <table class=\"table table-hover mb-0\">\r\n+                                    <thead class=\"table-light\">\r\n+                                        <tr>\r\n+                                            <th>Student</th>\r\n+                                            <th>Program</th>\r\n+                                            <th>Year Level</th>\r\n+                                            <th>Status</th>\r\n+                                            <th>Date Submitted</th>\r\n+                                        </tr>\r\n+                                    </thead>\r\n+                                    <tbody>\r\n+                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n+                                        <tr>\r\n+                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n+                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n+                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n+                                            <td>\r\n+                                                <?php\r\n+                                                $statusClass = [\r\n+                                                    'pending' => 'warning',\r\n+                                                    'approved' => 'success',\r\n+                                                    'rejected' => 'danger',\r\n+                                                    'missing_documents' => 'info'\r\n+                                                ];\r\n+                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n+                                                ?>\r\n+                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n+                                            </td>\r\n+                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n+                                        </tr>\r\n+                                        <?php endforeach; ?>\r\n+                                    </tbody>\r\n+                                </table>\r\n+                            </div>\r\n+                        <?php endif; ?>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+\r\n+    <script>\r\n+        // Enrollment Trends Chart\r\n+        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n+        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n+        \r\n+        new Chart(enrollmentCtx, {\r\n+            type: 'line',\r\n+            data: {\r\n+                labels: enrollmentData.map(item => {\r\n+                    const date = new Date(item.month + '-01');\r\n+                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n+                }),\r\n+                datasets: [{\r\n+                    label: 'Enrollments',\r\n+                    data: enrollmentData.map(item => item.count),\r\n+                    borderColor: '#2e7d32',\r\n+                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n+                    tension: 0.4,\r\n+                    fill: true\r\n+                }]\r\n+            },\r\n+            options: {\r\n+                responsive: true,\r\n+                maintainAspectRatio: false,\r\n+                plugins: {\r\n+                    legend: {\r\n+                        display: false\r\n+                    }\r\n+                },\r\n+                scales: {\r\n+                    y: {\r\n+                        beginAtZero: true,\r\n+                        ticks: {\r\n+                            stepSize: 1\r\n+                        }\r\n+                    }\r\n+                }\r\n+            }\r\n+        });\r\n+\r\n+        // Program Distribution Chart\r\n+        const programCtx = document.getElementById('programChart').getContext('2d');\r\n+        const programData = <?= json_encode($programDistribution) ?>;\r\n+        \r\n+        new Chart(programCtx, {\r\n+            type: 'doughnut',\r\n+            data: {\r\n+                labels: programData.map(item => item.program),\r\n+                datasets: [{\r\n+                    data: programData.map(item => item.count),\r\n+                    backgroundColor: [\r\n+                        '#2e7d32',\r\n+                        '#388e3c',\r\n+                        '#4caf50',\r\n+                        '#66bb6a',\r\n+                        '#81c784',\r\n+                        '#a5d6a7'\r\n+                    ]\r\n+                }]\r\n+            },\r\n+            options: {\r\n+                responsive: true,\r\n+                maintainAspectRatio: false,\r\n+                plugins: {\r\n+                    legend: {\r\n+                        position: 'bottom'\r\n+                    }\r\n+                }\r\n+            }\r\n+        });\r\n+    </script>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1749401721857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -554,566 +554,4 @@\n         });\r\n     </script>\r\n </body>\r\n </html>\r\n-<?php\r\n-session_start();\r\n-include '../db.php';\r\n-\r\n-// Check if database connection exists\r\n-if (!$conn) {\r\n-    die(\"Database connection failed. Please check your database configuration.\");\r\n-}\r\n-\r\n-// Check admin authentication\r\n-if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit();\r\n-}\r\n-\r\n-// Get admin info with error handling\r\n-$admin = [\r\n-    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n-    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n-    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n-    'image' => '../img/default_admin.png'\r\n-];\r\n-\r\n-// If admin_id is set in session, get more details from database\r\n-if (isset($_SESSION['admin_id'])) {\r\n-    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n-    if ($stmt) {\r\n-        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n-        $stmt->execute();\r\n-        $result = $stmt->get_result();\r\n-        if ($result->num_rows > 0) {\r\n-            $admin = $result->fetch_assoc();\r\n-        }\r\n-        $stmt->close();\r\n-    }\r\n-}\r\n-\r\n-// Get dashboard statistics - Fixed queries\r\n-$stats = [];\r\n-\r\n-// Enrollment statistics\r\n-$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['enrollments'] = [];\r\n-while ($row = $result->fetch_assoc()) {\r\n-    $stats['enrollments'][$row['status']] = $row['count'];\r\n-}\r\n-\r\n-// Student statistics\r\n-$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n-\r\n-// Subject statistics\r\n-$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n-\r\n-// Recent enrollments - Fixed query based on actual table structure\r\n-$recentEnrollments = [];\r\n-try {\r\n-    $stmt = $conn->prepare(\"\r\n-        SELECT \r\n-            e.id,\r\n-            e.student_id,\r\n-            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n-            e.program,\r\n-            e.year_level,\r\n-            e.status,\r\n-            e.date_submitted\r\n-        FROM enrollments e \r\n-        LEFT JOIN students s ON e.student_id = s.student_id\r\n-        ORDER BY e.date_submitted DESC \r\n-        LIMIT 5\r\n-    \");\r\n-    $stmt->execute();\r\n-    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-    $stmt->close();\r\n-} catch (Exception $e) {\r\n-    // Fallback query if JOIN fails\r\n-    try {\r\n-        $stmt = $conn->prepare(\"\r\n-            SELECT \r\n-                id,\r\n-                student_id,\r\n-                CONCAT('Student ID: ', student_id) as student_name,\r\n-                program,\r\n-                year_level,\r\n-                status,\r\n-                date_submitted\r\n-            FROM enrollments \r\n-            ORDER BY date_submitted DESC \r\n-            LIMIT 5\r\n-        \");\r\n-        $stmt->execute();\r\n-        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-        $stmt->close();\r\n-    } catch (Exception $e2) {\r\n-        $recentEnrollments = [];\r\n-    }\r\n-}\r\n-\r\n-// Current enrollment period\r\n-$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n-\r\n-// Monthly enrollment trends - Fixed query\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT \r\n-        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n-        COUNT(*) as count\r\n-    FROM enrollments \r\n-    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n-    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n-    ORDER BY month\r\n-\");\r\n-$stmt->execute();\r\n-$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-\r\n-// Program distribution - Fixed query\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT program, COUNT(*) as count \r\n-    FROM enrollments \r\n-    WHERE status IN ('approved', 'enrolled')\r\n-    GROUP BY program \r\n-    ORDER BY count DESC\r\n-\");\r\n-$stmt->execute();\r\n-$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-?>\r\n-\r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n-    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n-    <style>\r\n-        body {\r\n-            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n-            font-family: 'Segoe UI', sans-serif;\r\n-        }\r\n-        .navbar {\r\n-            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n-            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n-        }\r\n-        .school-logo {\r\n-            width: 50px;\r\n-            height: 50px;\r\n-            object-fit: cover;\r\n-            border-radius: 50%;\r\n-            margin-right: 10px;\r\n-            border: 2px solid #fff;\r\n-        }\r\n-        .stats-card {\r\n-            border-radius: 15px;\r\n-            border: none;\r\n-            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n-            transition: transform 0.3s ease;\r\n-            background: white;\r\n-        }\r\n-        .stats-card:hover {\r\n-            transform: translateY(-5px);\r\n-        }\r\n-        .stats-icon {\r\n-            width: 60px;\r\n-            height: 60px;\r\n-            border-radius: 50%;\r\n-            display: flex;\r\n-            align-items: center;\r\n-            justify-content: center;\r\n-            font-size: 1.5rem;\r\n-            color: white;\r\n-        }\r\n-        .quick-action-card {\r\n-            border-radius: 12px;\r\n-            border: none;\r\n-            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n-            transition: all 0.3s ease;\r\n-        }\r\n-        .quick-action-card:hover {\r\n-            transform: translateY(-2px);\r\n-            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n-        }\r\n-        .period-alert {\r\n-            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n-            border: none;\r\n-            border-radius: 10px;\r\n-            color: white;\r\n-        }\r\n-        .chart-container {\r\n-            position: relative;\r\n-            height: 300px;\r\n-        }\r\n-    </style>\r\n-</head>\r\n-<body>\r\n-    <!-- Navigation -->\r\n-    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n-        <div class=\"container-fluid\">\r\n-            <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n-                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n-                TLGC Admin Panel\r\n-            </a>\r\n-            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n-                <span class=\"navbar-toggler-icon\"></span>\r\n-            </button>\r\n-            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n-                <ul class=\"navbar-nav ms-auto\">\r\n-                    <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n-                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n-                            <?= htmlspecialchars($admin['name']) ?>\r\n-                        </a>\r\n-                        <ul class=\"dropdown-menu\">\r\n-                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n-                                <i class=\"bi bi-person me-2\"></i>Profile\r\n-                            </a></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n-                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n-                            </a></li>\r\n-                            <li><hr class=\"dropdown-divider\"></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n-                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n-                            </a></li>\r\n-                        </ul>\r\n-                    </li>\r\n-                </ul>\r\n-            </div>\r\n-        </div>\r\n-    </nav>\r\n-\r\n-    <div class=\"container-fluid py-4\">\r\n-        <!-- Welcome Section -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"d-flex justify-content-between align-items-center\">\r\n-                    <div>\r\n-                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n-                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n-                    </div>\r\n-                    <div class=\"text-end\">\r\n-                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n-                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Current Period Alert -->\r\n-        <?php if ($currentPeriod): ?>\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"alert period-alert\">\r\n-                    <div class=\"d-flex align-items-center\">\r\n-                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n-                        <div>\r\n-                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n-                            <p class=\"mb-0\">\r\n-                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n-                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n-                            </p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-        <?php endif; ?>\r\n-\r\n-        <!-- Statistics Cards -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-warning me-3\">\r\n-                            <i class=\"bi bi-clock-history\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-success me-3\">\r\n-                            <i class=\"bi bi-check-circle\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-primary me-3\">\r\n-                            <i class=\"bi bi-people\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Total Students</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-info me-3\">\r\n-                            <i class=\"bi bi-book\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Quick Actions -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <h4 class=\"mb-3\">Quick Actions</h4>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Charts and Recent Activity -->\r\n-        <div class=\"row\">\r\n-            <!-- Enrollment Trends Chart -->\r\n-            <div class=\"col-lg-8 mb-4\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header\">\r\n-                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n-                    </div>\r\n-                    <div class=\"card-body\">\r\n-                        <div class=\"chart-container\">\r\n-                            <canvas id=\"enrollmentChart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-\r\n-            <!-- Program Distribution -->\r\n-            <div class=\"col-lg-4 mb-4\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header\">\r\n-                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n-                    </div>\r\n-                    <div class=\"card-body\">\r\n-                        <div class=\"chart-container\">\r\n-                            <canvas id=\"programChart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <!-- Recent Enrollments -->\r\n-        <div class=\"row\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n-                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n-                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n-                    </div>\r\n-                    <div class=\"card-body p-0\">\r\n-                        <?php if (empty($recentEnrollments)): ?>\r\n-                            <div class=\"text-center py-4\">\r\n-                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n-                            </div>\r\n-                        <?php else: ?>\r\n-                            <div class=\"table-responsive\">\r\n-                                <table class=\"table table-hover mb-0\">\r\n-                                    <thead class=\"table-light\">\r\n-                                        <tr>\r\n-                                            <th>Student</th>\r\n-                                            <th>Program</th>\r\n-                                            <th>Year Level</th>\r\n-                                            <th>Status</th>\r\n-                                            <th>Date Submitted</th>\r\n-                                        </tr>\r\n-                                    </thead>\r\n-                                    <tbody>\r\n-                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n-                                        <tr>\r\n-                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n-                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n-                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n-                                            <td>\r\n-                                                <?php\r\n-                                                $statusClass = [\r\n-                                                    'pending' => 'warning',\r\n-                                                    'approved' => 'success',\r\n-                                                    'rejected' => 'danger',\r\n-                                                    'missing_documents' => 'info'\r\n-                                                ];\r\n-                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n-                                                ?>\r\n-                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n-                                            </td>\r\n-                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n-                                        </tr>\r\n-                                        <?php endforeach; ?>\r\n-                                    </tbody>\r\n-                                </table>\r\n-                            </div>\r\n-                        <?php endif; ?>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-\r\n-    <script>\r\n-        // Enrollment Trends Chart\r\n-        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n-        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n-        \r\n-        new Chart(enrollmentCtx, {\r\n-            type: 'line',\r\n-            data: {\r\n-                labels: enrollmentData.map(item => {\r\n-                    const date = new Date(item.month + '-01');\r\n-                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n-                }),\r\n-                datasets: [{\r\n-                    label: 'Enrollments',\r\n-                    data: enrollmentData.map(item => item.count),\r\n-                    borderColor: '#2e7d32',\r\n-                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n-                    tension: 0.4,\r\n-                    fill: true\r\n-                }]\r\n-            },\r\n-            options: {\r\n-                responsive: true,\r\n-                maintainAspectRatio: false,\r\n-                plugins: {\r\n-                    legend: {\r\n-                        display: false\r\n-                    }\r\n-                },\r\n-                scales: {\r\n-                    y: {\r\n-                        beginAtZero: true,\r\n-                        ticks: {\r\n-                            stepSize: 1\r\n-                        }\r\n-                    }\r\n-                }\r\n-            }\r\n-        });\r\n-\r\n-        // Program Distribution Chart\r\n-        const programCtx = document.getElementById('programChart').getContext('2d');\r\n-        const programData = <?= json_encode($programDistribution) ?>;\r\n-        \r\n-        new Chart(programCtx, {\r\n-            type: 'doughnut',\r\n-            data: {\r\n-                labels: programData.map(item => item.program),\r\n-                datasets: [{\r\n-                    data: programData.map(item => item.count),\r\n-                    backgroundColor: [\r\n-                        '#2e7d32',\r\n-                        '#388e3c',\r\n-                        '#4caf50',\r\n-                        '#66bb6a',\r\n-                        '#81c784',\r\n-                        '#a5d6a7'\r\n-                    ]\r\n-                }]\r\n-            },\r\n-            options: {\r\n-                responsive: true,\r\n-                maintainAspectRatio: false,\r\n-                plugins: {\r\n-                    legend: {\r\n-                        position: 'bottom'\r\n-                    }\r\n-                }\r\n-            }\r\n-        });\r\n-    </script>\r\n-</body>\r\n-</html>\r\n"
                },
                {
                    "date": 1749401729696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,8 +216,13 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n+                            <?= htmlspecialchars($admin['name']) ?>\r\n+                        </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n                                 <i class=\"bi bi-person me-2\"></i>Profile\r\n                             </a></li>\r\n"
                },
                {
                    "date": 1749401754707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,9 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"/picture/tlgc_pic.jpg\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                             <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n"
                },
                {
                    "date": 1749401771507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,9 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"/picture/tlgc_pic.jpg\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                             <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n"
                },
                {
                    "date": 1749402068816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                            \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749402077519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,9 +218,8 @@\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                             \r\n-                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749402092996,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,8 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            \r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749402105754,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,10 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\"><img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749402158930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,9 +216,10 @@\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\"><img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749402168953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,9 +217,9 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? 'picture/tlgc_pic.jpg') ?>\" \r\n+                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n                                  alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n"
                },
                {
                    "date": 1749402183946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,10 +217,10 @@\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n                         <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n-                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n+                            <!-- <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n+                                alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\"> -->\r\n                             <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n                             <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n"
                },
                {
                    "date": 1749404418364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,8 +143,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n     <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n     <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n+    <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n     <style>\r\n         body {\r\n             background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n             font-family: 'Segoe UI', sans-serif;\r\n"
                },
                {
                    "date": 1749409151674,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,563 +1,517 @@\n <?php\r\n session_start();\r\n-include '../db.php';\r\n \r\n-// Check if database connection exists\r\n-if (!$conn) {\r\n-    die(\"Database connection failed. Please check your database configuration.\");\r\n+if (!isset($_SESSION['student_id'])) {\r\n+    header(\"Location: ../logregfor/login.php\");\r\n+    exit;\r\n }\r\n \r\n-// Check admin authentication\r\n-if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit();\r\n-}\r\n+// Include database connection and helper functions\r\n+require_once '../db.php';\r\n+require_once 'student-dashboard-helper.php';\r\n \r\n-// Get admin info with error handling\r\n-$admin = [\r\n-    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n-    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n-    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n-    'image' => '../img/default_admin.png'\r\n-];\r\n+$student_id = $_SESSION['student_id'];\r\n \r\n-// If admin_id is set in session, get more details from database\r\n-if (isset($_SESSION['admin_id'])) {\r\n-    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n-    if ($stmt) {\r\n-        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n-        $stmt->execute();\r\n-        $result = $stmt->get_result();\r\n-        if ($result->num_rows > 0) {\r\n-            $admin = $result->fetch_assoc();\r\n-        }\r\n-        $stmt->close();\r\n-    }\r\n-}\r\n+// Fetch student information\r\n+$stmt = $pdo->prepare(\"SELECT * FROM students WHERE student_id = ?\");\r\n+$stmt->execute([$student_id]);\r\n+$student = $stmt->fetch();\r\n \r\n-// Get dashboard statistics - Fixed queries\r\n-$stats = [];\r\n-\r\n-// Enrollment statistics\r\n-$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['enrollments'] = [];\r\n-while ($row = $result->fetch_assoc()) {\r\n-    $stats['enrollments'][$row['status']] = $row['count'];\r\n+if (!$student) {\r\n+    session_destroy();\r\n+    header(\"Location: ../logregfor/login.php\");\r\n+    exit;\r\n }\r\n \r\n-// Student statistics\r\n-$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n+// Get formatted student ID\r\n+$formattedStudentId = getStudentFormattedId($pdo, $student_id);\r\n \r\n-// Subject statistics\r\n-$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n+// Fetch enrollment status\r\n+$stmt = $pdo->prepare(\"SELECT * FROM enrollments WHERE student_id = ? ORDER BY date_submitted DESC LIMIT 1\");\r\n+$stmt->execute([$student_id]);\r\n+$enrollment = $stmt->fetch();\r\n \r\n-// Recent enrollments - Fixed query based on actual table structure\r\n-$recentEnrollments = [];\r\n-try {\r\n-    $stmt = $conn->prepare(\"\r\n-        SELECT \r\n-            e.id,\r\n-            e.student_id,\r\n-            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n-            e.program,\r\n-            e.year_level,\r\n-            e.status,\r\n-            e.date_submitted\r\n-        FROM enrollments e \r\n-        LEFT JOIN students s ON e.student_id = s.student_id\r\n-        ORDER BY e.date_submitted DESC \r\n-        LIMIT 5\r\n-    \");\r\n-    $stmt->execute();\r\n-    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-    $stmt->close();\r\n-} catch (Exception $e) {\r\n-    // Fallback query if JOIN fails\r\n-    try {\r\n-        $stmt = $conn->prepare(\"\r\n-            SELECT \r\n-                id,\r\n-                student_id,\r\n-                CONCAT('Student ID: ', student_id) as student_name,\r\n-                program,\r\n-                year_level,\r\n-                status,\r\n-                date_submitted\r\n-            FROM enrollments \r\n-            ORDER BY date_submitted DESC \r\n-            LIMIT 5\r\n-        \");\r\n-        $stmt->execute();\r\n-        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n-        $stmt->close();\r\n-    } catch (Exception $e2) {\r\n-        $recentEnrollments = [];\r\n-    }\r\n+// Set default values if no enrollment found\r\n+if (!$enrollment) {\r\n+    $enrollment = [\r\n+        'program' => 'Not Enrolled',\r\n+        'year_level' => 'N/A',\r\n+        'semester' => 'N/A',\r\n+        'section' => 'N/A',\r\n+        'status' => 'not_enrolled',\r\n+        'date_submitted' => null\r\n+    ];\r\n }\r\n \r\n-// Current enrollment period\r\n-$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n+// Get enrollment status info\r\n+$statusInfo = getEnrollmentStatusInfo($enrollment['status']);\r\n \r\n-// Monthly enrollment trends - Fixed query\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT \r\n-        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n-        COUNT(*) as count\r\n-    FROM enrollments \r\n-    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n-    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n-    ORDER BY month\r\n-\");\r\n-$stmt->execute();\r\n-$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+// Count uploaded documents\r\n+$stmt = $pdo->prepare(\"SELECT COUNT(*) as doc_count FROM uploaded_documents WHERE student_id = ?\");\r\n+$stmt->execute([$student_id]);\r\n+$docCount = $stmt->fetch()['doc_count'];\r\n \r\n-// Program distribution - Fixed query\r\n-$stmt = $conn->prepare(\"\r\n-    SELECT program, COUNT(*) as count \r\n-    FROM enrollments \r\n-    WHERE status IN ('approved', 'enrolled')\r\n-    GROUP BY program \r\n-    ORDER BY count DESC\r\n-\");\r\n-$stmt->execute();\r\n-$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+// Count assigned subjects\r\n+$stmt = $pdo->prepare(\"SELECT COUNT(*) as subject_count FROM student_subjects ss JOIN subjects s ON ss.subject_id = s.id WHERE ss.student_id = ?\");\r\n+$stmt->execute([$student_id]);\r\n+$subjectCount = $stmt->fetch()['subject_count'];\r\n+\r\n+$studentName = trim($student['first_name'] . ' ' . ($student['middle_name'] ? $student['middle_name'] . ' ' : '') . $student['last_name']);\r\n+$photo = $student['photo'] ?? 'student/uploads/default-avatar.png';\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n-    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n+    <title>Student Dashboard - <?= htmlspecialchars($studentName) ?></title>\r\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n     <style>\r\n+        :root {\r\n+            --primary-green: #2e7d32;\r\n+            --light-green: #e8f5e9;\r\n+            --accent-green: #43a047;\r\n+            --hover-green: #c8e6c9;\r\n+            --dark-green: #1b5e20;\r\n+        }\r\n+\r\n         body {\r\n-            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n-            font-family: 'Segoe UI', sans-serif;\r\n+            background: linear-gradient(135deg, var(--light-green) 0%, #f1f8e9 100%);\r\n+            min-height: 100vh;\r\n+            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n         }\r\n+\r\n         .navbar {\r\n-            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n-            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);\r\n+            box-shadow: 0 2px 10px rgba(46, 125, 50, 0.3);\r\n         }\r\n+\r\n+        .navbar-brand, .nav-link {\r\n+            color: #fff !important;\r\n+            font-weight: 600;\r\n+            letter-spacing: 0.5px;\r\n+            transition: all 0.3s ease;\r\n+        }\r\n+\r\n+        .nav-link:hover {\r\n+            color: var(--hover-green) !important;\r\n+            transform: translateY(-1px);\r\n+        }\r\n+\r\n         .school-logo {\r\n             width: 50px;\r\n             height: 50px;\r\n             object-fit: cover;\r\n             border-radius: 50%;\r\n-            margin-right: 10px;\r\n-            border: 2px solid #fff;\r\n+            margin-right: 15px;\r\n+            border: 3px solid #fff;\r\n+            transition: transform 0.3s ease;\r\n         }\r\n+\r\n+        .school-logo:hover {\r\n+            transform: scale(1.1);\r\n+        }\r\n+\r\n+        .profile-card {\r\n+            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n+            border-radius: 20px;\r\n+            box-shadow: 0 8px 25px rgba(46, 125, 50, 0.15);\r\n+            padding: 2rem;\r\n+            margin-bottom: 2rem;\r\n+            border: 1px solid rgba(46, 125, 50, 0.1);\r\n+        }\r\n+\r\n+        .profile-pic {\r\n+            width: 120px;\r\n+            height: 120px;\r\n+            object-fit: cover;\r\n+            border-radius: 50%;\r\n+            border: 4px solid var(--accent-green);\r\n+            box-shadow: 0 4px 15px rgba(67, 160, 71, 0.3);\r\n+            transition: transform 0.3s ease;\r\n+        }\r\n+\r\n+        .profile-pic:hover {\r\n+            transform: scale(1.05);\r\n+        }\r\n+\r\n         .stats-card {\r\n+            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n             border-radius: 15px;\r\n+            padding: 1.5rem;\r\n+            text-align: center;\r\n             border: none;\r\n-            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n-            transition: transform 0.3s ease;\r\n-            background: white;\r\n+            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);\r\n+            transition: all 0.3s ease;\r\n+            height: 100%;\r\n         }\r\n+\r\n         .stats-card:hover {\r\n             transform: translateY(-5px);\r\n+            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\r\n         }\r\n+\r\n         .stats-icon {\r\n-            width: 60px;\r\n-            height: 60px;\r\n-            border-radius: 50%;\r\n-            display: flex;\r\n-            align-items: center;\r\n-            justify-content: center;\r\n-            font-size: 1.5rem;\r\n-            color: white;\r\n+            font-size: 2.5rem;\r\n+            margin-bottom: 1rem;\r\n+            display: block;\r\n         }\r\n+\r\n+        .icon-enrollment { color: #4caf50; }\r\n+        .icon-subjects { color: #2196f3; }\r\n+        .icon-documents { color: #ff9800; }\r\n+        .icon-profile { color: #9c27b0; }\r\n+\r\n         .quick-action-card {\r\n-            border-radius: 12px;\r\n+            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n+            border-radius: 15px;\r\n+            padding: 1.5rem;\r\n             border: none;\r\n-            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n+            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);\r\n             transition: all 0.3s ease;\r\n+            height: 100%;\r\n         }\r\n+\r\n         .quick-action-card:hover {\r\n+            transform: translateY(-3px);\r\n+            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);\r\n+        }\r\n+\r\n+        .status-badge {\r\n+            padding: 8px 16px;\r\n+            border-radius: 25px;\r\n+            font-weight: 600;\r\n+            font-size: 0.9rem;\r\n+            display: inline-flex;\r\n+            align-items: center;\r\n+            gap: 5px;\r\n+        }\r\n+\r\n+        .status-approved { background-color: #4caf50; color: white; }\r\n+        .status-pending { background-color: #ff9800; color: white; }\r\n+        .status-rejected { background-color: #f44336; color: white; }\r\n+        .status-warning { background-color: #ff5722; color: white; }\r\n+        .status-not-enrolled { background-color: #9e9e9e; color: white; }\r\n+\r\n+        .student-id-display {\r\n+            font-family: 'Courier New', monospace;\r\n+            background: linear-gradient(135deg, var(--light-green), var(--hover-green));\r\n+            padding: 10px 15px;\r\n+            border-radius: 10px;\r\n+            border: 2px solid var(--accent-green);\r\n+            font-weight: bold;\r\n+            font-size: 1.1rem;\r\n+            color: var(--dark-green);\r\n+            display: inline-block;\r\n+            margin-top: 5px;\r\n+        }\r\n+\r\n+        .section-title {\r\n+            color: var(--primary-green);\r\n+            font-weight: 700;\r\n+            margin-bottom: 1.5rem;\r\n+            position: relative;\r\n+            padding-bottom: 10px;\r\n+        }\r\n+\r\n+        .section-title::after {\r\n+            content: '';\r\n+            position: absolute;\r\n+            bottom: 0;\r\n+            left: 0;\r\n+            width: 50px;\r\n+            height: 3px;\r\n+            background: linear-gradient(90deg, var(--accent-green), var(--primary-green));\r\n+            border-radius: 2px;\r\n+        }\r\n+\r\n+        .btn-custom {\r\n+            background: linear-gradient(135deg, var(--accent-green) 0%, var(--primary-green) 100%);\r\n+            border: none;\r\n+            color: white;\r\n+            font-weight: 600;\r\n+            padding: 10px 20px;\r\n+            border-radius: 25px;\r\n+            transition: all 0.3s ease;\r\n+            text-decoration: none;\r\n+            display: inline-block;\r\n+        }\r\n+\r\n+        .btn-custom:hover {\r\n             transform: translateY(-2px);\r\n-            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n+            box-shadow: 0 5px 15px rgba(67, 160, 71, 0.4);\r\n+            color: white;\r\n         }\r\n-        .period-alert {\r\n-            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n+\r\n+        .list-group-item {\r\n             border: none;\r\n-            border-radius: 10px;\r\n+            border-radius: 10px !important;\r\n+            margin-bottom: 8px;\r\n+            transition: all 0.3s ease;\r\n+            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n+        }\r\n+\r\n+        .list-group-item:hover {\r\n+            background: linear-gradient(135deg, var(--light-green) 0%, var(--hover-green) 100%);\r\n+            transform: translateX(5px);\r\n+            color: var(--dark-green);\r\n+        }\r\n+\r\n+        .welcome-text {\r\n+            background: linear-gradient(135deg, var(--primary-green), var(--accent-green));\r\n+            -webkit-background-clip: text;\r\n+            -webkit-text-fill-color: transparent;\r\n+            background-clip: text;\r\n+            font-weight: 700;\r\n+        }\r\n+\r\n+        .footer {\r\n+            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);\r\n             color: white;\r\n+            text-align: center;\r\n+            padding: 2rem 0;\r\n+            margin-top: 3rem;\r\n         }\r\n-        .chart-container {\r\n-            position: relative;\r\n-            height: 300px;\r\n+\r\n+        .alert-enrollment {\r\n+            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);\r\n+            border: 1px solid #ffc107;\r\n+            border-radius: 15px;\r\n+            padding: 1rem;\r\n+            margin-bottom: 1rem;\r\n         }\r\n+\r\n+        @media (max-width: 768px) {\r\n+            .profile-card {\r\n+                text-align: center;\r\n+            }\r\n+            \r\n+            .stats-card {\r\n+                margin-bottom: 1rem;\r\n+            }\r\n+            \r\n+            .student-id-display {\r\n+                font-size: 1rem;\r\n+            }\r\n+        }\r\n     </style>\r\n </head>\r\n <body>\r\n     <!-- Navigation -->\r\n-    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n-        <div class=\"container-fluid\">\r\n+    <nav class=\"navbar navbar-expand-lg sticky-top\">\r\n+        <div class=\"container\">\r\n             <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n                 <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n-                TLGC Admin Panel\r\n+                <span>Student Portal</span>\r\n             </a>\r\n             <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n                 <span class=\"navbar-toggler-icon\"></span>\r\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <!-- <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n-                                alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\"> -->\r\n-                            <?= htmlspecialchars($admin['name']) ?>\r\n+                        <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                            <i class=\"bi bi-person-circle\"></i> <?= htmlspecialchars($student['first_name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n-                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n-                                <i class=\"bi bi-person me-2\"></i>Profile\r\n-                            </a></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n-                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n-                            </a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"history&Profile/Edit Profile.php\"><i class=\"bi bi-person-gear\"></i> Edit Profile</a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"history&Profile/Change Password.php\"><i class=\"bi bi-key\"></i> Change Password</a></li>\r\n                             <li><hr class=\"dropdown-divider\"></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n-                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n-                            </a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"../logregfor/logout.php\"><i class=\"bi bi-box-arrow-right\"></i> Logout</a></li>\r\n                         </ul>\r\n                     </li>\r\n                 </ul>\r\n             </div>\r\n         </div>\r\n     </nav>\r\n \r\n-    <div class=\"container-fluid py-4\">\r\n-        <!-- Welcome Section -->\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"d-flex justify-content-between align-items-center\">\r\n-                    <div>\r\n-                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n-                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n-                    </div>\r\n-                    <div class=\"text-end\">\r\n-                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n-                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n-                    </div>\r\n+    <div class=\"container my-4\">\r\n+        <!-- Enrollment Action Alert -->\r\n+        <?php if (needsEnrollmentAction($enrollment)): ?>\r\n+        <div class=\"alert-enrollment\">\r\n+            <div class=\"d-flex align-items-center\">\r\n+                <i class=\"bi bi-exclamation-triangle-fill text-warning me-3\" style=\"font-size: 1.5rem;\"></i>\r\n+                <div>\r\n+                    <h6 class=\"mb-1\">Action Required</h6>\r\n+                    <p class=\"mb-0\">\r\n+                        <?php if ($enrollment['status'] === 'not_enrolled'): ?>\r\n+                            You haven't enrolled yet. Please complete your enrollment to access all features.\r\n+                        <?php elseif ($enrollment['status'] === 'pending'): ?>\r\n+                            Your enrollment is pending review. Please wait for admin approval.\r\n+                        <?php elseif ($enrollment['status'] === 'missing_documents'): ?>\r\n+                            Your enrollment requires additional documents. Please upload the missing requirements.\r\n+                        <?php endif; ?>\r\n+                    </p>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n+        <?php endif; ?>\r\n \r\n-        <!-- Current Period Alert -->\r\n-        <?php if ($currentPeriod): ?>\r\n-        <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"alert period-alert\">\r\n-                    <div class=\"d-flex align-items-center\">\r\n-                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n-                        <div>\r\n-                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n-                            <p class=\"mb-0\">\r\n-                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n-                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n+        <!-- Welcome Section -->\r\n+        <div class=\"profile-card\">\r\n+            <div class=\"row align-items-center\">\r\n+                <div class=\"col-md-3 text-center\">\r\n+                    <img src=\"<?= htmlspecialchars('../' . $photo) ?>\" alt=\"Profile Picture\" class=\"profile-pic\" onerror=\"this.src='../student/uploads/default-avatar.png'\">\r\n+                </div>\r\n+                <div class=\"col-md-9\">\r\n+                    <h2 class=\"welcome-text mb-2\">Welcome back, <?= htmlspecialchars($student['first_name']) ?>!</h2>\r\n+                    <h4 class=\"text-dark mb-3\"><?= htmlspecialchars($studentName) ?></h4>\r\n+                    <div class=\"row\">\r\n+                        <div class=\"col-md-6\">\r\n+                            <p class=\"mb-2\"><strong>Student ID:</strong></p>\r\n+                            <div class=\"student-id-display\">\r\n+                                <?= htmlspecialchars($formattedStudentId) ?>\r\n+                            </div>\r\n+                            <?php if ($formattedStudentId !== $student_id): ?>\r\n+                                <small class=\"text-muted d-block mt-1\">System ID: <?= htmlspecialchars($student_id) ?></small>\r\n+                            <?php endif; ?>\r\n+                        </div>\r\n+                        <div class=\"col-md-6\">\r\n+                            <p class=\"mb-1\"><strong>Email:</strong> <?= htmlspecialchars($student['email']) ?></p>\r\n+                            <p class=\"mb-1\"><strong>Program:</strong> <?= htmlspecialchars($enrollment['program']) ?></p>\r\n+                            <p class=\"mb-1\"><strong>Status:</strong> \r\n+                                <span class=\"status-badge <?= $statusInfo['class'] ?>\">\r\n+                                    <i class=\"bi <?= $statusInfo['icon'] ?>\"></i>\r\n+                                    <?= $statusInfo['text'] ?>\r\n+                                </span>\r\n                             </p>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n-        <?php endif; ?>\r\n \r\n         <!-- Statistics Cards -->\r\n         <div class=\"row mb-4\">\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-warning me-3\">\r\n-                            <i class=\"bi bi-clock-history\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n-                        </div>\r\n-                    </div>\r\n+            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n+                <div class=\"stats-card\">\r\n+                    <i class=\"bi bi-journal-check stats-icon icon-enrollment\"></i>\r\n+                    <h5>Enrollment</h5>\r\n+                    <p class=\"text-muted mb-0\"><?= $statusInfo['text'] ?></p>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-success me-3\">\r\n-                            <i class=\"bi bi-check-circle\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n-                        </div>\r\n-                    </div>\r\n+            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n+                <div class=\"stats-card\">\r\n+                    <i class=\"bi bi-book stats-icon icon-subjects\"></i>\r\n+                    <h5>Subjects</h5>\r\n+                    <p class=\"text-muted mb-0\"><?= $subjectCount ?> Assigned</p>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-primary me-3\">\r\n-                            <i class=\"bi bi-people\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Total Students</p>\r\n-                        </div>\r\n-                    </div>\r\n+            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n+                <div class=\"stats-card\">\r\n+                    <i class=\"bi bi-file-earmark-text stats-icon icon-documents\"></i>\r\n+                    <h5>Documents</h5>\r\n+                    <p class=\"text-muted mb-0\"><?= $docCount ?> Uploaded</p>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n-                <div class=\"card stats-card h-100\">\r\n-                    <div class=\"card-body d-flex align-items-center\">\r\n-                        <div class=\"stats-icon bg-info me-3\">\r\n-                            <i class=\"bi bi-book\"></i>\r\n-                        </div>\r\n-                        <div>\r\n-                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n-                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n-                        </div>\r\n-                    </div>\r\n+            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n+                <div class=\"stats-card\">\r\n+                    <i class=\"bi bi-person-badge stats-icon icon-profile\"></i>\r\n+                    <h5>Profile</h5>\r\n+                    <p class=\"text-muted mb-0\">Complete</p>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n \r\n         <!-- Quick Actions -->\r\n+        <h3 class=\"section-title\">Quick Actions</h3>\r\n         <div class=\"row mb-4\">\r\n-            <div class=\"col-12\">\r\n-                <h4 class=\"mb-3\">Quick Actions</h4>\r\n+            <div class=\"col-md-4 mb-3\">\r\n+                <div class=\"quick-action-card\">\r\n+                    <h5 class=\"text-primary\"><i class=\"bi bi-journal-plus\"></i> Enrollment</h5>\r\n+                    <p class=\"text-muted\">Manage your enrollment status and view details</p>\r\n+                    <a href=\"MyEnrollAssignUpload/enrollment-status.php\" class=\"btn-custom\">View Status</a>\r\n+                </div>\r\n             </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n+            <div class=\"col-md-4 mb-3\">\r\n+                <div class=\"quick-action-card\">\r\n+                    <h5 class=\"text-success\"><i class=\"bi bi-books\"></i> My Subjects</h5>\r\n+                    <p class=\"text-muted\">View your assigned subjects and schedule</p>\r\n+                    <a href=\"MyEnrollAssignUpload/mysubject.php\" class=\"btn-custom\">View Subjects</a>\r\n+                </div>\r\n             </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n+            <div class=\"col-md-4 mb-3\">\r\n+                <div class=\"quick-action-card\">\r\n+                    <h5 class=\"text-warning\"><i class=\"bi bi-cloud-upload\"></i> Documents</h5>\r\n+                    <p class=\"text-muted\">Upload and manage your documents</p>\r\n+                    <a href=\"Documents/UploadRequirements.php\" class=\"btn-custom\">Upload Files</a>\r\n+                </div>\r\n             </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n-            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n-                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n-                    <div class=\"card quick-action-card h-100 text-center\">\r\n-                        <div class=\"card-body\">\r\n-                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n-                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n-                        </div>\r\n-                    </div>\r\n-                </a>\r\n-            </div>\r\n         </div>\r\n \r\n-        <!-- Charts and Recent Activity -->\r\n+        <!-- Navigation Menu -->\r\n         <div class=\"row\">\r\n-            <!-- Enrollment Trends Chart -->\r\n-            <div class=\"col-lg-8 mb-4\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header\">\r\n-                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n-                    </div>\r\n-                    <div class=\"card-body\">\r\n-                        <div class=\"chart-container\">\r\n-                            <canvas id=\"enrollmentChart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n+            <div class=\"col-md-6\">\r\n+                <h4 class=\"section-title\">Enrollment Services</h4>\r\n+                <div class=\"list-group\">\r\n+                    <a href=\"Enrollment/fill-up-enrollment-form.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-pencil-square me-2\"></i>Fill-up Enrollment Form\r\n+                    </a>\r\n+                    <a href=\"MyEnrollAssignUpload/enrollment-status.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-eye me-2\"></i>View Enrollment Status\r\n+                    </a>\r\n+                    <a href=\"MyEnrollAssignUpload/assigned-subjects.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-book me-2\"></i>View Assigned Subjects\r\n+                    </a>\r\n+                    <a href=\"Enrollment/print-enrollment-slip.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-printer me-2\"></i>Print Enrollment Slip\r\n+                    </a>\r\n                 </div>\r\n             </div>\r\n-\r\n-            <!-- Program Distribution -->\r\n-            <div class=\"col-lg-4 mb-4\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header\">\r\n-                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n-                    </div>\r\n-                    <div class=\"card-body\">\r\n-                        <div class=\"chart-container\">\r\n-                            <canvas id=\"programChart\"></canvas>\r\n-                        </div>\r\n-                    </div>\r\n+            <div class=\"col-md-6\">\r\n+                <h4 class=\"section-title\">Student Services</h4>\r\n+                <div class=\"list-group\">\r\n+                    <a href=\"Documents/UploadRequirements.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-upload me-2\"></i>Upload Requirements\r\n+                    </a>\r\n+                    <a href=\"Documents/View Uploaded Files.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-files me-2\"></i>View Uploaded Files\r\n+                    </a>\r\n+                    <a href=\"history&Profile/Enrollment History.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-clock-history me-2\"></i>Enrollment History\r\n+                    </a>\r\n+                    <a href=\"history&Profile/Edit Profile.php\" class=\"list-group-item list-group-item-action\">\r\n+                        <i class=\"bi bi-person-gear me-2\"></i>Edit Profile\r\n+                    </a>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n+    </div>\r\n \r\n-        <!-- Recent Enrollments -->\r\n-        <div class=\"row\">\r\n-            <div class=\"col-12\">\r\n-                <div class=\"card\">\r\n-                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n-                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n-                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n-                    </div>\r\n-                    <div class=\"card-body p-0\">\r\n-                        <?php if (empty($recentEnrollments)): ?>\r\n-                            <div class=\"text-center py-4\">\r\n-                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n-                            </div>\r\n-                        <?php else: ?>\r\n-                            <div class=\"table-responsive\">\r\n-                                <table class=\"table table-hover mb-0\">\r\n-                                    <thead class=\"table-light\">\r\n-                                        <tr>\r\n-                                            <th>Student</th>\r\n-                                            <th>Program</th>\r\n-                                            <th>Year Level</th>\r\n-                                            <th>Status</th>\r\n-                                            <th>Date Submitted</th>\r\n-                                        </tr>\r\n-                                    </thead>\r\n-                                    <tbody>\r\n-                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n-                                        <tr>\r\n-                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n-                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n-                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n-                                            <td>\r\n-                                                <?php\r\n-                                                $statusClass = [\r\n-                                                    'pending' => 'warning',\r\n-                                                    'approved' => 'success',\r\n-                                                    'rejected' => 'danger',\r\n-                                                    'missing_documents' => 'info'\r\n-                                                ];\r\n-                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n-                                                ?>\r\n-                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n-                                            </td>\r\n-                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n-                                        </tr>\r\n-                                        <?php endforeach; ?>\r\n-                                    </tbody>\r\n-                                </table>\r\n-                            </div>\r\n-                        <?php endif; ?>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n+    <!-- Footer -->\r\n+    <footer class=\"footer\">\r\n+        <div class=\"container\">\r\n+            <p class=\"mb-0\">&copy; <?= date('Y') ?> Top Link Global College Inc. All rights reserved.</p>\r\n+            <p class=\"mb-0\">Enrollment Management System</p>\r\n         </div>\r\n-    </div>\r\n+    </footer>\r\n \r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n     <script>\r\n-        // Enrollment Trends Chart\r\n-        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n-        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n-        \r\n-        new Chart(enrollmentCtx, {\r\n-            type: 'line',\r\n-            data: {\r\n-                labels: enrollmentData.map(item => {\r\n-                    const date = new Date(item.month + '-01');\r\n-                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n-                }),\r\n-                datasets: [{\r\n-                    label: 'Enrollments',\r\n-                    data: enrollmentData.map(item => item.count),\r\n-                    borderColor: '#2e7d32',\r\n-                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n-                    tension: 0.4,\r\n-                    fill: true\r\n-                }]\r\n-            },\r\n-            options: {\r\n-                responsive: true,\r\n-                maintainAspectRatio: false,\r\n-                plugins: {\r\n-                    legend: {\r\n-                        display: false\r\n+        // Add some interactive effects\r\n+        document.addEventListener('DOMContentLoaded', function() {\r\n+            // Animate cards on scroll\r\n+            const cards = document.querySelectorAll('.stats-card, .quick-action-card');\r\n+            \r\n+            const observer = new IntersectionObserver((entries) => {\r\n+                entries.forEach(entry => {\r\n+                    if (entry.isIntersecting) {\r\n+                        entry.target.style.opacity = '1';\r\n+                        entry.target.style.transform = 'translateY(0)';\r\n                     }\r\n-                },\r\n-                scales: {\r\n-                    y: {\r\n-                        beginAtZero: true,\r\n-                        ticks: {\r\n-                            stepSize: 1\r\n-                        }\r\n-                    }\r\n-                }\r\n-            }\r\n-        });\r\n+                });\r\n+            });\r\n \r\n-        // Program Distribution Chart\r\n-        const programCtx = document.getElementById('programChart').getContext('2d');\r\n-        const programData = <?= json_encode($programDistribution) ?>;\r\n-        \r\n-        new Chart(programCtx, {\r\n-            type: 'doughnut',\r\n-            data: {\r\n-                labels: programData.map(item => item.program),\r\n-                datasets: [{\r\n-                    data: programData.map(item => item.count),\r\n-                    backgroundColor: [\r\n-                        '#2e7d32',\r\n-                        '#388e3c',\r\n-                        '#4caf50',\r\n-                        '#66bb6a',\r\n-                        '#81c784',\r\n-                        '#a5d6a7'\r\n-                    ]\r\n-                }]\r\n-            },\r\n-            options: {\r\n-                responsive: true,\r\n-                maintainAspectRatio: false,\r\n-                plugins: {\r\n-                    legend: {\r\n-                        position: 'bottom'\r\n-                    }\r\n-                }\r\n-            }\r\n+            cards.forEach(card => {\r\n+                card.style.opacity = '0';\r\n+                card.style.transform = 'translateY(20px)';\r\n+                card.style.transition = 'all 0.6s ease';\r\n+                observer.observe(card);\r\n+            });\r\n         });\r\n     </script>\r\n </body>\r\n </html>\r\n"
                },
                {
                    "date": 1749409170423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,517 +1,563 @@\n <?php\r\n session_start();\r\n+include '../db.php';\r\n \r\n-if (!isset($_SESSION['student_id'])) {\r\n-    header(\"Location: ../logregfor/login.php\");\r\n-    exit;\r\n+// Check if database connection exists\r\n+if (!$conn) {\r\n+    die(\"Database connection failed. Please check your database configuration.\");\r\n }\r\n \r\n-// Include database connection and helper functions\r\n-require_once '../db.php';\r\n-require_once 'student-dashboard-helper.php';\r\n+// Check admin authentication\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n+    exit();\r\n+}\r\n \r\n-$student_id = $_SESSION['student_id'];\r\n+// Get admin info with error handling\r\n+$admin = [\r\n+    'name' => $_SESSION['admin_username'] ?? 'Admin',\r\n+    'username' => $_SESSION['admin_username'] ?? 'admin',\r\n+    'role' => $_SESSION['admin_role'] ?? 'admin',\r\n+    'image' => '../img/default_admin.png'\r\n+];\r\n \r\n-// Fetch student information\r\n-$stmt = $pdo->prepare(\"SELECT * FROM students WHERE student_id = ?\");\r\n-$stmt->execute([$student_id]);\r\n-$student = $stmt->fetch();\r\n+// If admin_id is set in session, get more details from database\r\n+if (isset($_SESSION['admin_id'])) {\r\n+    $stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n+    if ($stmt) {\r\n+        $stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n+        $stmt->execute();\r\n+        $result = $stmt->get_result();\r\n+        if ($result->num_rows > 0) {\r\n+            $admin = $result->fetch_assoc();\r\n+        }\r\n+        $stmt->close();\r\n+    }\r\n+}\r\n \r\n-if (!$student) {\r\n-    session_destroy();\r\n-    header(\"Location: ../logregfor/login.php\");\r\n-    exit;\r\n+// Get dashboard statistics - Fixed queries\r\n+$stats = [];\r\n+\r\n+// Enrollment statistics\r\n+$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['enrollments'] = [];\r\n+while ($row = $result->fetch_assoc()) {\r\n+    $stats['enrollments'][$row['status']] = $row['count'];\r\n }\r\n \r\n-// Get formatted student ID\r\n-$formattedStudentId = getStudentFormattedId($pdo, $student_id);\r\n+// Student statistics\r\n+$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['total_students'] = $result->fetch_assoc()['total'] ?? 0;\r\n \r\n-// Fetch enrollment status\r\n-$stmt = $pdo->prepare(\"SELECT * FROM enrollments WHERE student_id = ? ORDER BY date_submitted DESC LIMIT 1\");\r\n-$stmt->execute([$student_id]);\r\n-$enrollment = $stmt->fetch();\r\n+// Subject statistics\r\n+$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$stats['total_subjects'] = $result->fetch_assoc()['total'] ?? 0;\r\n \r\n-// Set default values if no enrollment found\r\n-if (!$enrollment) {\r\n-    $enrollment = [\r\n-        'program' => 'Not Enrolled',\r\n-        'year_level' => 'N/A',\r\n-        'semester' => 'N/A',\r\n-        'section' => 'N/A',\r\n-        'status' => 'not_enrolled',\r\n-        'date_submitted' => null\r\n-    ];\r\n+// Recent enrollments - Fixed query based on actual table structure\r\n+$recentEnrollments = [];\r\n+try {\r\n+    $stmt = $conn->prepare(\"\r\n+        SELECT \r\n+            e.id,\r\n+            e.student_id,\r\n+            CONCAT(s.first_name, ' ', s.last_name) as student_name,\r\n+            e.program,\r\n+            e.year_level,\r\n+            e.status,\r\n+            e.date_submitted\r\n+        FROM enrollments e \r\n+        LEFT JOIN students s ON e.student_id = s.student_id\r\n+        ORDER BY e.date_submitted DESC \r\n+        LIMIT 5\r\n+    \");\r\n+    $stmt->execute();\r\n+    $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+    $stmt->close();\r\n+} catch (Exception $e) {\r\n+    // Fallback query if JOIN fails\r\n+    try {\r\n+        $stmt = $conn->prepare(\"\r\n+            SELECT \r\n+                id,\r\n+                student_id,\r\n+                CONCAT('Student ID: ', student_id) as student_name,\r\n+                program,\r\n+                year_level,\r\n+                status,\r\n+                date_submitted\r\n+            FROM enrollments \r\n+            ORDER BY date_submitted DESC \r\n+            LIMIT 5\r\n+        \");\r\n+        $stmt->execute();\r\n+        $recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n+        $stmt->close();\r\n+    } catch (Exception $e2) {\r\n+        $recentEnrollments = [];\r\n+    }\r\n }\r\n \r\n-// Get enrollment status info\r\n-$statusInfo = getEnrollmentStatusInfo($enrollment['status']);\r\n+// Current enrollment period\r\n+$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n \r\n-// Count uploaded documents\r\n-$stmt = $pdo->prepare(\"SELECT COUNT(*) as doc_count FROM uploaded_documents WHERE student_id = ?\");\r\n-$stmt->execute([$student_id]);\r\n-$docCount = $stmt->fetch()['doc_count'];\r\n+// Monthly enrollment trends - Fixed query\r\n+$stmt = $conn->prepare(\"\r\n+    SELECT \r\n+        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n+        COUNT(*) as count\r\n+    FROM enrollments \r\n+    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n+    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n+    ORDER BY month\r\n+\");\r\n+$stmt->execute();\r\n+$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n \r\n-// Count assigned subjects\r\n-$stmt = $pdo->prepare(\"SELECT COUNT(*) as subject_count FROM student_subjects ss JOIN subjects s ON ss.subject_id = s.id WHERE ss.student_id = ?\");\r\n-$stmt->execute([$student_id]);\r\n-$subjectCount = $stmt->fetch()['subject_count'];\r\n-\r\n-$studentName = trim($student['first_name'] . ' ' . ($student['middle_name'] ? $student['middle_name'] . ' ' : '') . $student['last_name']);\r\n-$photo = $student['photo'] ?? 'student/uploads/default-avatar.png';\r\n+// Program distribution - Fixed query\r\n+$stmt = $conn->prepare(\"\r\n+    SELECT program, COUNT(*) as count \r\n+    FROM enrollments \r\n+    WHERE status IN ('approved', 'enrolled')\r\n+    GROUP BY program \r\n+    ORDER BY count DESC\r\n+\");\r\n+$stmt->execute();\r\n+$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n-    <title>Student Dashboard - <?= htmlspecialchars($studentName) ?></title>\r\n+    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n     <style>\r\n-        :root {\r\n-            --primary-green: #2e7d32;\r\n-            --light-green: #e8f5e9;\r\n-            --accent-green: #43a047;\r\n-            --hover-green: #c8e6c9;\r\n-            --dark-green: #1b5e20;\r\n-        }\r\n-\r\n         body {\r\n-            background: linear-gradient(135deg, var(--light-green) 0%, #f1f8e9 100%);\r\n-            min-height: 100vh;\r\n-            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n+            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n+            font-family: 'Segoe UI', sans-serif;\r\n         }\r\n-\r\n         .navbar {\r\n-            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);\r\n-            box-shadow: 0 2px 10px rgba(46, 125, 50, 0.3);\r\n+            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n         }\r\n-\r\n-        .navbar-brand, .nav-link {\r\n-            color: #fff !important;\r\n-            font-weight: 600;\r\n-            letter-spacing: 0.5px;\r\n-            transition: all 0.3s ease;\r\n-        }\r\n-\r\n-        .nav-link:hover {\r\n-            color: var(--hover-green) !important;\r\n-            transform: translateY(-1px);\r\n-        }\r\n-\r\n         .school-logo {\r\n             width: 50px;\r\n             height: 50px;\r\n             object-fit: cover;\r\n             border-radius: 50%;\r\n-            margin-right: 15px;\r\n-            border: 3px solid #fff;\r\n-            transition: transform 0.3s ease;\r\n+            margin-right: 10px;\r\n+            border: 2px solid #fff;\r\n         }\r\n-\r\n-        .school-logo:hover {\r\n-            transform: scale(1.1);\r\n-        }\r\n-\r\n-        .profile-card {\r\n-            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n-            border-radius: 20px;\r\n-            box-shadow: 0 8px 25px rgba(46, 125, 50, 0.15);\r\n-            padding: 2rem;\r\n-            margin-bottom: 2rem;\r\n-            border: 1px solid rgba(46, 125, 50, 0.1);\r\n-        }\r\n-\r\n-        .profile-pic {\r\n-            width: 120px;\r\n-            height: 120px;\r\n-            object-fit: cover;\r\n-            border-radius: 50%;\r\n-            border: 4px solid var(--accent-green);\r\n-            box-shadow: 0 4px 15px rgba(67, 160, 71, 0.3);\r\n-            transition: transform 0.3s ease;\r\n-        }\r\n-\r\n-        .profile-pic:hover {\r\n-            transform: scale(1.05);\r\n-        }\r\n-\r\n         .stats-card {\r\n-            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n             border-radius: 15px;\r\n-            padding: 1.5rem;\r\n-            text-align: center;\r\n             border: none;\r\n-            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);\r\n-            transition: all 0.3s ease;\r\n-            height: 100%;\r\n+            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n+            transition: transform 0.3s ease;\r\n+            background: white;\r\n         }\r\n-\r\n         .stats-card:hover {\r\n             transform: translateY(-5px);\r\n-            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\r\n         }\r\n-\r\n         .stats-icon {\r\n-            font-size: 2.5rem;\r\n-            margin-bottom: 1rem;\r\n-            display: block;\r\n+            width: 60px;\r\n+            height: 60px;\r\n+            border-radius: 50%;\r\n+            display: flex;\r\n+            align-items: center;\r\n+            justify-content: center;\r\n+            font-size: 1.5rem;\r\n+            color: white;\r\n         }\r\n-\r\n-        .icon-enrollment { color: #4caf50; }\r\n-        .icon-subjects { color: #2196f3; }\r\n-        .icon-documents { color: #ff9800; }\r\n-        .icon-profile { color: #9c27b0; }\r\n-\r\n         .quick-action-card {\r\n-            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n-            border-radius: 15px;\r\n-            padding: 1.5rem;\r\n+            border-radius: 12px;\r\n             border: none;\r\n-            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);\r\n+            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n             transition: all 0.3s ease;\r\n-            height: 100%;\r\n         }\r\n-\r\n         .quick-action-card:hover {\r\n-            transform: translateY(-3px);\r\n-            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);\r\n-        }\r\n-\r\n-        .status-badge {\r\n-            padding: 8px 16px;\r\n-            border-radius: 25px;\r\n-            font-weight: 600;\r\n-            font-size: 0.9rem;\r\n-            display: inline-flex;\r\n-            align-items: center;\r\n-            gap: 5px;\r\n-        }\r\n-\r\n-        .status-approved { background-color: #4caf50; color: white; }\r\n-        .status-pending { background-color: #ff9800; color: white; }\r\n-        .status-rejected { background-color: #f44336; color: white; }\r\n-        .status-warning { background-color: #ff5722; color: white; }\r\n-        .status-not-enrolled { background-color: #9e9e9e; color: white; }\r\n-\r\n-        .student-id-display {\r\n-            font-family: 'Courier New', monospace;\r\n-            background: linear-gradient(135deg, var(--light-green), var(--hover-green));\r\n-            padding: 10px 15px;\r\n-            border-radius: 10px;\r\n-            border: 2px solid var(--accent-green);\r\n-            font-weight: bold;\r\n-            font-size: 1.1rem;\r\n-            color: var(--dark-green);\r\n-            display: inline-block;\r\n-            margin-top: 5px;\r\n-        }\r\n-\r\n-        .section-title {\r\n-            color: var(--primary-green);\r\n-            font-weight: 700;\r\n-            margin-bottom: 1.5rem;\r\n-            position: relative;\r\n-            padding-bottom: 10px;\r\n-        }\r\n-\r\n-        .section-title::after {\r\n-            content: '';\r\n-            position: absolute;\r\n-            bottom: 0;\r\n-            left: 0;\r\n-            width: 50px;\r\n-            height: 3px;\r\n-            background: linear-gradient(90deg, var(--accent-green), var(--primary-green));\r\n-            border-radius: 2px;\r\n-        }\r\n-\r\n-        .btn-custom {\r\n-            background: linear-gradient(135deg, var(--accent-green) 0%, var(--primary-green) 100%);\r\n-            border: none;\r\n-            color: white;\r\n-            font-weight: 600;\r\n-            padding: 10px 20px;\r\n-            border-radius: 25px;\r\n-            transition: all 0.3s ease;\r\n-            text-decoration: none;\r\n-            display: inline-block;\r\n-        }\r\n-\r\n-        .btn-custom:hover {\r\n             transform: translateY(-2px);\r\n-            box-shadow: 0 5px 15px rgba(67, 160, 71, 0.4);\r\n-            color: white;\r\n+            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n         }\r\n-\r\n-        .list-group-item {\r\n+        .period-alert {\r\n+            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n             border: none;\r\n-            border-radius: 10px !important;\r\n-            margin-bottom: 8px;\r\n-            transition: all 0.3s ease;\r\n-            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\r\n-        }\r\n-\r\n-        .list-group-item:hover {\r\n-            background: linear-gradient(135deg, var(--light-green) 0%, var(--hover-green) 100%);\r\n-            transform: translateX(5px);\r\n-            color: var(--dark-green);\r\n-        }\r\n-\r\n-        .welcome-text {\r\n-            background: linear-gradient(135deg, var(--primary-green), var(--accent-green));\r\n-            -webkit-background-clip: text;\r\n-            -webkit-text-fill-color: transparent;\r\n-            background-clip: text;\r\n-            font-weight: 700;\r\n-        }\r\n-\r\n-        .footer {\r\n-            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);\r\n+            border-radius: 10px;\r\n             color: white;\r\n-            text-align: center;\r\n-            padding: 2rem 0;\r\n-            margin-top: 3rem;\r\n         }\r\n-\r\n-        .alert-enrollment {\r\n-            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);\r\n-            border: 1px solid #ffc107;\r\n-            border-radius: 15px;\r\n-            padding: 1rem;\r\n-            margin-bottom: 1rem;\r\n+        .chart-container {\r\n+            position: relative;\r\n+            height: 300px;\r\n         }\r\n-\r\n-        @media (max-width: 768px) {\r\n-            .profile-card {\r\n-                text-align: center;\r\n-            }\r\n-            \r\n-            .stats-card {\r\n-                margin-bottom: 1rem;\r\n-            }\r\n-            \r\n-            .student-id-display {\r\n-                font-size: 1rem;\r\n-            }\r\n-        }\r\n     </style>\r\n </head>\r\n <body>\r\n     <!-- Navigation -->\r\n-    <nav class=\"navbar navbar-expand-lg sticky-top\">\r\n-        <div class=\"container\">\r\n+    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n+        <div class=\"container-fluid\">\r\n             <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n                 <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n-                <span>Student Portal</span>\r\n+                TLGC Admin Panel\r\n             </a>\r\n             <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n                 <span class=\"navbar-toggler-icon\"></span>\r\n             </button>\r\n             <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                 <ul class=\"navbar-nav ms-auto\">\r\n                     <li class=\"nav-item dropdown\">\r\n-                        <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                            <i class=\"bi bi-person-circle\"></i> <?= htmlspecialchars($student['first_name']) ?>\r\n+                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+                            <!-- <img src=\"<?= htmlspecialchars($admin['image'] ?? '../picture/tlgc_pic.jpg') ?>\" \r\n+                                alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\"> -->\r\n+                            <?= htmlspecialchars($admin['name']) ?>\r\n                         </a>\r\n                         <ul class=\"dropdown-menu\">\r\n-                            <li><a class=\"dropdown-item\" href=\"history&Profile/Edit Profile.php\"><i class=\"bi bi-person-gear\"></i> Edit Profile</a></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"history&Profile/Change Password.php\"><i class=\"bi bi-key\"></i> Change Password</a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n+                                <i class=\"bi bi-person me-2\"></i>Profile\r\n+                            </a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n+                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n+                            </a></li>\r\n                             <li><hr class=\"dropdown-divider\"></li>\r\n-                            <li><a class=\"dropdown-item\" href=\"../logregfor/logout.php\"><i class=\"bi bi-box-arrow-right\"></i> Logout</a></li>\r\n+                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n+                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n+                            </a></li>\r\n                         </ul>\r\n                     </li>\r\n                 </ul>\r\n             </div>\r\n         </div>\r\n     </nav>\r\n \r\n-    <div class=\"container my-4\">\r\n-        <!-- Enrollment Action Alert -->\r\n-        <?php if (needsEnrollmentAction($enrollment)): ?>\r\n-        <div class=\"alert-enrollment\">\r\n-            <div class=\"d-flex align-items-center\">\r\n-                <i class=\"bi bi-exclamation-triangle-fill text-warning me-3\" style=\"font-size: 1.5rem;\"></i>\r\n-                <div>\r\n-                    <h6 class=\"mb-1\">Action Required</h6>\r\n-                    <p class=\"mb-0\">\r\n-                        <?php if ($enrollment['status'] === 'not_enrolled'): ?>\r\n-                            You haven't enrolled yet. Please complete your enrollment to access all features.\r\n-                        <?php elseif ($enrollment['status'] === 'pending'): ?>\r\n-                            Your enrollment is pending review. Please wait for admin approval.\r\n-                        <?php elseif ($enrollment['status'] === 'missing_documents'): ?>\r\n-                            Your enrollment requires additional documents. Please upload the missing requirements.\r\n-                        <?php endif; ?>\r\n-                    </p>\r\n+    <div class=\"container-fluid py-4\">\r\n+        <!-- Welcome Section -->\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"d-flex justify-content-between align-items-center\">\r\n+                    <div>\r\n+                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n+                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n+                    </div>\r\n+                    <div class=\"text-end\">\r\n+                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n+                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n-        <?php endif; ?>\r\n \r\n-        <!-- Welcome Section -->\r\n-        <div class=\"profile-card\">\r\n-            <div class=\"row align-items-center\">\r\n-                <div class=\"col-md-3 text-center\">\r\n-                    <img src=\"<?= htmlspecialchars('../' . $photo) ?>\" alt=\"Profile Picture\" class=\"profile-pic\" onerror=\"this.src='../student/uploads/default-avatar.png'\">\r\n-                </div>\r\n-                <div class=\"col-md-9\">\r\n-                    <h2 class=\"welcome-text mb-2\">Welcome back, <?= htmlspecialchars($student['first_name']) ?>!</h2>\r\n-                    <h4 class=\"text-dark mb-3\"><?= htmlspecialchars($studentName) ?></h4>\r\n-                    <div class=\"row\">\r\n-                        <div class=\"col-md-6\">\r\n-                            <p class=\"mb-2\"><strong>Student ID:</strong></p>\r\n-                            <div class=\"student-id-display\">\r\n-                                <?= htmlspecialchars($formattedStudentId) ?>\r\n-                            </div>\r\n-                            <?php if ($formattedStudentId !== $student_id): ?>\r\n-                                <small class=\"text-muted d-block mt-1\">System ID: <?= htmlspecialchars($student_id) ?></small>\r\n-                            <?php endif; ?>\r\n-                        </div>\r\n-                        <div class=\"col-md-6\">\r\n-                            <p class=\"mb-1\"><strong>Email:</strong> <?= htmlspecialchars($student['email']) ?></p>\r\n-                            <p class=\"mb-1\"><strong>Program:</strong> <?= htmlspecialchars($enrollment['program']) ?></p>\r\n-                            <p class=\"mb-1\"><strong>Status:</strong> \r\n-                                <span class=\"status-badge <?= $statusInfo['class'] ?>\">\r\n-                                    <i class=\"bi <?= $statusInfo['icon'] ?>\"></i>\r\n-                                    <?= $statusInfo['text'] ?>\r\n-                                </span>\r\n+        <!-- Current Period Alert -->\r\n+        <?php if ($currentPeriod): ?>\r\n+        <div class=\"row mb-4\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"alert period-alert\">\r\n+                    <div class=\"d-flex align-items-center\">\r\n+                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n+                        <div>\r\n+                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n+                            <p class=\"mb-0\">\r\n+                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n+                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n                             </p>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n+        <?php endif; ?>\r\n \r\n         <!-- Statistics Cards -->\r\n         <div class=\"row mb-4\">\r\n-            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n-                <div class=\"stats-card\">\r\n-                    <i class=\"bi bi-journal-check stats-icon icon-enrollment\"></i>\r\n-                    <h5>Enrollment</h5>\r\n-                    <p class=\"text-muted mb-0\"><?= $statusInfo['text'] ?></p>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-warning me-3\">\r\n+                            <i class=\"bi bi-clock-history\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n-                <div class=\"stats-card\">\r\n-                    <i class=\"bi bi-book stats-icon icon-subjects\"></i>\r\n-                    <h5>Subjects</h5>\r\n-                    <p class=\"text-muted mb-0\"><?= $subjectCount ?> Assigned</p>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-success me-3\">\r\n+                            <i class=\"bi bi-check-circle\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n-                <div class=\"stats-card\">\r\n-                    <i class=\"bi bi-file-earmark-text stats-icon icon-documents\"></i>\r\n-                    <h5>Documents</h5>\r\n-                    <p class=\"text-muted mb-0\"><?= $docCount ?> Uploaded</p>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-primary me-3\">\r\n+                            <i class=\"bi bi-people\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Total Students</p>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-md-3 col-sm-6 mb-3\">\r\n-                <div class=\"stats-card\">\r\n-                    <i class=\"bi bi-person-badge stats-icon icon-profile\"></i>\r\n-                    <h5>Profile</h5>\r\n-                    <p class=\"text-muted mb-0\">Complete</p>\r\n+            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n+                <div class=\"card stats-card h-100\">\r\n+                    <div class=\"card-body d-flex align-items-center\">\r\n+                        <div class=\"stats-icon bg-info me-3\">\r\n+                            <i class=\"bi bi-book\"></i>\r\n+                        </div>\r\n+                        <div>\r\n+                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n+                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n \r\n         <!-- Quick Actions -->\r\n-        <h3 class=\"section-title\">Quick Actions</h3>\r\n         <div class=\"row mb-4\">\r\n-            <div class=\"col-md-4 mb-3\">\r\n-                <div class=\"quick-action-card\">\r\n-                    <h5 class=\"text-primary\"><i class=\"bi bi-journal-plus\"></i> Enrollment</h5>\r\n-                    <p class=\"text-muted\">Manage your enrollment status and view details</p>\r\n-                    <a href=\"MyEnrollAssignUpload/enrollment-status.php\" class=\"btn-custom\">View Status</a>\r\n-                </div>\r\n+            <div class=\"col-12\">\r\n+                <h4 class=\"mb-3\">Quick Actions</h4>\r\n             </div>\r\n-            <div class=\"col-md-4 mb-3\">\r\n-                <div class=\"quick-action-card\">\r\n-                    <h5 class=\"text-success\"><i class=\"bi bi-books\"></i> My Subjects</h5>\r\n-                    <p class=\"text-muted\">View your assigned subjects and schedule</p>\r\n-                    <a href=\"MyEnrollAssignUpload/mysubject.php\" class=\"btn-custom\">View Subjects</a>\r\n-                </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n             </div>\r\n-            <div class=\"col-md-4 mb-3\">\r\n-                <div class=\"quick-action-card\">\r\n-                    <h5 class=\"text-warning\"><i class=\"bi bi-cloud-upload\"></i> Documents</h5>\r\n-                    <p class=\"text-muted\">Upload and manage your documents</p>\r\n-                    <a href=\"Documents/UploadRequirements.php\" class=\"btn-custom\">Upload Files</a>\r\n-                </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n             </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n+            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n+                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n+                    <div class=\"card quick-action-card h-100 text-center\">\r\n+                        <div class=\"card-body\">\r\n+                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n+                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n+                        </div>\r\n+                    </div>\r\n+                </a>\r\n+            </div>\r\n         </div>\r\n \r\n-        <!-- Navigation Menu -->\r\n+        <!-- Charts and Recent Activity -->\r\n         <div class=\"row\">\r\n-            <div class=\"col-md-6\">\r\n-                <h4 class=\"section-title\">Enrollment Services</h4>\r\n-                <div class=\"list-group\">\r\n-                    <a href=\"Enrollment/fill-up-enrollment-form.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-pencil-square me-2\"></i>Fill-up Enrollment Form\r\n-                    </a>\r\n-                    <a href=\"MyEnrollAssignUpload/enrollment-status.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-eye me-2\"></i>View Enrollment Status\r\n-                    </a>\r\n-                    <a href=\"MyEnrollAssignUpload/assigned-subjects.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-book me-2\"></i>View Assigned Subjects\r\n-                    </a>\r\n-                    <a href=\"Enrollment/print-enrollment-slip.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-printer me-2\"></i>Print Enrollment Slip\r\n-                    </a>\r\n+            <!-- Enrollment Trends Chart -->\r\n+            <div class=\"col-lg-8 mb-4\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header\">\r\n+                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"chart-container\">\r\n+                            <canvas id=\"enrollmentChart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n-            <div class=\"col-md-6\">\r\n-                <h4 class=\"section-title\">Student Services</h4>\r\n-                <div class=\"list-group\">\r\n-                    <a href=\"Documents/UploadRequirements.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-upload me-2\"></i>Upload Requirements\r\n-                    </a>\r\n-                    <a href=\"Documents/View Uploaded Files.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-files me-2\"></i>View Uploaded Files\r\n-                    </a>\r\n-                    <a href=\"history&Profile/Enrollment History.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-clock-history me-2\"></i>Enrollment History\r\n-                    </a>\r\n-                    <a href=\"history&Profile/Edit Profile.php\" class=\"list-group-item list-group-item-action\">\r\n-                        <i class=\"bi bi-person-gear me-2\"></i>Edit Profile\r\n-                    </a>\r\n+\r\n+            <!-- Program Distribution -->\r\n+            <div class=\"col-lg-4 mb-4\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header\">\r\n+                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"chart-container\">\r\n+                            <canvas id=\"programChart\"></canvas>\r\n+                        </div>\r\n+                    </div>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n \r\n-    <!-- Footer -->\r\n-    <footer class=\"footer\">\r\n-        <div class=\"container\">\r\n-            <p class=\"mb-0\">&copy; <?= date('Y') ?> Top Link Global College Inc. All rights reserved.</p>\r\n-            <p class=\"mb-0\">Enrollment Management System</p>\r\n+        <!-- Recent Enrollments -->\r\n+        <div class=\"row\">\r\n+            <div class=\"col-12\">\r\n+                <div class=\"card\">\r\n+                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n+                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n+                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n+                    </div>\r\n+                    <div class=\"card-body p-0\">\r\n+                        <?php if (empty($recentEnrollments)): ?>\r\n+                            <div class=\"text-center py-4\">\r\n+                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n+                            </div>\r\n+                        <?php else: ?>\r\n+                            <div class=\"table-responsive\">\r\n+                                <table class=\"table table-hover mb-0\">\r\n+                                    <thead class=\"table-light\">\r\n+                                        <tr>\r\n+                                            <th>Student</th>\r\n+                                            <th>Program</th>\r\n+                                            <th>Year Level</th>\r\n+                                            <th>Status</th>\r\n+                                            <th>Date Submitted</th>\r\n+                                        </tr>\r\n+                                    </thead>\r\n+                                    <tbody>\r\n+                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n+                                        <tr>\r\n+                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n+                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n+                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n+                                            <td>\r\n+                                                <?php\r\n+                                                $statusClass = [\r\n+                                                    'pending' => 'warning',\r\n+                                                    'approved' => 'success',\r\n+                                                    'rejected' => 'danger',\r\n+                                                    'missing_documents' => 'info'\r\n+                                                ];\r\n+                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n+                                                ?>\r\n+                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n+                                            </td>\r\n+                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n+                                        </tr>\r\n+                                        <?php endforeach; ?>\r\n+                                    </tbody>\r\n+                                </table>\r\n+                            </div>\r\n+                        <?php endif; ?>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n         </div>\r\n-    </footer>\r\n+    </div>\r\n \r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n     <script>\r\n-        // Add some interactive effects\r\n-        document.addEventListener('DOMContentLoaded', function() {\r\n-            // Animate cards on scroll\r\n-            const cards = document.querySelectorAll('.stats-card, .quick-action-card');\r\n-            \r\n-            const observer = new IntersectionObserver((entries) => {\r\n-                entries.forEach(entry => {\r\n-                    if (entry.isIntersecting) {\r\n-                        entry.target.style.opacity = '1';\r\n-                        entry.target.style.transform = 'translateY(0)';\r\n+        // Enrollment Trends Chart\r\n+        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n+        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n+        \r\n+        new Chart(enrollmentCtx, {\r\n+            type: 'line',\r\n+            data: {\r\n+                labels: enrollmentData.map(item => {\r\n+                    const date = new Date(item.month + '-01');\r\n+                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n+                }),\r\n+                datasets: [{\r\n+                    label: 'Enrollments',\r\n+                    data: enrollmentData.map(item => item.count),\r\n+                    borderColor: '#2e7d32',\r\n+                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n+                    tension: 0.4,\r\n+                    fill: true\r\n+                }]\r\n+            },\r\n+            options: {\r\n+                responsive: true,\r\n+                maintainAspectRatio: false,\r\n+                plugins: {\r\n+                    legend: {\r\n+                        display: false\r\n                     }\r\n-                });\r\n-            });\r\n+                },\r\n+                scales: {\r\n+                    y: {\r\n+                        beginAtZero: true,\r\n+                        ticks: {\r\n+                            stepSize: 1\r\n+                        }\r\n+                    }\r\n+                }\r\n+            }\r\n+        });\r\n \r\n-            cards.forEach(card => {\r\n-                card.style.opacity = '0';\r\n-                card.style.transform = 'translateY(20px)';\r\n-                card.style.transition = 'all 0.6s ease';\r\n-                observer.observe(card);\r\n-            });\r\n+        // Program Distribution Chart\r\n+        const programCtx = document.getElementById('programChart').getContext('2d');\r\n+        const programData = <?= json_encode($programDistribution) ?>;\r\n+        \r\n+        new Chart(programCtx, {\r\n+            type: 'doughnut',\r\n+            data: {\r\n+                labels: programData.map(item => item.program),\r\n+                datasets: [{\r\n+                    data: programData.map(item => item.count),\r\n+                    backgroundColor: [\r\n+                        '#2e7d32',\r\n+                        '#388e3c',\r\n+                        '#4caf50',\r\n+                        '#66bb6a',\r\n+                        '#81c784',\r\n+                        '#a5d6a7'\r\n+                    ]\r\n+                }]\r\n+            },\r\n+            options: {\r\n+                responsive: true,\r\n+                maintainAspectRatio: false,\r\n+                plugins: {\r\n+                    legend: {\r\n+                        position: 'bottom'\r\n+                    }\r\n+                }\r\n+            }\r\n         });\r\n     </script>\r\n </body>\r\n </html>\r\n"
                }
            ],
            "date": 1749398707087,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\ninclude '../db.php';\r\n\r\n// Check admin authentication\r\nif (!isset($_SESSION['admin_id'])) {\r\n    header(\"Location: ../logregfor/admin-login.php\");\r\n    exit();\r\n}\r\n\r\n// Get admin info\r\n$stmt = $conn->prepare(\"SELECT name, username, role, image FROM admin_settings WHERE id = ?\");\r\n$stmt->bind_param(\"i\", $_SESSION['admin_id']);\r\n$stmt->execute();\r\n$admin = $stmt->get_result()->fetch_assoc();\r\n\r\n// Get dashboard statistics\r\n$stats = [];\r\n\r\n// Enrollment statistics\r\n$stmt = $conn->prepare(\"SELECT status, COUNT(*) as count FROM enrollments GROUP BY status\");\r\n$stmt->execute();\r\n$result = $stmt->get_result();\r\nwhile ($row = $result->fetch_assoc()) {\r\n    $stats['enrollments'][$row['status']] = $row['count'];\r\n}\r\n\r\n// Student statistics\r\n$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM students WHERE status = 'active'\");\r\n$stmt->execute();\r\n$stats['total_students'] = $stmt->get_result()->fetch_assoc()['total'];\r\n\r\n// Subject statistics\r\n$stmt = $conn->prepare(\"SELECT COUNT(*) as total FROM subjects WHERE status = 'Active'\");\r\n$stmt->execute();\r\n$stats['total_subjects'] = $stmt->get_result()->fetch_assoc()['total'];\r\n\r\n// Recent enrollments\r\n$stmt = $conn->prepare(\"\r\n    SELECT e.*, CONCAT(e.first_name, ' ', e.last_name) as student_name \r\n    FROM enrollments e \r\n    ORDER BY e.date_submitted DESC \r\n    LIMIT 5\r\n\");\r\n$stmt->execute();\r\n$recentEnrollments = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n\r\n// Current enrollment period\r\n$stmt = $conn->prepare(\"SELECT * FROM enrollment_periods WHERE status = 'active' ORDER BY id DESC LIMIT 1\");\r\n$stmt->execute();\r\n$result = $stmt->get_result();\r\n$currentPeriod = $result->num_rows > 0 ? $result->fetch_assoc() : null;\r\n\r\n// Monthly enrollment trends\r\n$stmt = $conn->prepare(\"\r\n    SELECT \r\n        DATE_FORMAT(date_submitted, '%Y-%m') as month,\r\n        COUNT(*) as count\r\n    FROM enrollments \r\n    WHERE date_submitted >= DATE_SUB(NOW(), INTERVAL 6 MONTH)\r\n    GROUP BY DATE_FORMAT(date_submitted, '%Y-%m')\r\n    ORDER BY month\r\n\");\r\n$stmt->execute();\r\n$monthlyTrends = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n\r\n// Program distribution\r\n$stmt = $conn->prepare(\"\r\n    SELECT program, COUNT(*) as count \r\n    FROM enrollments \r\n    WHERE status IN ('approved', 'enrolled')\r\n    GROUP BY program \r\n    ORDER BY count DESC\r\n\");\r\n$stmt->execute();\r\n$programDistribution = $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\r\n?>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n    <title>Admin Dashboard - TLGC Enrollment System</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n    <style>\r\n        body {\r\n            background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);\r\n            font-family: 'Segoe UI', sans-serif;\r\n        }\r\n        .navbar {\r\n            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .school-logo {\r\n            width: 50px;\r\n            height: 50px;\r\n            object-fit: cover;\r\n            border-radius: 50%;\r\n            margin-right: 10px;\r\n            border: 2px solid #fff;\r\n        }\r\n        .stats-card {\r\n            border-radius: 15px;\r\n            border: none;\r\n            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n            transition: transform 0.3s ease;\r\n            background: white;\r\n        }\r\n        .stats-card:hover {\r\n            transform: translateY(-5px);\r\n        }\r\n        .stats-icon {\r\n            width: 60px;\r\n            height: 60px;\r\n            border-radius: 50%;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            font-size: 1.5rem;\r\n            color: white;\r\n        }\r\n        .quick-action-card {\r\n            border-radius: 12px;\r\n            border: none;\r\n            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n            transition: all 0.3s ease;\r\n        }\r\n        .quick-action-card:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .period-alert {\r\n            background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);\r\n            border: none;\r\n            border-radius: 10px;\r\n            color: white;\r\n        }\r\n        .chart-container {\r\n            position: relative;\r\n            height: 300px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <!-- Navigation -->\r\n    <nav class=\"navbar navbar-expand-lg navbar-dark py-3\">\r\n        <div class=\"container-fluid\">\r\n            <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n                TLGC Admin Panel\r\n            </a>\r\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\r\n                <span class=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                <ul class=\"navbar-nav ms-auto\">\r\n                    <li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                            <img src=\"<?= htmlspecialchars($admin['image'] ?? '../img/default_admin.png') ?>\" \r\n                                 alt=\"Admin\" class=\"rounded-circle me-2\" width=\"32\" height=\"32\">\r\n                            <?= htmlspecialchars($admin['name']) ?>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/profile.php\">\r\n                                <i class=\"bi bi-person me-2\"></i>Profile\r\n                            </a></li>\r\n                            <li><a class=\"dropdown-item\" href=\"helpdeskAdminProfileSettings/settings.php\">\r\n                                <i class=\"bi bi-gear me-2\"></i>Settings\r\n                            </a></li>\r\n                            <li><hr class=\"dropdown-divider\"></li>\r\n                            <li><a class=\"dropdown-item\" href=\"../logregfor/admin-logout.php\">\r\n                                <i class=\"bi bi-box-arrow-right me-2\"></i>Logout\r\n                            </a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n\r\n    <div class=\"container-fluid py-4\">\r\n        <!-- Welcome Section -->\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <div>\r\n                        <h2 class=\"mb-1\">Welcome back, <?= htmlspecialchars($admin['name']) ?>!</h2>\r\n                        <p class=\"text-muted mb-0\">Here's what's happening with your enrollment system today.</p>\r\n                    </div>\r\n                    <div class=\"text-end\">\r\n                        <div class=\"small text-muted\"><?= date('l, F j, Y') ?></div>\r\n                        <div class=\"small text-muted\"><?= date('g:i A') ?></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Current Period Alert -->\r\n        <?php if ($currentPeriod): ?>\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <div class=\"alert period-alert\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <i class=\"bi bi-calendar-check me-3\" style=\"font-size: 1.5rem;\"></i>\r\n                        <div>\r\n                            <h6 class=\"mb-1\">Active Enrollment Period</h6>\r\n                            <p class=\"mb-0\">\r\n                                <?= htmlspecialchars($currentPeriod['semester']) ?> - <?= htmlspecialchars($currentPeriod['school_year']) ?>\r\n                                (<?= date('M d', strtotime($currentPeriod['start_date'])) ?> - <?= date('M d, Y', strtotime($currentPeriod['end_date'])) ?>)\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <?php endif; ?>\r\n\r\n        <!-- Statistics Cards -->\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-warning me-3\">\r\n                            <i class=\"bi bi-clock-history\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['enrollments']['pending'] ?? 0 ?></h3>\r\n                            <p class=\"text-muted mb-0\">Pending Enrollments</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-success me-3\">\r\n                            <i class=\"bi bi-check-circle\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['enrollments']['approved'] ?? 0 ?></h3>\r\n                            <p class=\"text-muted mb-0\">Approved Enrollments</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-primary me-3\">\r\n                            <i class=\"bi bi-people\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['total_students'] ?></h3>\r\n                            <p class=\"text-muted mb-0\">Total Students</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-lg-3 col-md-6 mb-3\">\r\n                <div class=\"card stats-card h-100\">\r\n                    <div class=\"card-body d-flex align-items-center\">\r\n                        <div class=\"stats-icon bg-info me-3\">\r\n                            <i class=\"bi bi-book\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 class=\"mb-1\"><?= $stats['total_subjects'] ?></h3>\r\n                            <p class=\"text-muted mb-0\">Active Subjects</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Quick Actions -->\r\n        <div class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <h4 class=\"mb-3\">Quick Actions</h4>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-list-check text-warning\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Pending Enrollments</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Academic_Management/manage-subjects.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-book text-primary\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Manage Subjects</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Academic_Management/assign-sections-subjects.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-person-plus text-success\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Assign Students</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Student_Management/view-all-students.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-people text-info\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">View Students</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Settings/set-enrollment-period.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-calendar-event text-danger\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Set Period</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-4 col-sm-6 mb-3\">\r\n                <a href=\"Reports/download-student-lists.php\" class=\"text-decoration-none\">\r\n                    <div class=\"card quick-action-card h-100 text-center\">\r\n                        <div class=\"card-body\">\r\n                            <i class=\"bi bi-download text-secondary\" style=\"font-size: 2rem;\"></i>\r\n                            <h6 class=\"mt-2 mb-0\">Reports</h6>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Charts and Recent Activity -->\r\n        <div class=\"row\">\r\n            <!-- Enrollment Trends Chart -->\r\n            <div class=\"col-lg-8 mb-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h5 class=\"mb-0\">Enrollment Trends (Last 6 Months)</h5>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"chart-container\">\r\n                            <canvas id=\"enrollmentChart\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Program Distribution -->\r\n            <div class=\"col-lg-4 mb-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h5 class=\"mb-0\">Program Distribution</h5>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"chart-container\">\r\n                            <canvas id=\"programChart\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Recent Enrollments -->\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n                        <h5 class=\"mb-0\">Recent Enrollments</h5>\r\n                        <a href=\"Enrollment_Management/pending-enrollments.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\r\n                    </div>\r\n                    <div class=\"card-body p-0\">\r\n                        <?php if (empty($recentEnrollments)): ?>\r\n                            <div class=\"text-center py-4\">\r\n                                <p class=\"text-muted\">No recent enrollments found.</p>\r\n                            </div>\r\n                        <?php else: ?>\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table table-hover mb-0\">\r\n                                    <thead class=\"table-light\">\r\n                                        <tr>\r\n                                            <th>Student</th>\r\n                                            <th>Program</th>\r\n                                            <th>Year Level</th>\r\n                                            <th>Status</th>\r\n                                            <th>Date Submitted</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <?php foreach ($recentEnrollments as $enrollment): ?>\r\n                                        <tr>\r\n                                            <td><?= htmlspecialchars($enrollment['student_name']) ?></td>\r\n                                            <td><span class=\"badge bg-primary\"><?= htmlspecialchars($enrollment['program']) ?></span></td>\r\n                                            <td><?= htmlspecialchars($enrollment['year_level']) ?></td>\r\n                                            <td>\r\n                                                <?php\r\n                                                $statusClass = [\r\n                                                    'pending' => 'warning',\r\n                                                    'approved' => 'success',\r\n                                                    'rejected' => 'danger',\r\n                                                    'missing_documents' => 'info'\r\n                                                ];\r\n                                                $class = $statusClass[$enrollment['status']] ?? 'secondary';\r\n                                                ?>\r\n                                                <span class=\"badge bg-<?= $class ?>\"><?= ucfirst(str_replace('_', ' ', $enrollment['status'])) ?></span>\r\n                                            </td>\r\n                                            <td><?= date('M d, Y g:i A', strtotime($enrollment['date_submitted'])) ?></td>\r\n                                        </tr>\r\n                                        <?php endforeach; ?>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        <?php endif; ?>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        // Enrollment Trends Chart\r\n        const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');\r\n        const enrollmentData = <?= json_encode($monthlyTrends) ?>;\r\n        \r\n        new Chart(enrollmentCtx, {\r\n            type: 'line',\r\n            data: {\r\n                labels: enrollmentData.map(item => {\r\n                    const date = new Date(item.month + '-01');\r\n                    return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\r\n                }),\r\n                datasets: [{\r\n                    label: 'Enrollments',\r\n                    data: enrollmentData.map(item => item.count),\r\n                    borderColor: '#2e7d32',\r\n                    backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n                    tension: 0.4,\r\n                    fill: true\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: {\r\n                        display: false\r\n                    }\r\n                },\r\n                scales: {\r\n                    y: {\r\n                        beginAtZero: true,\r\n                        ticks: {\r\n                            stepSize: 1\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Program Distribution Chart\r\n        const programCtx = document.getElementById('programChart').getContext('2d');\r\n        const programData = <?= json_encode($programDistribution) ?>;\r\n        \r\n        new Chart(programCtx, {\r\n            type: 'doughnut',\r\n            data: {\r\n                labels: programData.map(item => item.program),\r\n                datasets: [{\r\n                    data: programData.map(item => item.count),\r\n                    backgroundColor: [\r\n                        '#2e7d32',\r\n                        '#388e3c',\r\n                        '#4caf50',\r\n                        '#66bb6a',\r\n                        '#81c784',\r\n                        '#a5d6a7'\r\n                    ]\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: {\r\n                        position: 'bottom'\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}