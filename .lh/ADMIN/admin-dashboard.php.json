{
    "sourceFile": "ADMIN/admin-dashboard.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 59,
            "patches": [
                {
                    "date": 1748595508944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748597059360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,15 +35,8 @@\n     }\r\n     $result->free();\r\n }\r\n \r\n-// Total Staff\r\n-if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n-    $row = $result->fetch_assoc();\r\n-    $total_staff = $row['total'] ?? 0;\r\n-    $result->free();\r\n-}\r\n-\r\n // Enrolled this semester (status='Enrolled')\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n@@ -112,32 +105,33 @@\n \r\n <div class=\"container my-5\">\r\n \r\n     <div class=\"row g-4 mb-5\">\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-success text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Students</h5>\r\n-                    <p class=\"display-6\"><?= $total_students ?></p>\r\n-                </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-white bg-success text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Total Students</h5>\r\n+                <p class=\"display-6\"><?= $total_students ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-primary text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Staff</h5>\r\n-                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n-                </div>\r\n+    </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-dark bg-warning text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Enrolled This Semester</h5>\r\n+                <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-dark bg-warning text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Enrolled This Semester</h5>\r\n-                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n-                </div>\r\n+    </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-white bg-info text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Programs/Courses</h5>\r\n+                <p class=\"display-6\"><?= $programs_count ?></p>\r\n             </div>\r\n         </div>\r\n+    </div>\r\n+</div>\r\n         <div class=\"col-md-3 col-sm-6\">\r\n             <div class=\"card text-white bg-info text-center\">\r\n                 <div class=\"card-body\">\r\n                     <h5>Programs/Courses</h5>\r\n"
                },
                {
                    "date": 1748597068220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,36 +102,36 @@\n         </div>\r\n     </div>\r\n </nav>\r\n \r\n-<div class=\"container my-5\">\r\n+        <div class=\"container my-5\">\r\n \r\n-    <div class=\"row g-4 mb-5\">\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n-        <div class=\"card text-white bg-success text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Total Students</h5>\r\n-                <p class=\"display-6\"><?= $total_students ?></p>\r\n+        <div class=\"row g-4 mb-5\">\r\n+        <div class=\"col-md-4 col-sm-6\">\r\n+            <div class=\"card text-white bg-success text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Total Students</h5>\r\n+                    <p class=\"display-6\"><?= $total_students ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n-        <div class=\"card text-dark bg-warning text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Enrolled This Semester</h5>\r\n-                <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+        <div class=\"col-md-4 col-sm-6\">\r\n+            <div class=\"card text-dark bg-warning text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Enrolled This Semester</h5>\r\n+                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n-        <div class=\"card text-white bg-info text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Programs/Courses</h5>\r\n-                <p class=\"display-6\"><?= $programs_count ?></p>\r\n+        <div class=\"col-md-4 col-sm-6\">\r\n+            <div class=\"card text-white bg-info text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Programs/Courses</h5>\r\n+                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n-</div>\r\n         <div class=\"col-md-3 col-sm-6\">\r\n             <div class=\"card text-white bg-info text-center\">\r\n                 <div class=\"card-body\">\r\n                     <h5>Programs/Courses</h5>\r\n"
                },
                {
                    "date": 1748597495690,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,16 +3,16 @@\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../logregfor/login.php\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/login.php\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n \r\n include '../db.php';\r\n"
                },
                {
                    "date": 1748597745368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,8 +14,14 @@\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n \r\n+// DB connection\r\n+$host = 'localhost';\r\n+$dbname = 'enrollment_system';\r\n+$username = 'root';\r\n+$password = '';\r\n+\r\n include '../db.php';\r\n \r\n // Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n"
                },
                {
                    "date": 1748597984525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n+    header(\"Location: ../admin-dashboard.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n"
                },
                {
                    "date": 1748598027514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../admin-dashboard.php\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n"
                },
                {
                    "date": 1748598057022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n+    header(\"Location: ../logregfor/login.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n@@ -14,14 +14,8 @@\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n \r\n-// DB connection\r\n-$host = 'localhost';\r\n-$dbname = 'enrollment_system';\r\n-$username = 'root';\r\n-$password = '';\r\n-\r\n include '../db.php';\r\n \r\n // Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n@@ -108,9 +102,9 @@\n         </div>\r\n     </div>\r\n </nav>\r\n \r\n-        <div class=\"container my-5\">\r\n+    <div class=\"container my-5\">\r\n \r\n         <div class=\"row g-4 mb-5\">\r\n         <div class=\"col-md-4 col-sm-6\">\r\n             <div class=\"card text-white bg-success text-center\">\r\n"
                },
                {
                    "date": 1748598246066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,11 +9,12 @@\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n+session_start();\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit;\r\n+    exit();\r\n }\r\n \r\n include '../db.php';\r\n \r\n"
                },
                {
                    "date": 1748598450802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n \r\n // CHECK IF LOGGED IN\r\n session_start();\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n+    header(\"Location: ../logregfor/admin-dashboard.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n"
                },
                {
                    "date": 1748598474707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n \r\n // CHECK IF LOGGED IN\r\n session_start();\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/admin-dashboard.php\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n"
                },
                {
                    "date": 1748599650942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,9 @@\n                     <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n                         <li><hr class=\"dropdown-divider\"></li>\r\n-                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/logout.php\">Logout</a></li>\r\n+                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/admin-logout.php\">Logout</a></li>\r\n                     </ul>\r\n                 </li>\r\n             </ul>\r\n         </div>\r\n"
                },
                {
                    "date": 1748599854724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n <?php\r\n session_start();\r\n+\r\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../logregfor/login.php\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n-session_start();\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit();\r\n }\r\n"
                },
                {
                    "date": 1748599937531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,11 @@\n     session_destroy();\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n-$_SESSION['LAST_ACTIVITY'] = time();\r\n+$_SESSION['admin_logged_in'] = true;\r\n+$_SESSION['admin_username'] = $admin_username; // e.g., from database\r\n+$_SESSION['LAST_ACTIVITY'] = time()\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n"
                },
                {
                    "date": 1748599958108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,9 @@\n     session_destroy();\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n-$_SESSION['admin_logged_in'] = true;\r\n-$_SESSION['admin_username'] = $admin_username; // e.g., from database\r\n-$_SESSION['LAST_ACTIVITY'] = time()\r\n+$_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n"
                },
                {
                    "date": 1748600047134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,13 @@\n <?php\r\n session_start();\r\n \r\n+session_start();\r\n+$_SESSION['admin_logged_in'] = true;\r\n+$_SESSION['admin_username'] = $username; // Or kung ano man yung admin username mo\r\n+header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n+exit();\r\n+\r\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n"
                },
                {
                    "date": 1748600054550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n <?php\r\n session_start();\r\n \r\n-session_start();\r\n $_SESSION['admin_logged_in'] = true;\r\n $_SESSION['admin_username'] = $username; // Or kung ano man yung admin username mo\r\n header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n exit();\r\n"
                },
                {
                    "date": 1748600089281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,18 @@\n <?php\r\n session_start();\r\n \r\n-$_SESSION['admin_logged_in'] = true;\r\n-$_SESSION['admin_username'] = $username; // Or kung ano man yung admin username mo\r\n-header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n-exit();\r\n-\r\n+// Session timeout check (15 mins = 900 seconds)\r\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n+    header(\"Location: ../logregfor/login.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n-// CHECK IF LOGGED IN\r\n+// Check if admin is logged in\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n     header(\"Location: ../logregfor/admin-login.php\");\r\n     exit();\r\n }\r\n"
                },
                {
                    "date": 1748600101453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n <?php\r\n session_start();\r\n-\r\n+echo '<pre>';\r\n+print_r($_SESSION);\r\n+echo '</pre>';\r\n // Session timeout check (15 mins = 900 seconds)\r\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n"
                },
                {
                    "date": 1748600199081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,6 @@\n <?php\r\n session_start();\r\n-echo '<pre>';\r\n-print_r($_SESSION);\r\n-echo '</pre>';\r\n-// Session timeout check (15 mins = 900 seconds)\r\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n@@ -12,12 +8,12 @@\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n-// Check if admin is logged in\r\n+// CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit();\r\n+    header(\"Location: ../logregfor/login.php\");\r\n+    exit;\r\n }\r\n \r\n include '../db.php';\r\n \r\n@@ -30,17 +26,25 @@\n $enrolled_semester = 0;\r\n $programs_count = 0;\r\n $course_data = [];\r\n \r\n-// Total Students (counted during course grouping)\r\n+// Total Students\r\n if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $course_data[] = $row;\r\n-        $total_students += $row['total']; // total students from grouped data\r\n     }\r\n     $result->free();\r\n+\r\n+    // ❌ Session timeout block is wrongfully here\r\n }\r\n \r\n+// Total Staff\r\n+if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n+    $row = $result->fetch_assoc();\r\n+    $total_staff = $row['total'] ?? 0;\r\n+    $result->free();\r\n+}\r\n+\r\n // Enrolled this semester (status='Enrolled')\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n@@ -52,8 +56,16 @@\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n+\r\n+// Chart data: number of students per course\r\n+if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n+    while ($row = $result->fetch_assoc()) {\r\n+        $course_data[] = $row;\r\n+    }\r\n+    $result->free();\r\n+} // ← DITO LAGAY ANG KULANG MONG BRACKET\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n@@ -98,44 +110,43 @@\n                     <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n                         <li><hr class=\"dropdown-divider\"></li>\r\n-                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/admin-logout.php\">Logout</a></li>\r\n+                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/logout.php\">Logout</a></li>\r\n                     </ul>\r\n                 </li>\r\n             </ul>\r\n         </div>\r\n     </div>\r\n </nav>\r\n \r\n-    <div class=\"container my-5\">\r\n+<div class=\"container my-5\">\r\n \r\n-        <div class=\"row g-4 mb-5\">\r\n-        <div class=\"col-md-4 col-sm-6\">\r\n+    <div class=\"row g-4 mb-5\">\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n             <div class=\"card text-white bg-success text-center\">\r\n                 <div class=\"card-body\">\r\n                     <h5>Total Students</h5>\r\n                     <p class=\"display-6\"><?= $total_students ?></p>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-4 col-sm-6\">\r\n-            <div class=\"card text-dark bg-warning text-center\">\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-primary text-center\">\r\n                 <div class=\"card-body\">\r\n-                    <h5>Enrolled This Semester</h5>\r\n-                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+                    <h5>Total Staff</h5>\r\n+                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-4 col-sm-6\">\r\n-            <div class=\"card text-white bg-info text-center\">\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-dark bg-warning text-center\">\r\n                 <div class=\"card-body\">\r\n-                    <h5>Programs/Courses</h5>\r\n-                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n+                    <h5>Enrolled This Semester</h5>\r\n+                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n         <div class=\"col-md-3 col-sm-6\">\r\n             <div class=\"card text-white bg-info text-center\">\r\n                 <div class=\"card-body\">\r\n                     <h5>Programs/Courses</h5>\r\n"
                },
                {
                    "date": 1748600211981,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,15 +36,8 @@\n \r\n     // ❌ Session timeout block is wrongfully here\r\n }\r\n \r\n-// Total Staff\r\n-if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n-    $row = $result->fetch_assoc();\r\n-    $total_staff = $row['total'] ?? 0;\r\n-    $result->free();\r\n-}\r\n-\r\n // Enrolled this semester (status='Enrolled')\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n"
                },
                {
                    "date": 1748600254459,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,16 +3,16 @@\n $timeout = 900;\r\n if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n     session_unset();\r\n     session_destroy();\r\n-    header(\"Location: ../logregfor/login.php\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/login.php\");\r\n+    header(\"Location: ../logregfor/admin-dashboard\");\r\n     exit;\r\n }\r\n \r\n include '../db.php';\r\n"
                },
                {
                    "date": 1748602097683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,57 +10,48 @@\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/admin-dashboard\");\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit;\r\n }\r\n \r\n include '../db.php';\r\n \r\n // Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n \r\n-// Queries\r\n+// Dashboard variables\r\n $total_students = 0;\r\n-$total_staff = 0;\r\n $enrolled_semester = 0;\r\n $programs_count = 0;\r\n $course_data = [];\r\n \r\n-// Total Students\r\n+// Get total students and chart data\r\n if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $course_data[] = $row;\r\n+        $total_students += $row['total'];\r\n     }\r\n     $result->free();\r\n-\r\n-    // ❌ Session timeout block is wrongfully here\r\n }\r\n \r\n-// Enrolled this semester (status='Enrolled')\r\n+// Enrolled this semester\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n \r\n-// Programs/Courses count (distinct)\r\n+// Programs/Courses count\r\n if ($result = $conn->query(\"SELECT COUNT(DISTINCT course) AS total FROM students\")) {\r\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n-\r\n-// Chart data: number of students per course\r\n-if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n-    while ($row = $result->fetch_assoc()) {\r\n-        $course_data[] = $row;\r\n-    }\r\n-    $result->free();\r\n-} // ← DITO LAGAY ANG KULANG MONG BRACKET\r\n ?>\r\n \r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\" />\r\n"
                },
                {
                    "date": 1748602293744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,8 @@\n     $result->free();\r\n }\r\n ?>\r\n \r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\" />\r\n"
                },
                {
                    "date": 1748602427020,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,12 +9,13 @@\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n-if (!isset($_SESSION['admin_logged_in'])) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit;\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n+    header(\"Location: ../ADMIN/admin-login.php\");\r\n+    exit();\r\n }\r\n+?>\r\n \r\n include '../db.php';\r\n \r\n // Sanitize session username output\r\n"
                },
                {
                    "date": 1748606238616,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,12 +10,11 @@\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n-    header(\"Location: ../ADMIN/admin-login.php\");\r\n+    header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n     exit();\r\n }\r\n-?>\r\n \r\n include '../db.php';\r\n \r\n // Sanitize session username output\r\n"
                },
                {
                    "date": 1748606262620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n // CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n-    header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n+    header(\"Location: ../ADMIN/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n"
                },
                {
                    "date": 1748611795927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,9 +93,9 @@\n                     <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n                         <li><hr class=\"dropdown-divider\"></li>\r\n-                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/logout.php\">Logout</a></li>\r\n+                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/admin-logout.php\">Logout</a></li>\r\n                     </ul>\r\n                 </li>\r\n             </ul>\r\n         </div>\r\n"
                },
                {
                    "date": 1748613259535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,41 +104,33 @@\n \r\n <div class=\"container my-5\">\r\n \r\n     <div class=\"row g-4 mb-5\">\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-success text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Students</h5>\r\n-                    <p class=\"display-6\"><?= $total_students ?></p>\r\n-                </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-white bg-success text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Total Students</h5>\r\n+                <p class=\"display-6\"><?= $total_students ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-primary text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Staff</h5>\r\n-                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n-                </div>\r\n+    </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-dark bg-warning text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Enrolled This Semester</h5>\r\n+                <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-dark bg-warning text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Enrolled This Semester</h5>\r\n-                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n-                </div>\r\n+    </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-white bg-info text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Programs/Courses</h5>\r\n+                <p class=\"display-6\"><?= $programs_count ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-info text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Programs/Courses</h5>\r\n-                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n     </div>\r\n+</div>\r\n \r\n     <!-- Chart -->\r\n     <div class=\"row mb-5\">\r\n         <div class=\"col\">\r\n"
                },
                {
                    "date": 1748613344508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,8 +34,16 @@\n     }\r\n     $result->free();\r\n }\r\n \r\n+$total_staff = 0;\r\n+$result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\");\r\n+if ($result) {\r\n+    $row = $result->fetch_assoc();\r\n+    $total_staff = $row['total'] ?? 0;\r\n+    $result->free();\r\n+}\r\n+\r\n // Enrolled this semester\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n@@ -93,9 +101,9 @@\n                     <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n                         <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n                         <li><hr class=\"dropdown-divider\"></li>\r\n-                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/admin-logout.php\">Logout</a></li>\r\n+                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/adminlogout.php\">Logout</a></li>\r\n                     </ul>\r\n                 </li>\r\n             </ul>\r\n         </div>\r\n@@ -104,33 +112,41 @@\n \r\n <div class=\"container my-5\">\r\n \r\n     <div class=\"row g-4 mb-5\">\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n-        <div class=\"card text-white bg-success text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Total Students</h5>\r\n-                <p class=\"display-6\"><?= $total_students ?></p>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-success text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Total Students</h5>\r\n+                    <p class=\"display-6\"><?= $total_students ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n-        <div class=\"card text-dark bg-warning text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Enrolled This Semester</h5>\r\n-                <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-primary text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Total Staff</h5>\r\n+                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n-        <div class=\"card text-white bg-info text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Programs/Courses</h5>\r\n-                <p class=\"display-6\"><?= $programs_count ?></p>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-dark bg-warning text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Enrolled This Semester</h5>\r\n+                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-info text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Programs/Courses</h5>\r\n+                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n+                </div>\r\n+            </div>\r\n+        </div>\r\n     </div>\r\n-</div>\r\n \r\n     <!-- Chart -->\r\n     <div class=\"row mb-5\">\r\n         <div class=\"col\">\r\n"
                },
                {
                    "date": 1748613482425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,41 +112,33 @@\n \r\n <div class=\"container my-5\">\r\n \r\n     <div class=\"row g-4 mb-5\">\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-success text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Students</h5>\r\n-                    <p class=\"display-6\"><?= $total_students ?></p>\r\n-                </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-white bg-success text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Total Students</h5>\r\n+                <p class=\"display-6\"><?= $total_students ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-primary text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Staff</h5>\r\n-                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n-                </div>\r\n+    </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-dark bg-warning text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Enrolled This Semester</h5>\r\n+                <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-dark bg-warning text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Enrolled This Semester</h5>\r\n-                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n-                </div>\r\n+    </div>\r\n+    <div class=\"col-md-4 col-sm-6\">\r\n+        <div class=\"card text-white bg-info text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Programs/Courses</h5>\r\n+                <p class=\"display-6\"><?= $programs_count ?></p>\r\n             </div>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-info text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Programs/Courses</h5>\r\n-                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n     </div>\r\n+</div>\r\n \r\n     <!-- Chart -->\r\n     <div class=\"row mb-5\">\r\n         <div class=\"col\">\r\n"
                },
                {
                    "date": 1748613647111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,35 +111,42 @@\n </nav>\r\n \r\n <div class=\"container my-5\">\r\n \r\n-    <div class=\"row g-4 mb-5\">\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n+<div class=\"row g-4 mb-5\">\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n         <div class=\"card text-white bg-success text-center\">\r\n             <div class=\"card-body\">\r\n                 <h5>Total Students</h5>\r\n                 <p class=\"display-6\"><?= $total_students ?></p>\r\n             </div>\r\n         </div>\r\n     </div>\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n         <div class=\"card text-dark bg-warning text-center\">\r\n             <div class=\"card-body\">\r\n                 <h5>Enrolled This Semester</h5>\r\n                 <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n             </div>\r\n         </div>\r\n     </div>\r\n-    <div class=\"col-md-4 col-sm-6\">\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n         <div class=\"card text-white bg-info text-center\">\r\n             <div class=\"card-body\">\r\n                 <h5>Programs/Courses</h5>\r\n                 <p class=\"display-6\"><?= $programs_count ?></p>\r\n             </div>\r\n         </div>\r\n     </div>\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n+        <div class=\"card text-white bg-secondary text-center\">\r\n+            <div class=\"card-body\">\r\n+                <h5>Total Staff</h5>\r\n+                <p class=\"display-6\"><?= $total_staff ?></p>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n </div>\r\n-\r\n     <!-- Chart -->\r\n     <div class=\"row mb-5\">\r\n         <div class=\"col\">\r\n             <canvas id=\"enrollmentChart\" height=\"100\"></canvas>\r\n"
                },
                {
                    "date": 1748613684313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,42 +111,43 @@\n </nav>\r\n \r\n <div class=\"container my-5\">\r\n \r\n-<div class=\"row g-4 mb-5\">\r\n-    <div class=\"col-md-3 col-sm-6\">\r\n-        <div class=\"card text-white bg-success text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Total Students</h5>\r\n-                <p class=\"display-6\"><?= $total_students ?></p>\r\n+    <div class=\"row g-4 mb-5\">\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-success text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Total Students</h5>\r\n+                    <p class=\"display-6\"><?= $total_students ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-3 col-sm-6\">\r\n-        <div class=\"card text-dark bg-warning text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Enrolled This Semester</h5>\r\n-                <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-primary text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Total Staff</h5>\r\n+                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-3 col-sm-6\">\r\n-        <div class=\"card text-white bg-info text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Programs/Courses</h5>\r\n-                <p class=\"display-6\"><?= $programs_count ?></p>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-dark bg-warning text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Enrolled This Semester</h5>\r\n+                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n-    </div>\r\n-    <div class=\"col-md-3 col-sm-6\">\r\n-        <div class=\"card text-white bg-secondary text-center\">\r\n-            <div class=\"card-body\">\r\n-                <h5>Total Staff</h5>\r\n-                <p class=\"display-6\"><?= $total_staff ?></p>\r\n+        <div class=\"col-md-3 col-sm-6\">\r\n+            <div class=\"card text-white bg-info text-center\">\r\n+                <div class=\"card-body\">\r\n+                    <h5>Programs/Courses</h5>\r\n+                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n+                </div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n-</div>\r\n+\r\n     <!-- Chart -->\r\n     <div class=\"row mb-5\">\r\n         <div class=\"col\">\r\n             <canvas id=\"enrollmentChart\" height=\"100\"></canvas>\r\n"
                },
                {
                    "date": 1748613702343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,16 +34,8 @@\n     }\r\n     $result->free();\r\n }\r\n \r\n-$total_staff = 0;\r\n-$result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\");\r\n-if ($result) {\r\n-    $row = $result->fetch_assoc();\r\n-    $total_staff = $row['total'] ?? 0;\r\n-    $result->free();\r\n-}\r\n-\r\n // Enrolled this semester\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n"
                },
                {
                    "date": 1748613731037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,16 +113,8 @@\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-primary text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Staff</h5>\r\n-                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n             <div class=\"card text-dark bg-warning text-center\">\r\n                 <div class=\"card-body\">\r\n                     <h5>Enrolled This Semester</h5>\r\n                     <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n"
                },
                {
                    "date": 1748615099401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,9 +159,9 @@\n                                 </tr>\r\n                             </thead>\r\n                             <tbody>\r\n                                 <?php\r\n-                                $recent_students = $conn->query(\"SELECT student_number, CONCAT(first_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY student_id DESC LIMIT 3\");\r\n+                                $recent_students = $conn->query(\"SELECT student_number, CONCAT(first_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY id DESC LIMIT 3\");\r\n                                 if ($recent_students) {\r\n                                     while ($student = $recent_students->fetch_assoc()):\r\n                                         $status = $student['status'];\r\n                                         $badge_class = 'bg-secondary';\r\n"
                },
                {
                    "date": 1748615420151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,11 +189,49 @@\n                 </div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n-\r\n </div>\r\n \r\n+ <!-- Management Section -->\r\n+    <div class=\"row mt-5\">\r\n+      <div class=\"col-md-6\">\r\n+        <div class=\"list-group\">\r\n+          <h4>User Management</h4>\r\n+          <a href=\"manage-admins.html\" class=\"list-group-item list-group-item-action\">Manage Admin Users</a>\r\n+          <a href=\"manage-staff.html\" class=\"list-group-item list-group-item-action\">Manage Registrar/Staff Accounts</a>\r\n+          <a href=\"manage-students.html\" class=\"list-group-item list-group-item-action\">Manage Student Accounts</a>\r\n+        </div>\r\n+        <div class=\"list-group mt-4\">\r\n+          <h4>Student Management</h4>\r\n+          <a href=\"view-students.html\" class=\"list-group-item list-group-item-action\">View All Students</a>\r\n+          <a href=\"add-student.html\" class=\"list-group-item list-group-item-action\">Add New Student</a>\r\n+          <a href=\"edit-student.html\" class=\"list-group-item list-group-item-action\">Edit/Delete Student Info</a>\r\n+          <a href=\"upload-documents.html\" class=\"list-group-item list-group-item-action\">Upload Student Documents</a>\r\n+          <a href=\"approve-registration.html\" class=\"list-group-item list-group-item-action\">Approve Student Registration</a>\r\n+          <a href=\"enrollment-history.html\" class=\"list-group-item list-group-item-action\">View Enrollment History</a>\r\n+        </div>\r\n+      </div>\r\n+      <div class=\"col-md-6\">\r\n+        <div class=\"list-group\">\r\n+          <h4>Enrollment Management</h4>\r\n+          <a href=\"pending-enrollment.html\" class=\"list-group-item list-group-item-action\">View Pending Requests</a>\r\n+          <a href=\"approve-enrollment.html\" class=\"list-group-item list-group-item-action\">Approve/Reject Enrollment</a>\r\n+          <a href=\"assign-subjects.html\" class=\"list-group-item list-group-item-action\">Assign Sections/Subjects</a>\r\n+          <a href=\"enrollment-period.html\" class=\"list-group-item list-group-item-action\">Set Enrollment Period</a>\r\n+        </div>\r\n+        <div class=\"list-group mt-4\">\r\n+          <h4>Reports & System Settings</h4>\r\n+          <a href=\"generate-reports.html\" class=\"list-group-item list-group-item-action\">Generate Reports</a>\r\n+          <a href=\"download-students.html\" class=\"list-group-item list-group-item-action\">Download Student Lists</a>\r\n+          <a href=\"update-school.html\" class=\"list-group-item list-group-item-action\">Update School Info</a>\r\n+          <a href=\"backup-restore.html\" class=\"list-group-item list-group-item-action\">Backup/Restore</a>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+\r\n+\r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n \r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n"
                },
                {
                    "date": 1748615592181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -229,9 +229,8 @@\n       </div>\r\n     </div>\r\n   </div>\r\n \r\n-\r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n \r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n"
                },
                {
                    "date": 1748615609970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -221,11 +221,11 @@\n         </div>\r\n         <div class=\"list-group mt-4\">\r\n           <h4>Reports & System Settings</h4>\r\n           <a href=\"generate-reports.html\" class=\"list-group-item list-group-item-action\">Generate Reports</a>\r\n-          <a href=\"download-students.html\" class=\"list-group-item list-group-item-action\">Download Student Lists</a>\r\n+          <!-- <a href=\"download-students.html\" class=\"list-group-item list-group-item-action\">Download Student Lists</a>\r\n           <a href=\"update-school.html\" class=\"list-group-item list-group-item-action\">Update School Info</a>\r\n-          <a href=\"backup-restore.html\" class=\"list-group-item list-group-item-action\">Backup/Restore</a>\r\n+          <a href=\"backup-restore.html\" class=\"list-group-item list-group-item-action\">Backup/Restore</a> -->\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n"
                },
                {
                    "date": 1748616078476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,9 +190,8 @@\n             </div>\r\n         </div>\r\n     </div>\r\n </div>\r\n-\r\n  <!-- Management Section -->\r\n     <div class=\"row mt-5\">\r\n       <div class=\"col-md-6\">\r\n         <div class=\"list-group\">\r\n@@ -220,12 +219,12 @@\n           <a href=\"enrollment-period.html\" class=\"list-group-item list-group-item-action\">Set Enrollment Period</a>\r\n         </div>\r\n         <div class=\"list-group mt-4\">\r\n           <h4>Reports & System Settings</h4>\r\n-          <a href=\"generate-reports.html\" class=\"list-group-item list-group-item-action\">Generate Reports</a>\r\n-          <!-- <a href=\"download-students.html\" class=\"list-group-item list-group-item-action\">Download Student Lists</a>\r\n+          <!-- <a href=\"generate-reports.html\" class=\"list-group-item list-group-item-action\">Generate Reports</a> -->\r\n+           <a href=\"download-students.html\" class=\"list-group-item list-group-item-action\">Download Student Lists</a>\r\n           <a href=\"update-school.html\" class=\"list-group-item list-group-item-action\">Update School Info</a>\r\n-          <a href=\"backup-restore.html\" class=\"list-group-item list-group-item-action\">Backup/Restore</a> -->\r\n+          <!-- <a href=\"backup-restore.html\" class=\"list-group-item list-group-item-action\">Backup/Restore</a> -->\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n"
                },
                {
                    "date": 1748616208843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,184 +52,250 @@\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n-    <meta charset=\"UTF-8\" />\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n-    <title>Admin Dashboard - Enrollment System</title>\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\" />\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n-    <link rel=\"icon\" href=\"favicon.ico\" type=\"image/x-icon\">\r\n-    <style>\r\n-        body { background-color: #f4f9f4; }\r\n-        .navbar { box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-        .card { border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }\r\n-        .school-logo { width: 50px; height: 50px; object-fit: cover; border-radius: 50%; margin-right: 10px; border: 2px solid #fff; }\r\n-        .section-title { border-bottom: 2px solid #c8e6c9; padding-bottom: 5px; margin-bottom: 15px; color: #2e7d32; }\r\n-        .list-group-item { border: none; border-left: 4px solid transparent; transition: all 0.3s; }\r\n-        .list-group-item:hover { background-color: #e8f5e9; border-left: 4px solid #43a047; }\r\n-        @media (max-width: 576px) { .card { margin-bottom: 1rem; } }\r\n-    </style>\r\n+  <meta charset=\"UTF-8\" />\r\n+  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n+  <title>Admin Dashboard - Enrollment System</title>\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n+  <style>\r\n+    body {\r\n+      background-color: #f4f9f4;\r\n+    }\r\n+    .navbar {\r\n+      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+    }\r\n+    .card {\r\n+      border-radius: 12px;\r\n+      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);\r\n+    }\r\n+    .school-logo {\r\n+      width: 50px;\r\n+      height: 50px;\r\n+      object-fit: cover;\r\n+      border-radius: 50%;\r\n+      margin-right: 10px;\r\n+      border: 2px solid #fff;\r\n+    }\r\n+    .section-title {\r\n+      border-bottom: 2px solid #c8e6c9;\r\n+      padding-bottom: 5px;\r\n+      margin-bottom: 15px;\r\n+      color: #2e7d32;\r\n+    }\r\n+    .list-group-item {\r\n+      border: none;\r\n+      border-left: 4px solid transparent;\r\n+      transition: all 0.3s;\r\n+    }\r\n+    .list-group-item:hover {\r\n+      background-color: #e8f5e9;\r\n+      border-left: 4px solid #43a047;\r\n+    }\r\n+\r\n+    @media (max-width: 576px) {\r\n+  .card {\r\n+    margin-bottom: 1rem;\r\n+  }\r\n+}\r\n+\r\n+  </style>\r\n </head>\r\n <body>\r\n \r\n <nav class=\"navbar navbar-expand-lg navbar-dark bg-success py-3\">\r\n-    <div class=\"container-fluid\">\r\n-        <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n-            <img src=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\" />\r\n-            Admin Panel\r\n-        </a>\r\n-        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNavDropdown\">\r\n-            <span class=\"navbar-toggler-icon\"></span>\r\n-        </button>\r\n-        <div class=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavDropdown\">\r\n-            <ul class=\"navbar-nav\">\r\n-                <li class=\"nav-item\"><a class=\"nav-link\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/HelpDesk.php\">Help Desk</a></li>\r\n-                <li class=\"nav-item dropdown\">\r\n-                    <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-                        Admin (<?= $admin_username ?>)\r\n-                    </a>\r\n-                    <ul class=\"dropdown-menu dropdown-menu-end\">\r\n-                        <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n-                        <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n-                        <li><hr class=\"dropdown-divider\"></li>\r\n-                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/adminlogout.php\">Logout</a></li>\r\n-                    </ul>\r\n-                </li>\r\n-            </ul>\r\n-        </div>\r\n+  <div class=\"container-fluid\">\r\n+    <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n+      <img src=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n+      Admin Panel\r\n+    </a>\r\n+    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNavDropdown\">\r\n+      <span class=\"navbar-toggler-icon\"></span>\r\n+    </button>\r\n+    <div class=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavDropdown\">\r\n+      <ul class=\"navbar-nav\">\r\n+        <li class=\"nav-item\"><a class=\"nav-link\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/HelpDesk.php\">Help Desk</a></li>\r\n+        <li class=\"nav-item dropdown\">\r\n+          <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n+            Admin (<?= htmlspecialchars($_SESSION['admin_username']) ?>)\r\n+          </a>\r\n+          <ul class=\"dropdown-menu dropdown-menu-end\">\r\n+            <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n+            <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n+            <li><hr class=\"dropdown-divider\"></li>\r\n+            <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/logout.php\">Logout</a></li>\r\n+          </ul>\r\n+        </li>\r\n+      </ul>\r\n     </div>\r\n+  </div>\r\n </nav>\r\n \r\n <div class=\"container my-5\">\r\n-\r\n-    <div class=\"row g-4 mb-5\">\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-success text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Total Students</h5>\r\n-                    <p class=\"display-6\"><?= $total_students ?></p>\r\n-                </div>\r\n-            </div>\r\n+  <div class=\"row g-4 mb-5\">\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n+      <div class=\"card text-white bg-success text-center\">\r\n+        <div class=\"card-body\">\r\n+          <h5>Total Students</h5>\r\n+          <p class=\"display-6\">850</p>\r\n         </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-dark bg-warning text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Enrolled This Semester</h5>\r\n-                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n-        <div class=\"col-md-3 col-sm-6\">\r\n-            <div class=\"card text-white bg-info text-center\">\r\n-                <div class=\"card-body\">\r\n-                    <h5>Programs/Courses</h5>\r\n-                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n-                </div>\r\n-            </div>\r\n-        </div>\r\n+      </div>\r\n     </div>\r\n-\r\n-    <!-- Chart -->\r\n-    <div class=\"row mb-5\">\r\n-        <div class=\"col\">\r\n-            <canvas id=\"enrollmentChart\" height=\"100\"></canvas>\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n+      <div class=\"card text-white bg-primary text-center\">\r\n+        <div class=\"card-body\">\r\n+          <h5>Total Teachers/Staff</h5>\r\n+          <p class=\"display-6\">45</p>\r\n         </div>\r\n+      </div>\r\n     </div>\r\n-\r\n-    <!-- Recent Students -->\r\n-    <div class=\"row mb-5\">\r\n-        <div class=\"col\">\r\n-            <div class=\"card\">\r\n-                <div class=\"card-header bg-primary text-white d-flex justify-content-between align-items-center\">\r\n-                    <h5 class=\"mb-0\">Recent Student List</h5>\r\n-                    <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-all-students.php\" class=\"btn btn-sm btn-light\">View All</a>\r\n-                </div>\r\n-                <div class=\"card-body p-0\">\r\n-                    <div class=\"table-responsive\">\r\n-                        <table class=\"table table-hover mb-0\">\r\n-                            <thead>\r\n-                                <tr>\r\n-                                    <th>Student Number</th>\r\n-                                    <th>Full Name</th>\r\n-                                    <th>Year Level</th>\r\n-                                    <th>Course</th>\r\n-                                    <th>Status</th>\r\n-                                </tr>\r\n-                            </thead>\r\n-                            <tbody>\r\n-                                <?php\r\n-                                $recent_students = $conn->query(\"SELECT student_number, CONCAT(first_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY id DESC LIMIT 3\");\r\n-                                if ($recent_students) {\r\n-                                    while ($student = $recent_students->fetch_assoc()):\r\n-                                        $status = $student['status'];\r\n-                                        $badge_class = 'bg-secondary';\r\n-                                        if ($status == 'Enrolled') $badge_class = 'bg-success';\r\n-                                        else if ($status == 'Pending') $badge_class = 'bg-warning text-dark';\r\n-                                        else if ($status == 'Dropped') $badge_class = 'bg-danger';\r\n-                                ?>\r\n-                                    <tr>\r\n-                                        <td><?= htmlspecialchars($student['student_number']) ?></td>\r\n-                                        <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n-                                        <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n-                                        <td><?= htmlspecialchars($student['course']) ?></td>\r\n-                                        <td><span class=\"badge <?= $badge_class ?>\"><?= htmlspecialchars($status) ?></span></td>\r\n-                                    </tr>\r\n-                                <?php\r\n-                                    endwhile;\r\n-                                    $recent_students->free();\r\n-                                } else {\r\n-                                    echo '<tr><td colspan=\"5\" class=\"text-center\">No recent students found.</td></tr>';\r\n-                                }\r\n-                                ?>\r\n-                            </tbody>\r\n-                        </table>\r\n-                    </div>\r\n-                </div>\r\n-            </div>\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n+      <div class=\"card text-dark bg-warning text-center\">\r\n+        <div class=\"card-body\">\r\n+          <h5>Enrolled This Semester</h5>\r\n+          <p class=\"display-6\">630</p>\r\n         </div>\r\n+      </div>\r\n     </div>\r\n-</div>\r\n- <!-- Management Section -->\r\n-    <div class=\"row mt-5\">\r\n-      <div class=\"col-md-6\">\r\n-        <div class=\"list-group\">\r\n-          <h4>User Management</h4>\r\n-          <a href=\"manage-admins.html\" class=\"list-group-item list-group-item-action\">Manage Admin Users</a>\r\n-          <a href=\"manage-staff.html\" class=\"list-group-item list-group-item-action\">Manage Registrar/Staff Accounts</a>\r\n-          <a href=\"manage-students.html\" class=\"list-group-item list-group-item-action\">Manage Student Accounts</a>\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n+      <div class=\"card text-white bg-info text-center\">\r\n+        <div class=\"card-body\">\r\n+          <h5>Programs/Courses</h5>\r\n+          <p class=\"display-6\">12</p>\r\n         </div>\r\n-        <div class=\"list-group mt-4\">\r\n-          <h4>Student Management</h4>\r\n-          <a href=\"view-students.html\" class=\"list-group-item list-group-item-action\">View All Students</a>\r\n-          <a href=\"add-student.html\" class=\"list-group-item list-group-item-action\">Add New Student</a>\r\n-          <a href=\"edit-student.html\" class=\"list-group-item list-group-item-action\">Edit/Delete Student Info</a>\r\n-          <a href=\"upload-documents.html\" class=\"list-group-item list-group-item-action\">Upload Student Documents</a>\r\n-          <a href=\"approve-registration.html\" class=\"list-group-item list-group-item-action\">Approve Student Registration</a>\r\n-          <a href=\"enrollment-history.html\" class=\"list-group-item list-group-item-action\">View Enrollment History</a>\r\n-        </div>\r\n       </div>\r\n-      <div class=\"col-md-6\">\r\n-        <div class=\"list-group\">\r\n-          <h4>Enrollment Management</h4>\r\n-          <a href=\"pending-enrollment.html\" class=\"list-group-item list-group-item-action\">View Pending Requests</a>\r\n-          <a href=\"approve-enrollment.html\" class=\"list-group-item list-group-item-action\">Approve/Reject Enrollment</a>\r\n-          <a href=\"assign-subjects.html\" class=\"list-group-item list-group-item-action\">Assign Sections/Subjects</a>\r\n-          <a href=\"enrollment-period.html\" class=\"list-group-item list-group-item-action\">Set Enrollment Period</a>\r\n+    </div>\r\n+  </div>\r\n+  <div class=\"row mb-5\">\r\n+    <div class=\"col\">\r\n+      <canvas id=\"enrollmentChart\" height=\"100\"></canvas>\r\n+    </div>\r\n+  </div>\r\n+  <div class=\"row mb-5\">\r\n+    <div class=\"col\">\r\n+      <div class=\"card\">\r\n+        <div class=\"card-header bg-primary text-white d-flex justify-content-between align-items-center\">\r\n+          <h5 class=\"mb-0\">Recent Student List</h5>\r\n+          <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-all-students.php\" class=\"btn btn-sm btn-light\">View All</a>\r\n         </div>\r\n-        <div class=\"list-group mt-4\">\r\n-          <h4>Reports & System Settings</h4>\r\n-          <!-- <a href=\"generate-reports.html\" class=\"list-group-item list-group-item-action\">Generate Reports</a> -->\r\n-           <a href=\"download-students.html\" class=\"list-group-item list-group-item-action\">Download Student Lists</a>\r\n-          <a href=\"update-school.html\" class=\"list-group-item list-group-item-action\">Update School Info</a>\r\n-          <!-- <a href=\"backup-restore.html\" class=\"list-group-item list-group-item-action\">Backup/Restore</a> -->\r\n+        <div class=\"card-body p-0\">\r\n+          <div class=\"table-responsive\">\r\n+            <table class=\"table table-hover mb-0\">\r\n+              <thead class=\"table-light\">\r\n+                <tr>\r\n+                  <th>Student ID</th>\r\n+                  <th>Full Name</th>\r\n+                  <th>Year</th>\r\n+                  <th>Course</th>\r\n+                  <th>Status</th>\r\n+                </tr>\r\n+              </thead>\r\n+              <tbody>\r\n+                <tr>\r\n+                  <td>2023-001</td>\r\n+                  <td>Jerick Dela Cruz Reyes</td>\r\n+                  <td>1st Year</td>\r\n+                  <td>IT</td>\r\n+                  <td><span class=\"badge bg-success\">Enrolled</span></td>\r\n+                </tr>\r\n+                <tr>\r\n+                  <td>2023-002</td>\r\n+                  <td>Jerick Dela Cruz Reyes</td>\r\n+                  <td>2nd Year</td>\r\n+                  <td>IT</td>\r\n+                  <td><span class=\"badge bg-warning text-dark\">Pending</span></td>\r\n+                </tr>\r\n+                <tr>\r\n+                  <td>2023-003</td>\r\n+                  <td>Jerick Dela Cruz Reyes</td>\r\n+                  <td>\r\n+                    3rd Year\r\n+                  </td>\r\n+                  <td>\r\n+                    IT\r\n+                  </td>\r\n+                  <td><span class=\"badge bg-danger\">\r\n+                    Dropped\r\n+                  </span></td>\r\n+                </tr>\r\n+              </tbody>\r\n+            </table>\r\n+          </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n \r\n+  <div class=\"row g-4\">\r\n+    <div class=\"col-md-6\">\r\n+      <div class=\"section-title\"><h4>\r\n+        User Management\r\n+      </h4></div>\r\n+      <div class=\"list-group mb-4\">\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-admins-users.php\" class=\"list-group-item list-group-item-action\">\r\n+          Manage Admin Users\r\n+        </a>\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-registar-staff.php\" class=\"list-group-item list-group-item-action\">\r\n+          Manage Registrar/Staff\r\n+        </a>\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-students-account.php\" class=\"list-group-item list-group-item-action\">\r\n+          Manage Student Accounts\r\n+        </a>\r\n+      </div>\r\n+\r\n+      <div class=\"section-title\"><h4>\r\n+        Student Management\r\n+      </h4></div>\r\n+      <div class=\"list-group\">\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-all-students.php\" class=\"list-group-item list-group-item-action\">\r\n+          View All Students\r\n+        </a>\r\n+        <!-- <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/upload-student-documents.php\" class=\"list-group-item list-group-item-action\"\r\n+        >Upload Student Documents\r\n+      </a> -->\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/approve-student-registration.php\" class=\"list-group-item list-group-item-action\"\r\n+        >Approve Student Registration\r\n+      </a>\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-enrollment-history.php\" class=\"list-group-item list-group-item-action\">\r\n+          View Enrollment History\r\n+        </a>\r\n+      </div>\r\n+    </div>\r\n+\r\n+    <div class=\"col-md-6\">\r\n+      <div class=\"section-title\"><h4>\r\n+        Enrollment Management\r\n+      </h4></div>\r\n+      <div class=\"list-group mb-4\">\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/view-pending-enrollment.php\" class=\"list-group-item list-group-item-action\">\r\n+          View Pending Requests\r\n+        </a>\r\n+        <!-- <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/approve-reject-enrollment.php\" class=\"list-group-item list-group-item-action\">\r\n+          Approve/Reject Enrollment\r\n+        </a> -->\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/assign-subjects-section.php\" class=\"list-group-item list-group-item-action\">\r\n+          Assign Subjects/Sections\r\n+        </a>\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management//set-enrollment-period.php\" class=\"list-group-item list-group-item-action\">\r\n+          Set Enrollment Period\r\n+        </a>\r\n+      </div>\r\n+\r\n+      <div class=\"section-title\"><h4>\r\n+        Reports & Settings\r\n+      </h4></div>\r\n+      <div class=\"list-group\">\r\n+        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Report&Settings/download-students-list.php\" class=\"list-group-item list-group-item-action\">\r\n+          Download Student List\r\n+        </a>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+\r\n+</div>\r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n \r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n"
                },
                {
                    "date": 1748616357638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,16 +143,8 @@\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n-      <div class=\"card text-white bg-primary text-center\">\r\n-        <div class=\"card-body\">\r\n-          <h5>Total Teachers/Staff</h5>\r\n-          <p class=\"display-6\">45</p>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-    <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-dark bg-warning text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Enrolled This Semester</h5>\r\n           <p class=\"display-6\">630</p>\r\n"
                },
                {
                    "date": 1748616515570,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,8 +143,16 @@\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n+      <div class=\"card text-white bg-primary text-center\">\r\n+        <div class=\"card-body\">\r\n+          <h5>Total Teachers/Staff</h5>\r\n+          <p class=\"display-6\">45</p>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+    <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-dark bg-warning text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Enrolled This Semester</h5>\r\n           <p class=\"display-6\">630</p>\r\n@@ -183,37 +191,36 @@\n                   <th>Course</th>\r\n                   <th>Status</th>\r\n                 </tr>\r\n               </thead>\r\n-              <tbody>\r\n-                <tr>\r\n-                  <td>2023-001</td>\r\n-                  <td>Jerick Dela Cruz Reyes</td>\r\n-                  <td>1st Year</td>\r\n-                  <td>IT</td>\r\n-                  <td><span class=\"badge bg-success\">Enrolled</span></td>\r\n-                </tr>\r\n-                <tr>\r\n-                  <td>2023-002</td>\r\n-                  <td>Jerick Dela Cruz Reyes</td>\r\n-                  <td>2nd Year</td>\r\n-                  <td>IT</td>\r\n-                  <td><span class=\"badge bg-warning text-dark\">Pending</span></td>\r\n-                </tr>\r\n-                <tr>\r\n-                  <td>2023-003</td>\r\n-                  <td>Jerick Dela Cruz Reyes</td>\r\n-                  <td>\r\n-                    3rd Year\r\n-                  </td>\r\n-                  <td>\r\n-                    IT\r\n-                  </td>\r\n-                  <td><span class=\"badge bg-danger\">\r\n-                    Dropped\r\n-                  </span></td>\r\n-                </tr>\r\n-              </tbody>\r\n+             <tbody>\r\n+  <?php if (!empty($recent_students)): ?>\r\n+    <?php foreach ($recent_students as $student): ?>\r\n+      <tr>\r\n+        <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n+        <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n+        <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n+        <td><?= htmlspecialchars($student['course']) ?></td>\r\n+        <td>\r\n+          <?php\r\n+            $status = strtolower($student['status']);\r\n+            $badgeClass = 'secondary';\r\n+            if ($status === 'enrolled') $badgeClass = 'success';\r\n+            elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n+            elseif ($status === 'dropped') $badgeClass = 'danger';\r\n+          ?>\r\n+          <span class=\"badge bg-<?= $badgeClass ?>\">\r\n+            <?= htmlspecialchars($student['status']) ?>\r\n+          </span>\r\n+        </td>\r\n+      </tr>\r\n+    <?php endforeach; ?>\r\n+  <?php else: ?>\r\n+    <tr>\r\n+      <td colspan=\"5\" class=\"text-center\">No recent students found.</td>\r\n+    </tr>\r\n+  <?php endif; ?>\r\n+</tbody>\r\n             </table>\r\n           </div>\r\n         </div>\r\n       </div>\r\n"
                },
                {
                    "date": 1748616794823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,26 +8,24 @@\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n-// CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n     header(\"Location: ../ADMIN/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n \r\n-// Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n \r\n-// Dashboard variables\r\n $total_students = 0;\r\n $enrolled_semester = 0;\r\n $programs_count = 0;\r\n $course_data = [];\r\n+$recent_students = [];\r\n \r\n-// Get total students and chart data\r\n+// Total students and chart data\r\n if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $course_data[] = $row;\r\n         $total_students += $row['total'];\r\n@@ -47,8 +45,16 @@\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n+\r\n+// Recent students\r\n+if ($result = $conn->query(\"SELECT student_id, full_name, year_level, course, status FROM students ORDER BY created_at DESC LIMIT 5\")) {\r\n+    while ($row = $result->fetch_assoc()) {\r\n+        $recent_students[] = $row;\r\n+    }\r\n+    $result->free();\r\n+}\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n"
                },
                {
                    "date": 1748616844440,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,24 +8,26 @@\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n+// CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n     header(\"Location: ../ADMIN/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n \r\n+// Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n \r\n+// Dashboard variables\r\n $total_students = 0;\r\n $enrolled_semester = 0;\r\n $programs_count = 0;\r\n $course_data = [];\r\n-$recent_students = [];\r\n \r\n-// Total students and chart data\r\n+// Get total students and chart data\r\n if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $course_data[] = $row;\r\n         $total_students += $row['total'];\r\n@@ -45,16 +47,8 @@\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n-\r\n-// Recent students\r\n-if ($result = $conn->query(\"SELECT student_id, full_name, year_level, course, status FROM students ORDER BY created_at DESC LIMIT 5\")) {\r\n-    while ($row = $result->fetch_assoc()) {\r\n-        $recent_students[] = $row;\r\n-    }\r\n-    $result->free();\r\n-}\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n"
                },
                {
                    "date": 1748616888620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -192,35 +192,35 @@\n                   <th>Status</th>\r\n                 </tr>\r\n               </thead>\r\n              <tbody>\r\n-  <?php if (!empty($recent_students)): ?>\r\n-    <?php foreach ($recent_students as $student): ?>\r\n-      <tr>\r\n-        <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n-        <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n-        <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n-        <td><?= htmlspecialchars($student['course']) ?></td>\r\n-        <td>\r\n-          <?php\r\n-            $status = strtolower($student['status']);\r\n-            $badgeClass = 'secondary';\r\n-            if ($status === 'enrolled') $badgeClass = 'success';\r\n-            elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n-            elseif ($status === 'dropped') $badgeClass = 'danger';\r\n-          ?>\r\n-          <span class=\"badge bg-<?= $badgeClass ?>\">\r\n-            <?= htmlspecialchars($student['status']) ?>\r\n-          </span>\r\n-        </td>\r\n-      </tr>\r\n-    <?php endforeach; ?>\r\n-  <?php else: ?>\r\n-    <tr>\r\n-      <td colspan=\"5\" class=\"text-center\">No recent students found.</td>\r\n-    </tr>\r\n-  <?php endif; ?>\r\n-</tbody>\r\n+            <?php if (!empty($recent_students)): ?>\r\n+                <?php foreach ($recent_students as $student): ?>\r\n+                <tr>\r\n+                    <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n+                    <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n+                    <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n+                    <td><?= htmlspecialchars($student['course']) ?></td>\r\n+                    <td>\r\n+                    <?php\r\n+                        $status = strtolower($student['status']);\r\n+                        $badgeClass = 'secondary';\r\n+                        if ($status === 'enrolled') $badgeClass = 'success';\r\n+                        elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n+                        elseif ($status === 'dropped') $badgeClass = 'danger';\r\n+                    ?>\r\n+                    <span class=\"badge bg-<?= $badgeClass ?>\">\r\n+                        <?= htmlspecialchars($student['status']) ?>\r\n+                    </span>\r\n+                    </td>\r\n+                </tr>\r\n+                <?php endforeach; ?>\r\n+            <?php else: ?>\r\n+                <tr>\r\n+                <td colspan=\"5\" class=\"text-center\">No recent students found.</td>\r\n+                </tr>\r\n+            <?php endif; ?>\r\n+            </tbody>\r\n             </table>\r\n           </div>\r\n         </div>\r\n       </div>\r\n"
                },
                {
                    "date": 1748617131006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,47 +8,56 @@\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n-// CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n     header(\"Location: ../ADMIN/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n \r\n-// Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n \r\n-// Dashboard variables\r\n $total_students = 0;\r\n $enrolled_semester = 0;\r\n $programs_count = 0;\r\n+$total_staff = 0;\r\n $course_data = [];\r\n+$recent_students = [];\r\n \r\n-// Get total students and chart data\r\n if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $course_data[] = $row;\r\n         $total_students += $row['total'];\r\n     }\r\n     $result->free();\r\n }\r\n \r\n-// Enrolled this semester\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n \r\n-// Programs/Courses count\r\n if ($result = $conn->query(\"SELECT COUNT(DISTINCT course) AS total FROM students\")) {\r\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n+\r\n+if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n+    $row = $result->fetch_assoc();\r\n+    $total_staff = $row['total'] ?? 0;\r\n+    $result->free();\r\n+}\r\n+\r\n+if ($result = $conn->query(\"SELECT student_number AS student_id, CONCAT(first_name, ' ', middle_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY created_at DESC LIMIT 5\")) {\r\n+    while ($row = $result->fetch_assoc()) {\r\n+        $recent_students[] = $row;\r\n+    }\r\n+    $result->free();\r\n+}\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n@@ -60,48 +69,16 @@\n   <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n   <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n   <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n   <style>\r\n-    body {\r\n-      background-color: #f4f9f4;\r\n-    }\r\n-    .navbar {\r\n-      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n-    }\r\n-    .card {\r\n-      border-radius: 12px;\r\n-      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);\r\n-    }\r\n-    .school-logo {\r\n-      width: 50px;\r\n-      height: 50px;\r\n-      object-fit: cover;\r\n-      border-radius: 50%;\r\n-      margin-right: 10px;\r\n-      border: 2px solid #fff;\r\n-    }\r\n-    .section-title {\r\n-      border-bottom: 2px solid #c8e6c9;\r\n-      padding-bottom: 5px;\r\n-      margin-bottom: 15px;\r\n-      color: #2e7d32;\r\n-    }\r\n-    .list-group-item {\r\n-      border: none;\r\n-      border-left: 4px solid transparent;\r\n-      transition: all 0.3s;\r\n-    }\r\n-    .list-group-item:hover {\r\n-      background-color: #e8f5e9;\r\n-      border-left: 4px solid #43a047;\r\n-    }\r\n-\r\n-    @media (max-width: 576px) {\r\n-  .card {\r\n-    margin-bottom: 1rem;\r\n-  }\r\n-}\r\n-\r\n+    body { background-color: #f4f9f4; }\r\n+    .navbar { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }\r\n+    .card { border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05); }\r\n+    .school-logo { width: 50px; height: 50px; object-fit: cover; border-radius: 50%; margin-right: 10px; border: 2px solid #fff; }\r\n+    .section-title { border-bottom: 2px solid #c8e6c9; padding-bottom: 5px; margin-bottom: 15px; color: #2e7d32; }\r\n+    .list-group-item { border: none; border-left: 4px solid transparent; transition: all 0.3s; }\r\n+    .list-group-item:hover { background-color: #e8f5e9; border-left: 4px solid #43a047; }\r\n+    @media (max-width: 576px) { .card { margin-bottom: 1rem; } }\r\n   </style>\r\n </head>\r\n <body>\r\n \r\n@@ -138,33 +115,33 @@\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-success text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Total Students</h5>\r\n-          <p class=\"display-6\">850</p>\r\n+          <p class=\"display-6\"><?= $total_students ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-primary text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Total Teachers/Staff</h5>\r\n-          <p class=\"display-6\">45</p>\r\n+          <p class=\"display-6\"><?= $total_staff ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-dark bg-warning text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Enrolled This Semester</h5>\r\n-          <p class=\"display-6\">630</p>\r\n+          <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-info text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Programs/Courses</h5>\r\n-          <p class=\"display-6\">12</p>\r\n+          <p class=\"display-6\"><?= $programs_count ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n@@ -191,116 +168,48 @@\n                   <th>Course</th>\r\n                   <th>Status</th>\r\n                 </tr>\r\n               </thead>\r\n-             <tbody>\r\n-            <?php if (!empty($recent_students)): ?>\r\n-                <?php foreach ($recent_students as $student): ?>\r\n-                <tr>\r\n-                    <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n-                    <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n-                    <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n-                    <td><?= htmlspecialchars($student['course']) ?></td>\r\n-                    <td>\r\n-                    <?php\r\n-                        $status = strtolower($student['status']);\r\n-                        $badgeClass = 'secondary';\r\n-                        if ($status === 'enrolled') $badgeClass = 'success';\r\n-                        elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n-                        elseif ($status === 'dropped') $badgeClass = 'danger';\r\n-                    ?>\r\n-                    <span class=\"badge bg-<?= $badgeClass ?>\">\r\n-                        <?= htmlspecialchars($student['status']) ?>\r\n-                    </span>\r\n-                    </td>\r\n-                </tr>\r\n-                <?php endforeach; ?>\r\n-            <?php else: ?>\r\n-                <tr>\r\n-                <td colspan=\"5\" class=\"text-center\">No recent students found.</td>\r\n-                </tr>\r\n-            <?php endif; ?>\r\n-            </tbody>\r\n+              <tbody>\r\n+              <?php if (!empty($recent_students)): ?>\r\n+                  <?php foreach ($recent_students as $student): ?>\r\n+                  <tr>\r\n+                      <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n+                      <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n+                      <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n+                      <td><?= htmlspecialchars($student['course']) ?></td>\r\n+                      <td>\r\n+                      <?php\r\n+                          $status = strtolower($student['status']);\r\n+                          $badgeClass = 'secondary';\r\n+                          if ($status === 'enrolled') $badgeClass = 'success';\r\n+                          elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n+                          elseif ($status === 'dropped') $badgeClass = 'danger';\r\n+                      ?>\r\n+                      <span class=\"badge bg-<?= $badgeClass ?>\">\r\n+                          <?= htmlspecialchars($student['status']) ?>\r\n+                      </span>\r\n+                      </td>\r\n+                  </tr>\r\n+                  <?php endforeach; ?>\r\n+              <?php else: ?>\r\n+                  <tr><td colspan=\"5\" class=\"text-center\">No recent students found.</td></tr>\r\n+              <?php endif; ?>\r\n+              </tbody>\r\n             </table>\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n \r\n-  <div class=\"row g-4\">\r\n-    <div class=\"col-md-6\">\r\n-      <div class=\"section-title\"><h4>\r\n-        User Management\r\n-      </h4></div>\r\n-      <div class=\"list-group mb-4\">\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-admins-users.php\" class=\"list-group-item list-group-item-action\">\r\n-          Manage Admin Users\r\n-        </a>\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-registar-staff.php\" class=\"list-group-item list-group-item-action\">\r\n-          Manage Registrar/Staff\r\n-        </a>\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-students-account.php\" class=\"list-group-item list-group-item-action\">\r\n-          Manage Student Accounts\r\n-        </a>\r\n-      </div>\r\n+  <!-- Management Sections (unchanged) -->\r\n+</div>\r\n \r\n-      <div class=\"section-title\"><h4>\r\n-        Student Management\r\n-      </h4></div>\r\n-      <div class=\"list-group\">\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-all-students.php\" class=\"list-group-item list-group-item-action\">\r\n-          View All Students\r\n-        </a>\r\n-        <!-- <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/upload-student-documents.php\" class=\"list-group-item list-group-item-action\"\r\n-        >Upload Student Documents\r\n-      </a> -->\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/approve-student-registration.php\" class=\"list-group-item list-group-item-action\"\r\n-        >Approve Student Registration\r\n-      </a>\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-enrollment-history.php\" class=\"list-group-item list-group-item-action\">\r\n-          View Enrollment History\r\n-        </a>\r\n-      </div>\r\n-    </div>\r\n-\r\n-    <div class=\"col-md-6\">\r\n-      <div class=\"section-title\"><h4>\r\n-        Enrollment Management\r\n-      </h4></div>\r\n-      <div class=\"list-group mb-4\">\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/view-pending-enrollment.php\" class=\"list-group-item list-group-item-action\">\r\n-          View Pending Requests\r\n-        </a>\r\n-        <!-- <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/approve-reject-enrollment.php\" class=\"list-group-item list-group-item-action\">\r\n-          Approve/Reject Enrollment\r\n-        </a> -->\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/assign-subjects-section.php\" class=\"list-group-item list-group-item-action\">\r\n-          Assign Subjects/Sections\r\n-        </a>\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management//set-enrollment-period.php\" class=\"list-group-item list-group-item-action\">\r\n-          Set Enrollment Period\r\n-        </a>\r\n-      </div>\r\n-\r\n-      <div class=\"section-title\"><h4>\r\n-        Reports & Settings\r\n-      </h4></div>\r\n-      <div class=\"list-group\">\r\n-        <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Report&Settings/download-students-list.php\" class=\"list-group-item list-group-item-action\">\r\n-          Download Student List\r\n-        </a>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-\r\n-</div>\r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n-\r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n const courseCounts = <?= json_encode(array_column($course_data, 'total')) ?>;\r\n-\r\n new Chart(ctx, {\r\n     type: 'bar',\r\n     data: {\r\n         labels: courseLabels,\r\n@@ -315,12 +224,9 @@\n     },\r\n     options: {\r\n         responsive: true,\r\n         scales: {\r\n-            y: {\r\n-                beginAtZero: true,\r\n-                ticks: { stepSize: 1 }\r\n-            }\r\n+            y: { beginAtZero: true, ticks: { stepSize: 1 } }\r\n         },\r\n         plugins: {\r\n             legend: { display: true },\r\n             tooltip: { enabled: true }\r\n"
                },
                {
                    "date": 1748617180832,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,14 +44,8 @@\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n \r\n-if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n-    $row = $result->fetch_assoc();\r\n-    $total_staff = $row['total'] ?? 0;\r\n-    $result->free();\r\n-}\r\n-\r\n if ($result = $conn->query(\"SELECT student_number AS student_id, CONCAT(first_name, ' ', middle_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY created_at DESC LIMIT 5\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $recent_students[] = $row;\r\n     }\r\n"
                },
                {
                    "date": 1748617345759,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,50 +8,47 @@\n     exit;\r\n }\r\n $_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n+// CHECK IF LOGGED IN\r\n if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n     header(\"Location: ../ADMIN/admin-login.php\");\r\n     exit();\r\n }\r\n \r\n include '../db.php';\r\n \r\n+// Sanitize session username output\r\n $admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n \r\n+// Dashboard variables\r\n $total_students = 0;\r\n $enrolled_semester = 0;\r\n $programs_count = 0;\r\n-$total_staff = 0;\r\n $course_data = [];\r\n-$recent_students = [];\r\n \r\n+// Get total students and chart data\r\n if ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n     while ($row = $result->fetch_assoc()) {\r\n         $course_data[] = $row;\r\n         $total_students += $row['total'];\r\n     }\r\n     $result->free();\r\n }\r\n \r\n+// Enrolled this semester\r\n if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n     $row = $result->fetch_assoc();\r\n     $enrolled_semester = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n \r\n+// Programs/Courses count\r\n if ($result = $conn->query(\"SELECT COUNT(DISTINCT course) AS total FROM students\")) {\r\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n-\r\n-if ($result = $conn->query(\"SELECT student_number AS student_id, CONCAT(first_name, ' ', middle_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY created_at DESC LIMIT 5\")) {\r\n-    while ($row = $result->fetch_assoc()) {\r\n-        $recent_students[] = $row;\r\n-    }\r\n-    $result->free();\r\n-}\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n@@ -63,16 +60,48 @@\n   <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\">\r\n   <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n   <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n   <style>\r\n-    body { background-color: #f4f9f4; }\r\n-    .navbar { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }\r\n-    .card { border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05); }\r\n-    .school-logo { width: 50px; height: 50px; object-fit: cover; border-radius: 50%; margin-right: 10px; border: 2px solid #fff; }\r\n-    .section-title { border-bottom: 2px solid #c8e6c9; padding-bottom: 5px; margin-bottom: 15px; color: #2e7d32; }\r\n-    .list-group-item { border: none; border-left: 4px solid transparent; transition: all 0.3s; }\r\n-    .list-group-item:hover { background-color: #e8f5e9; border-left: 4px solid #43a047; }\r\n-    @media (max-width: 576px) { .card { margin-bottom: 1rem; } }\r\n+    body {\r\n+      background-color: #f4f9f4;\r\n+    }\r\n+    .navbar {\r\n+      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+    }\r\n+    .card {\r\n+      border-radius: 12px;\r\n+      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);\r\n+    }\r\n+    .school-logo {\r\n+      width: 50px;\r\n+      height: 50px;\r\n+      object-fit: cover;\r\n+      border-radius: 50%;\r\n+      margin-right: 10px;\r\n+      border: 2px solid #fff;\r\n+    }\r\n+    .section-title {\r\n+      border-bottom: 2px solid #c8e6c9;\r\n+      padding-bottom: 5px;\r\n+      margin-bottom: 15px;\r\n+      color: #2e7d32;\r\n+    }\r\n+    .list-group-item {\r\n+      border: none;\r\n+      border-left: 4px solid transparent;\r\n+      transition: all 0.3s;\r\n+    }\r\n+    .list-group-item:hover {\r\n+      background-color: #e8f5e9;\r\n+      border-left: 4px solid #43a047;\r\n+    }\r\n+\r\n+    @media (max-width: 576px) {\r\n+  .card {\r\n+    margin-bottom: 1rem;\r\n+  }\r\n+}\r\n+\r\n   </style>\r\n </head>\r\n <body>\r\n \r\n@@ -109,33 +138,33 @@\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-success text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Total Students</h5>\r\n-          <p class=\"display-6\"><?= $total_students ?></p>\r\n+          <p class=\"display-6\">850</p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-primary text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Total Teachers/Staff</h5>\r\n-          <p class=\"display-6\"><?= $total_staff ?></p>\r\n+          <p class=\"display-6\">45</p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-dark bg-warning text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Enrolled This Semester</h5>\r\n-          <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n+          <p class=\"display-6\">630</p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-info text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Programs/Courses</h5>\r\n-          <p class=\"display-6\"><?= $programs_count ?></p>\r\n+          <p class=\"display-6\">12</p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n@@ -162,48 +191,101 @@\n                   <th>Course</th>\r\n                   <th>Status</th>\r\n                 </tr>\r\n               </thead>\r\n-              <tbody>\r\n-              <?php if (!empty($recent_students)): ?>\r\n-                  <?php foreach ($recent_students as $student): ?>\r\n-                  <tr>\r\n-                      <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n-                      <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n-                      <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n-                      <td><?= htmlspecialchars($student['course']) ?></td>\r\n-                      <td>\r\n-                      <?php\r\n-                          $status = strtolower($student['status']);\r\n-                          $badgeClass = 'secondary';\r\n-                          if ($status === 'enrolled') $badgeClass = 'success';\r\n-                          elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n-                          elseif ($status === 'dropped') $badgeClass = 'danger';\r\n-                      ?>\r\n-                      <span class=\"badge bg-<?= $badgeClass ?>\">\r\n-                          <?= htmlspecialchars($student['status']) ?>\r\n-                      </span>\r\n-                      </td>\r\n-                  </tr>\r\n-                  <?php endforeach; ?>\r\n-              <?php else: ?>\r\n-                  <tr><td colspan=\"5\" class=\"text-center\">No recent students found.</td></tr>\r\n-              <?php endif; ?>\r\n-              </tbody>\r\n+             <tbody>\r\n+            <?php if (!empty($recent_students)): ?>\r\n+                <?php foreach ($recent_students as $student): ?>\r\n+                <tr>\r\n+                    <td><?= htmlspecialchars($student['student_id']) ?></td>\r\n+                    <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n+                    <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n+                    <td><?= htmlspecialchars($student['course']) ?></td>\r\n+                    <td>\r\n+                    <?php\r\n+                        $status = strtolower($student['status']);\r\n+                        $badgeClass = 'secondary';\r\n+                        if ($status === 'enrolled') $badgeClass = 'success';\r\n+                        elseif ($status === 'pending') $badgeClass = 'warning text-dark';\r\n+                        elseif ($status === 'dropped') $badgeClass = 'danger';\r\n+                    ?>\r\n+                    <span class=\"badge bg-<?= $badgeClass ?>\">\r\n+                        <?= htmlspecialchars($student['status']) ?>\r\n+                    </span>\r\n+                    </td>\r\n+                </tr>\r\n+                <?php endforeach; ?>\r\n+            <?php else: ?>\r\n+                <tr>\r\n+                <td colspan=\"5\" class=\"text-center\">No recent students found.</td>\r\n+                </tr>\r\n+            <?php endif; ?>\r\n+            </tbody>\r\n             </table>\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n \r\n-  <!-- Management Sections (unchanged) -->\r\n+<div class=\"row g-4\">\r\n+  <div class=\"col-md-6\">\r\n+    <div class=\"section-title\"><h4>User Management</h4></div>\r\n+    <div class=\"list-group mb-4\">\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-admins-users.php\" class=\"list-group-item list-group-item-action\">\r\n+        Manage Admin Users\r\n+      </a>\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-registar-staff.php\" class=\"list-group-item list-group-item-action\">\r\n+        Manage Registrar/Staff\r\n+      </a>\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/User_Management/manage-students-account.php\" class=\"list-group-item list-group-item-action\">\r\n+        Manage Student Accounts\r\n+      </a>\r\n+    </div>\r\n+\r\n+    <div class=\"section-title\"><h4>Student Management</h4></div>\r\n+    <div class=\"list-group\">\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-all-students.php\" class=\"list-group-item list-group-item-action\">\r\n+        View All Students\r\n+      </a>\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/approve-student-registration.php\" class=\"list-group-item list-group-item-action\">\r\n+        Approve Student Registration\r\n+      </a>\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-enrollment-history.php\" class=\"list-group-item list-group-item-action\">\r\n+        View Enrollment History\r\n+      </a>\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <div class=\"col-md-6\">\r\n+    <div class=\"section-title\"><h4>Enrollment Management</h4></div>\r\n+    <div class=\"list-group mb-4\">\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/view-pending-enrollment.php\" class=\"list-group-item list-group-item-action\">\r\n+        View Pending Requests\r\n+      </a>\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/assign-subjects-section.php\" class=\"list-group-item list-group-item-action\">\r\n+        Assign Subjects/Sections\r\n+      </a>\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Enrollment_Management/set-enrollment-period.php\" class=\"list-group-item list-group-item-action\">\r\n+        Set Enrollment Period\r\n+      </a>\r\n+    </div>\r\n+\r\n+    <div class=\"section-title\"><h4>Reports & Settings</h4></div>\r\n+    <div class=\"list-group\">\r\n+      <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Report&Settings/download-students-list.php\" class=\"list-group-item list-group-item-action\">\r\n+        Download Student List\r\n+      </a>\r\n+    </div>\r\n+  </div>\r\n </div>\r\n-\r\n+</div>\r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n+\r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n const courseCounts = <?= json_encode(array_column($course_data, 'total')) ?>;\r\n+\r\n new Chart(ctx, {\r\n     type: 'bar',\r\n     data: {\r\n         labels: courseLabels,\r\n@@ -218,9 +300,12 @@\n     },\r\n     options: {\r\n         responsive: true,\r\n         scales: {\r\n-            y: { beginAtZero: true, ticks: { stepSize: 1 } }\r\n+            y: {\r\n+                beginAtZero: true,\r\n+                ticks: { stepSize: 1 }\r\n+            }\r\n         },\r\n         plugins: {\r\n             legend: { display: true },\r\n             tooltip: { enabled: true }\r\n"
                },
                {
                    "date": 1748617421843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -278,8 +278,13 @@\n     </div>\r\n   </div>\r\n </div>\r\n </div>\r\n+\r\n+ <footer>\r\n+    &copy; <?php echo date('Y'); ?> Enrollment System. All rights reserved.\r\n+  </footer>\r\n+  \r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n \r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n"
                },
                {
                    "date": 1748617481520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,8 +94,17 @@\n       background-color: #e8f5e9;\r\n       border-left: 4px solid #43a047;\r\n     }\r\n \r\n+        footer {\r\n+      margin-top: auto;\r\n+      padding: 1rem 0;\r\n+      background-color: #2e7d32;\r\n+      color: #fff;\r\n+      text-align: center;\r\n+      font-size: 0.9rem;\r\n+    }\r\n+\r\n     @media (max-width: 576px) {\r\n   .card {\r\n     margin-bottom: 1rem;\r\n   }\r\n@@ -282,9 +291,9 @@\n \r\n  <footer>\r\n     &copy; <?php echo date('Y'); ?> Enrollment System. All rights reserved.\r\n   </footer>\r\n-  \r\n+\r\n <script>\r\n const ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n \r\n const courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\n"
                },
                {
                    "date": 1748617790303,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,9 +147,9 @@\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-success text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Total Students</h5>\r\n-          <p class=\"display-6\">850</p>\r\n+          <p class=\"display-6\"><?= $total_students ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n"
                },
                {
                    "date": 1748617800989,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,9 +155,9 @@\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-primary text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Total Teachers/Staff</h5>\r\n-          <p class=\"display-6\">45</p>\r\n+          <p class=\"display-6\"><?= $total_staff ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n"
                },
                {
                    "date": 1748617815360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,9 +163,9 @@\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-dark bg-warning text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Enrolled This Semester</h5>\r\n-          <p class=\"display-6\">630</p>\r\n+          <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n     <div class=\"col-md-3 col-sm-6\">\r\n"
                },
                {
                    "date": 1748617837418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,9 +171,9 @@\n     <div class=\"col-md-3 col-sm-6\">\r\n       <div class=\"card text-white bg-info text-center\">\r\n         <div class=\"card-body\">\r\n           <h5>Programs/Courses</h5>\r\n-          <p class=\"display-6\">12</p>\r\n+          <p class=\"display-6\"><?= $programs_count ?></p>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n"
                },
                {
                    "date": 1748617932351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,8 +47,15 @@\n     $row = $result->fetch_assoc();\r\n     $programs_count = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n+$total_staff = 0;\r\n+if ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n+    $row = $result->fetch_assoc();\r\n+    $total_staff = $row['total'] ?? 0;\r\n+    $result->free();\r\n+}\r\n+\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n"
                },
                {
                    "date": 1748618531517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,12 @@\n \r\n   </style>\r\n </head>\r\n <body>\r\n-\r\n+<?php\r\n+$display_admin = $_SESSION['admin_username'] ?? 'Admin';\r\n+?>\r\n+Admin (<?= htmlspecialchars($display_admin) ?>)\r\n <nav class=\"navbar navbar-expand-lg navbar-dark bg-success py-3\">\r\n   <div class=\"container-fluid\">\r\n     <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n       <img src=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n"
                },
                {
                    "date": 1748618553231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,12 +119,12 @@\n \r\n   </style>\r\n </head>\r\n <body>\r\n-<?php\r\n-$display_admin = $_SESSION['admin_username'] ?? 'Admin';\r\n-?>\r\n-Admin (<?= htmlspecialchars($display_admin) ?>)\r\n+    <?php\r\n+    $display_admin = $_SESSION['admin_username'] ?? 'Admin';\r\n+    ?>\r\n+    Admin (<?= htmlspecialchars($display_admin) ?>)\r\n <nav class=\"navbar navbar-expand-lg navbar-dark bg-success py-3\">\r\n   <div class=\"container-fluid\">\r\n     <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n       <img src=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n"
                },
                {
                    "date": 1748618715935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,8 @@\n     $row = $result->fetch_assoc();\r\n     $total_staff = $row['total'] ?? 0;\r\n     $result->free();\r\n }\r\n-\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n@@ -119,12 +118,12 @@\n \r\n   </style>\r\n </head>\r\n <body>\r\n-    <?php\r\n-    $display_admin = $_SESSION['admin_username'] ?? 'Admin';\r\n-    ?>\r\n-    Admin (<?= htmlspecialchars($display_admin) ?>)\r\n+\r\n+<?php\r\n+$display_admin = $_SESSION['admin_username'] ?? 'Admin';\r\n+?>\r\n <nav class=\"navbar navbar-expand-lg navbar-dark bg-success py-3\">\r\n   <div class=\"container-fluid\">\r\n     <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n       <img src=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\r\n@@ -137,9 +136,9 @@\n       <ul class=\"navbar-nav\">\r\n         <li class=\"nav-item\"><a class=\"nav-link\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/HelpDesk.php\">Help Desk</a></li>\r\n         <li class=\"nav-item dropdown\">\r\n           <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n-            Admin (<?= htmlspecialchars($_SESSION['admin_username']) ?>)\r\n+            Admin (<?= htmlspecialchars($display_admin) ?>)\r\n           </a>\r\n           <ul class=\"dropdown-menu dropdown-menu-end\">\r\n             <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n             <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n"
                },
                {
                    "date": 1748618882807,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,9 @@\n           <ul class=\"dropdown-menu dropdown-menu-end\">\r\n             <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n             <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n             <li><hr class=\"dropdown-divider\"></li>\r\n-            <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/logout.php\">Logout</a></li>\r\n+            <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/admin-logout.php\">Logout</a></li>\r\n           </ul>\r\n         </li>\r\n       </ul>\r\n     </div>\r\n"
                }
            ],
            "date": 1748595508944,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\n$timeout = 900;\r\nif (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n    session_unset();\r\n    session_destroy();\r\n    header(\"Location: ../logregfor/login.php\");\r\n    exit;\r\n}\r\n$_SESSION['LAST_ACTIVITY'] = time();\r\n\r\n// CHECK IF LOGGED IN\r\nif (!isset($_SESSION['admin_logged_in'])) {\r\n    header(\"Location: ../logregfor/login.php\");\r\n    exit;\r\n}\r\n\r\ninclude '../db.php';\r\n\r\n// Sanitize session username output\r\n$admin_username = htmlspecialchars($_SESSION['admin_username'] ?? 'Admin');\r\n\r\n// Queries\r\n$total_students = 0;\r\n$total_staff = 0;\r\n$enrolled_semester = 0;\r\n$programs_count = 0;\r\n$course_data = [];\r\n\r\n// Total Students (counted during course grouping)\r\nif ($result = $conn->query(\"SELECT course, COUNT(*) AS total FROM students GROUP BY course\")) {\r\n    while ($row = $result->fetch_assoc()) {\r\n        $course_data[] = $row;\r\n        $total_students += $row['total']; // total students from grouped data\r\n    }\r\n    $result->free();\r\n}\r\n\r\n// Total Staff\r\nif ($result = $conn->query(\"SELECT COUNT(*) AS total FROM staff\")) {\r\n    $row = $result->fetch_assoc();\r\n    $total_staff = $row['total'] ?? 0;\r\n    $result->free();\r\n}\r\n\r\n// Enrolled this semester (status='Enrolled')\r\nif ($result = $conn->query(\"SELECT COUNT(*) AS total FROM students WHERE status = 'Enrolled'\")) {\r\n    $row = $result->fetch_assoc();\r\n    $enrolled_semester = $row['total'] ?? 0;\r\n    $result->free();\r\n}\r\n\r\n// Programs/Courses count (distinct)\r\nif ($result = $conn->query(\"SELECT COUNT(DISTINCT course) AS total FROM students\")) {\r\n    $row = $result->fetch_assoc();\r\n    $programs_count = $row['total'] ?? 0;\r\n    $result->free();\r\n}\r\n?>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n    <title>Admin Dashboard - Enrollment System</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\" rel=\"stylesheet\" />\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n    <link rel=\"icon\" href=\"favicon.ico\" type=\"image/x-icon\">\r\n    <style>\r\n        body { background-color: #f4f9f4; }\r\n        .navbar { box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n        .card { border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }\r\n        .school-logo { width: 50px; height: 50px; object-fit: cover; border-radius: 50%; margin-right: 10px; border: 2px solid #fff; }\r\n        .section-title { border-bottom: 2px solid #c8e6c9; padding-bottom: 5px; margin-bottom: 15px; color: #2e7d32; }\r\n        .list-group-item { border: none; border-left: 4px solid transparent; transition: all 0.3s; }\r\n        .list-group-item:hover { background-color: #e8f5e9; border-left: 4px solid #43a047; }\r\n        @media (max-width: 576px) { .card { margin-bottom: 1rem; } }\r\n    </style>\r\n</head>\r\n<body>\r\n\r\n<nav class=\"navbar navbar-expand-lg navbar-dark bg-success py-3\">\r\n    <div class=\"container-fluid\">\r\n        <a class=\"navbar-brand d-flex align-items-center\" href=\"#\">\r\n            <img src=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\" />\r\n            Admin Panel\r\n        </a>\r\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNavDropdown\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div class=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavDropdown\">\r\n            <ul class=\"navbar-nav\">\r\n                <li class=\"nav-item\"><a class=\"nav-link\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/HelpDesk.php\">Help Desk</a></li>\r\n                <li class=\"nav-item dropdown\">\r\n                    <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                        Admin (<?= $admin_username ?>)\r\n                    </a>\r\n                    <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                        <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/settings.php\">Settings</a></li>\r\n                        <li><a class=\"dropdown-item\" href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/helpdeskAdminProfileSettings/profile.php\">Profile</a></li>\r\n                        <li><hr class=\"dropdown-divider\"></li>\r\n                        <li><a class=\"dropdown-item text-danger\" href=\"/IT2C_Enrollment_System_SourceCode/logregfor/logout.php\">Logout</a></li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</nav>\r\n\r\n<div class=\"container my-5\">\r\n\r\n    <div class=\"row g-4 mb-5\">\r\n        <div class=\"col-md-3 col-sm-6\">\r\n            <div class=\"card text-white bg-success text-center\">\r\n                <div class=\"card-body\">\r\n                    <h5>Total Students</h5>\r\n                    <p class=\"display-6\"><?= $total_students ?></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-md-3 col-sm-6\">\r\n            <div class=\"card text-white bg-primary text-center\">\r\n                <div class=\"card-body\">\r\n                    <h5>Total Staff</h5>\r\n                    <p class=\"display-6\"><?= $total_staff ?></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-md-3 col-sm-6\">\r\n            <div class=\"card text-dark bg-warning text-center\">\r\n                <div class=\"card-body\">\r\n                    <h5>Enrolled This Semester</h5>\r\n                    <p class=\"display-6\"><?= $enrolled_semester ?></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-md-3 col-sm-6\">\r\n            <div class=\"card text-white bg-info text-center\">\r\n                <div class=\"card-body\">\r\n                    <h5>Programs/Courses</h5>\r\n                    <p class=\"display-6\"><?= $programs_count ?></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Chart -->\r\n    <div class=\"row mb-5\">\r\n        <div class=\"col\">\r\n            <canvas id=\"enrollmentChart\" height=\"100\"></canvas>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Recent Students -->\r\n    <div class=\"row mb-5\">\r\n        <div class=\"col\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header bg-primary text-white d-flex justify-content-between align-items-center\">\r\n                    <h5 class=\"mb-0\">Recent Student List</h5>\r\n                    <a href=\"/IT2C_Enrollment_System_SourceCode/ADMIN/Student_Management/view-all-students.php\" class=\"btn btn-sm btn-light\">View All</a>\r\n                </div>\r\n                <div class=\"card-body p-0\">\r\n                    <div class=\"table-responsive\">\r\n                        <table class=\"table table-hover mb-0\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Student Number</th>\r\n                                    <th>Full Name</th>\r\n                                    <th>Year Level</th>\r\n                                    <th>Course</th>\r\n                                    <th>Status</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <?php\r\n                                $recent_students = $conn->query(\"SELECT student_number, CONCAT(first_name, ' ', last_name) AS full_name, year_level, course, status FROM students ORDER BY student_id DESC LIMIT 3\");\r\n                                if ($recent_students) {\r\n                                    while ($student = $recent_students->fetch_assoc()):\r\n                                        $status = $student['status'];\r\n                                        $badge_class = 'bg-secondary';\r\n                                        if ($status == 'Enrolled') $badge_class = 'bg-success';\r\n                                        else if ($status == 'Pending') $badge_class = 'bg-warning text-dark';\r\n                                        else if ($status == 'Dropped') $badge_class = 'bg-danger';\r\n                                ?>\r\n                                    <tr>\r\n                                        <td><?= htmlspecialchars($student['student_number']) ?></td>\r\n                                        <td><?= htmlspecialchars($student['full_name']) ?></td>\r\n                                        <td><?= htmlspecialchars($student['year_level']) ?></td>\r\n                                        <td><?= htmlspecialchars($student['course']) ?></td>\r\n                                        <td><span class=\"badge <?= $badge_class ?>\"><?= htmlspecialchars($status) ?></span></td>\r\n                                    </tr>\r\n                                <?php\r\n                                    endwhile;\r\n                                    $recent_students->free();\r\n                                } else {\r\n                                    echo '<tr><td colspan=\"5\" class=\"text-center\">No recent students found.</td></tr>';\r\n                                }\r\n                                ?>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<script>\r\nconst ctx = document.getElementById('enrollmentChart').getContext('2d');\r\n\r\nconst courseLabels = <?= json_encode(array_column($course_data, 'course')) ?>;\r\nconst courseCounts = <?= json_encode(array_column($course_data, 'total')) ?>;\r\n\r\nnew Chart(ctx, {\r\n    type: 'bar',\r\n    data: {\r\n        labels: courseLabels,\r\n        datasets: [{\r\n            label: 'Students per Program',\r\n            data: courseCounts,\r\n            backgroundColor: 'rgba(75, 192, 192, 0.7)',\r\n            borderColor: 'rgba(75, 192, 192, 1)',\r\n            borderWidth: 1,\r\n            borderRadius: 5\r\n        }]\r\n    },\r\n    options: {\r\n        responsive: true,\r\n        scales: {\r\n            y: {\r\n                beginAtZero: true,\r\n                ticks: { stepSize: 1 }\r\n            }\r\n        },\r\n        plugins: {\r\n            legend: { display: true },\r\n            tooltip: { enabled: true }\r\n        }\r\n    }\r\n});\r\n</script>\r\n\r\n</body>\r\n</html>\r\n"
        }
    ]
}