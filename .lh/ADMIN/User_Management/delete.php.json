{
    "sourceFile": "ADMIN/User_Management/delete.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 14,
            "patches": [
                {
                    "date": 1748621786714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748622804589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-include '../db.php';\r\n+include '../../db.php';\r\n \r\n if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n   $id = $_POST['id'];\r\n \r\n"
                },
                {
                    "date": 1748622920106,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,17 @@\n <?php\r\n include '../../db.php';\r\n \r\n if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-  $id = $_POST['id'];\r\n+    $id = $_POST['id'];\r\n \r\n-  $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id=?\");\r\n-  $stmt->bind_param(\"i\", $id);\r\n-  $stmt->execute();\r\n-  header(\"Location: manage-admins.php?status=deleted\");\r\n+    $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n+    $stmt->bind_param(\"i\", $id);\r\n+\r\n+    if ($stmt->execute()) {\r\n+        header(\"Location: manage-admin.php?success=deleted\");\r\n+        exit;\r\n+    } else {\r\n+        echo \"Failed to delete admin.\";\r\n+    }\r\n }\r\n+?>\r\n"
                },
                {
                    "date": 1748623216749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,15 +1,15 @@\n <?php\r\n-include '../../db.php';\r\n+include '../db.php'; // adjust path\r\n \r\n if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n     $id = $_POST['id'];\r\n \r\n     $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n     $stmt->bind_param(\"i\", $id);\r\n \r\n     if ($stmt->execute()) {\r\n-        header(\"Location: manage-admin.php?success=deleted\");\r\n+        header(\"Location: manage-admins-users.php?success=deleted\");\r\n         exit;\r\n     } else {\r\n         echo \"Failed to delete admin.\";\r\n     }\r\n"
                },
                {
                    "date": 1748623279544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-include '../db.php'; // adjust path\r\n+include '../../db.php'; // adjust path\r\n \r\n if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n     $id = $_POST['id'];\r\n \r\n"
                },
                {
                    "date": 1748624024904,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n <?php\r\n-include '../../db.php'; // adjust path\r\n+include '../../db.php';\r\n \r\n if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n     $id = $_POST['id'];\r\n \r\n     $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n     $stmt->bind_param(\"i\", $id);\r\n \r\n     if ($stmt->execute()) {\r\n-        header(\"Location: manage-admins-users.php?success=deleted\");\r\n+        header(\"Location: manage-admin-users.php\");\r\n         exit;\r\n     } else {\r\n-        echo \"Failed to delete admin.\";\r\n+        echo \"<script>alert('Error deleting admin: \" . $conn->error . \"'); window.history.back();</script>\";\r\n     }\r\n }\r\n ?>\r\n"
                },
                {
                    "date": 1748629289695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,23 @@\n <?php\r\n-include '../../db.php';\r\n+include '../../db.php'; // Ensure you're including the correct database connection\r\n \r\n-if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-    $id = $_POST['id'];\r\n-\r\n-    $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n-    $stmt->bind_param(\"i\", $id);\r\n-\r\n-    if ($stmt->execute()) {\r\n-        header(\"Location: manage-admin-users.php\");\r\n-        exit;\r\n-    } else {\r\n-        echo \"<script>alert('Error deleting admin: \" . $conn->error . \"'); window.history.back();</script>\";\r\n-    }\r\n+if (isset($_POST['id'])) {\r\n+  // Sanitize the ID to prevent SQL injection\r\n+  $id = intval($_POST['id']);\r\n+  \r\n+  // Perform the deletion\r\n+  $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n+  $stmt->bind_param(\"i\", $id);\r\n+  \r\n+  if ($stmt->execute()) {\r\n+    // Redirect back to the manage admin users page after deleting\r\n+    header(\"Location: manage-admins-users.php\");\r\n+    exit();\r\n+  } else {\r\n+    echo \"Error deleting record: \" . $conn->error; // Output any error if the delete fails\r\n+  }\r\n+  $stmt->close();\r\n+} else {\r\n+  echo \"No ID provided\"; // Handle case where no ID is passed\r\n }\r\n ?>\r\n"
                },
                {
                    "date": 1748629566720,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n   $stmt->bind_param(\"i\", $id);\r\n   \r\n   if ($stmt->execute()) {\r\n     // Redirect back to the manage admin users page after deleting\r\n-    header(\"Location: manage-admins-users.php\");\r\n+    header(\"Location: ../manage-admins-users.php\");\r\n     exit();\r\n   } else {\r\n     echo \"Error deleting record: \" . $conn->error; // Output any error if the delete fails\r\n   }\r\n"
                },
                {
                    "date": 1748629577076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n   $stmt->bind_param(\"i\", $id);\r\n   \r\n   if ($stmt->execute()) {\r\n     // Redirect back to the manage admin users page after deleting\r\n-    header(\"Location: ../manage-admins-users.php\");\r\n+    header(\"Location: ../../manage-admins-users.php\");\r\n     exit();\r\n   } else {\r\n     echo \"Error deleting record: \" . $conn->error; // Output any error if the delete fails\r\n   }\r\n"
                },
                {
                    "date": 1748629626593,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n   $stmt->bind_param(\"i\", $id);\r\n   \r\n   if ($stmt->execute()) {\r\n     // Redirect back to the manage admin users page after deleting\r\n-    header(\"Location: ../../manage-admins-users.php\");\r\n+    header(\"Location: manage-admins-users.php\");\r\n     exit();\r\n   } else {\r\n     echo \"Error deleting record: \" . $conn->error; // Output any error if the delete fails\r\n   }\r\n"
                },
                {
                    "date": 1748629729988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,22 @@\n <?php\r\n-include '../../db.php'; // Ensure you're including the correct database connection\r\n+include '../../db.php';\r\n \r\n-if (isset($_POST['id'])) {\r\n-  // Sanitize the ID to prevent SQL injection\r\n-  $id = intval($_POST['id']);\r\n-  \r\n-  // Perform the deletion\r\n-  $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n-  $stmt->bind_param(\"i\", $id);\r\n-  \r\n-  if ($stmt->execute()) {\r\n-    // Redirect back to the manage admin users page after deleting\r\n-    header(\"Location: manage-admins-users.php\");\r\n-    exit();\r\n-  } else {\r\n-    echo \"Error deleting record: \" . $conn->error; // Output any error if the delete fails\r\n-  }\r\n-  $stmt->close();\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+    $id = $_POST['id'];\r\n+\r\n+    if (!empty($id)) {\r\n+        $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n+        $stmt->bind_param(\"i\", $id);\r\n+\r\n+        if ($stmt->execute()) {\r\n+            header(\"Location: manage-admins-users.php\"); // redirect back\r\n+            exit;\r\n+        } else {\r\n+            echo \"Error deleting record: \" . $conn->error;\r\n+        }\r\n+    } else {\r\n+        echo \"Invalid ID.\";\r\n+    }\r\n } else {\r\n-  echo \"No ID provided\"; // Handle case where no ID is passed\r\n+    echo \"Invalid request.\";\r\n }\r\n-?>\r\n"
                },
                {
                    "date": 1748650247146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,19 @@\n <?php\r\n-include '../../db.php';\r\n+include '../../db.php'; // Ensure the correct database connection\r\n \r\n-if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-    $id = $_POST['id'];\r\n-\r\n-    if (!empty($id)) {\r\n-        $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n-        $stmt->bind_param(\"i\", $id);\r\n-\r\n-        if ($stmt->execute()) {\r\n-            header(\"Location: manage-admins-users.php\"); // redirect back\r\n-            exit;\r\n-        } else {\r\n-            echo \"Error deleting record: \" . $conn->error;\r\n-        }\r\n-    } else {\r\n-        echo \"Invalid ID.\";\r\n-    }\r\n+if (isset($_POST['id'])) {\r\n+  $id = intval($_POST['id']); // Get the ID passed via POST\r\n+  $sql = \"DELETE FROM registrar_staff WHERE id = ?\";\r\n+  $stmt = $conn->prepare($sql);\r\n+  $stmt->bind_param(\"i\", $id); // Bind the ID as an integer\r\n+  if ($stmt->execute()) {\r\n+    header(\"Location: manage-register-staff.php\"); // Redirect after successful deletion\r\n+    exit();\r\n+  } else {\r\n+    echo \"Error deleting record: \" . $conn->error; // If there's an error with the delete query\r\n+  }\r\n+  $stmt->close();\r\n } else {\r\n-    echo \"Invalid request.\";\r\n+  echo \"ID not provided.\"; // If no ID is passed\r\n }\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748650589801,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,22 @@\n <?php\r\n-include '../../db.php'; // Ensure the correct database connection\r\n+include '../../db.php';\r\n \r\n-if (isset($_POST['id'])) {\r\n-  $id = intval($_POST['id']); // Get the ID passed via POST\r\n-  $sql = \"DELETE FROM registrar_staff WHERE id = ?\";\r\n-  $stmt = $conn->prepare($sql);\r\n-  $stmt->bind_param(\"i\", $id); // Bind the ID as an integer\r\n-  if ($stmt->execute()) {\r\n-    header(\"Location: manage-register-staff.php\"); // Redirect after successful deletion\r\n-    exit();\r\n-  } else {\r\n-    echo \"Error deleting record: \" . $conn->error; // If there's an error with the delete query\r\n-  }\r\n-  $stmt->close();\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+    $id = $_POST['id'];\r\n+\r\n\\ No newline at end of file\n+    if (!empty($id)) {\r\n+        $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id = ?\");\r\n+        $stmt->bind_param(\"i\", $id);\r\n+\r\n+        if ($stmt->execute()) {\r\n+            header(\"Location: manage-admins-users.php\"); // redirect back\r\n+            exit;\r\n+        } else {\r\n+            echo \"Error deleting record: \" . $conn->error;\r\n+        }\r\n+    } else {\r\n+        echo \"Invalid ID.\";\r\n+    }\r\n } else {\r\n-  echo \"ID not provided.\"; // If no ID is passed\r\n+    echo \"Invalid request.\";\r\n }\r\n-?>\n"
                },
                {
                    "date": 1748650590681,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,5 +18,5 @@\n         echo \"Invalid ID.\";\r\n     }\r\n } else {\r\n     echo \"Invalid request.\";\r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1748651483161,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,5 +18,5 @@\n         echo \"Invalid ID.\";\r\n     }\r\n } else {\r\n     echo \"Invalid request.\";\r\n-}\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1748621786714,
            "name": "Commit-0",
            "content": "<?php\r\ninclude '../db.php';\r\n\r\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n  $id = $_POST['id'];\r\n\r\n  $stmt = $conn->prepare(\"DELETE FROM admin_settings WHERE id=?\");\r\n  $stmt->bind_param(\"i\", $id);\r\n  $stmt->execute();\r\n  header(\"Location: manage-admins.php?status=deleted\");\r\n}\r\n"
        }
    ]
}