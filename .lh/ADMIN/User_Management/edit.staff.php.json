{
    "sourceFile": "ADMIN/User_Management/edit.staff.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 12,
            "patches": [
                {
                    "date": 1748624709545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748624717855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <?php\r\n include 'db.php';\r\n if (isset($_GET['id'])) {\r\n   $id = intval($_GET['id']);\r\n-  $conn->query(\"DELETE FROM staff WHERE id = $id\");\r\n+  $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n header(\"Location: manage-staff.php\"); // Go back to the main page\r\n exit();\r\n ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748624759096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-include 'db.php';\r\n+include '../../db.php';\r\n if (isset($_GET['id'])) {\r\n   $id = intval($_GET['id']);\r\n   $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n"
                },
                {
                    "date": 1748624906097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-include '../../db.php';\r\n+include '../db.php';\r\n if (isset($_GET['id'])) {\r\n   $id = intval($_GET['id']);\r\n   $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n"
                },
                {
                    "date": 1748624938375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,7 +3,7 @@\n if (isset($_GET['id'])) {\r\n   $id = intval($_GET['id']);\r\n   $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n-header(\"Location: manage-staff.php\"); // Go back to the main page\r\n+header(\"Location: manage-register-staff.php\"); // Go back to the main page\r\n exit();\r\n ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748625109839,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-include '../db.php';\r\n+include '../../db.php';\r\n if (isset($_GET['id'])) {\r\n   $id = intval($_GET['id']);\r\n   $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n"
                },
                {
                    "date": 1748627215738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,74 @@\n <?php\r\n include '../../db.php';\r\n-if (isset($_GET['id'])) {\r\n-  $id = intval($_GET['id']);\r\n-  $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n+\r\n+$id = $_GET['id'] ?? null;\r\n+if (!$id) {\r\n+    die('Invalid ID.');\r\n\\ No newline at end of file\n }\r\n-header(\"Location: manage-register-staff.php\"); // Go back to the main page\r\n-exit();\r\n-?>\n+\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+    $name = $_POST['staffName'];\r\n+    $email = $_POST['staffEmail'];\r\n+    $position = $_POST['staffPosition'];\r\n+    $status = $_POST['staffStatus'];\r\n+\r\n+    $stmt = $conn->prepare(\"UPDATE registrar_staff SET name=?, email=?, position=?, status=? WHERE id=?\");\r\n+    $stmt->bind_param(\"ssssi\", $name, $email, $position, $status, $id);\r\n+    $stmt->execute();\r\n+    $stmt->close();\r\n+\r\n+    header(\"Location: manage-registar-staff.php\");\r\n+    exit();\r\n+}\r\n+\r\n+$stmt = $conn->prepare(\"SELECT * FROM registrar_staff WHERE id=?\");\r\n+$stmt->bind_param(\"i\", $id);\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$staff = $result->fetch_assoc();\r\n+$stmt->close();\r\n+\r\n+if (!$staff) {\r\n+    die('Staff not found.');\r\n+}\r\n+?>\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+  <meta charset=\"UTF-8\">\r\n+  <title>Edit Staff</title>\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n+</head>\r\n+<body class=\"bg-light\">\r\n+  <div class=\"container mt-5\">\r\n+    <h3>Edit Staff</h3>\r\n+    <form method=\"POST\" class=\"needs-validation\" novalidate>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Full Name</label>\r\n+        <input type=\"text\" name=\"staffName\" class=\"form-control\" required value=\"<?= htmlspecialchars($staff['name']) ?>\">\r\n+      </div>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Email</label>\r\n+        <input type=\"email\" name=\"staffEmail\" class=\"form-control\" required value=\"<?= htmlspecialchars($staff['email']) ?>\">\r\n+      </div>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Position</label>\r\n+        <select name=\"staffPosition\" class=\"form-select\" required>\r\n+          <option value=\"Registrar\" <?= $staff['position'] === 'Registrar' ? 'selected' : '' ?>>Registrar</option>\r\n+          <option value=\"Enrollment Staff\" <?= $staff['position'] === 'Enrollment Staff' ? 'selected' : '' ?>>Enrollment Staff</option>\r\n+          <option value=\"Teacher\" <?= $staff['position'] === 'Teacher' ? 'selected' : '' ?>>Teacher</option>\r\n+        </select>\r\n+      </div>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Status</label>\r\n+        <select name=\"staffStatus\" class=\"form-select\" required>\r\n+          <option value=\"Active\" <?= $staff['status'] === 'Active' ? 'selected' : '' ?>>Active</option>\r\n+          <option value=\"Inactive\" <?= $staff['status'] === 'Inactive' ? 'selected' : '' ?>>Inactive</option>\r\n+        </select>\r\n+      </div>\r\n+      <button type=\"submit\" class=\"btn btn-success\">Update</button>\r\n+      <a href=\"manage-registar-staff.php\" class=\"btn btn-secondary\">Cancel</a>\r\n+    </form>\r\n+  </div>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1748627216105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,5 +70,5 @@\n       <a href=\"manage-registar-staff.php\" class=\"btn btn-secondary\">Cancel</a>\r\n     </form>\r\n   </div>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1748627229001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,74 +1,9 @@\n <?php\r\n include '../../db.php';\r\n-\r\n-$id = $_GET['id'] ?? null;\r\n-if (!$id) {\r\n-    die('Invalid ID.');\r\n+if (isset($_GET['id'])) {\r\n+  $id = intval($_GET['id']);\r\n+  $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n-\r\n-if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-    $name = $_POST['staffName'];\r\n-    $email = $_POST['staffEmail'];\r\n-    $position = $_POST['staffPosition'];\r\n-    $status = $_POST['staffStatus'];\r\n-\r\n-    $stmt = $conn->prepare(\"UPDATE registrar_staff SET name=?, email=?, position=?, status=? WHERE id=?\");\r\n-    $stmt->bind_param(\"ssssi\", $name, $email, $position, $status, $id);\r\n-    $stmt->execute();\r\n-    $stmt->close();\r\n-\r\n-    header(\"Location: manage-registar-staff.php\");\r\n-    exit();\r\n-}\r\n-\r\n-$stmt = $conn->prepare(\"SELECT * FROM registrar_staff WHERE id=?\");\r\n-$stmt->bind_param(\"i\", $id);\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$staff = $result->fetch_assoc();\r\n-$stmt->close();\r\n-\r\n-if (!$staff) {\r\n-    die('Staff not found.');\r\n-}\r\n-?>\r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-  <meta charset=\"UTF-8\">\r\n-  <title>Edit Staff</title>\r\n-  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n-</head>\r\n-<body class=\"bg-light\">\r\n-  <div class=\"container mt-5\">\r\n-    <h3>Edit Staff</h3>\r\n-    <form method=\"POST\" class=\"needs-validation\" novalidate>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Full Name</label>\r\n-        <input type=\"text\" name=\"staffName\" class=\"form-control\" required value=\"<?= htmlspecialchars($staff['name']) ?>\">\r\n-      </div>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Email</label>\r\n-        <input type=\"email\" name=\"staffEmail\" class=\"form-control\" required value=\"<?= htmlspecialchars($staff['email']) ?>\">\r\n-      </div>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Position</label>\r\n-        <select name=\"staffPosition\" class=\"form-select\" required>\r\n-          <option value=\"Registrar\" <?= $staff['position'] === 'Registrar' ? 'selected' : '' ?>>Registrar</option>\r\n-          <option value=\"Enrollment Staff\" <?= $staff['position'] === 'Enrollment Staff' ? 'selected' : '' ?>>Enrollment Staff</option>\r\n-          <option value=\"Teacher\" <?= $staff['position'] === 'Teacher' ? 'selected' : '' ?>>Teacher</option>\r\n-        </select>\r\n-      </div>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Status</label>\r\n-        <select name=\"staffStatus\" class=\"form-select\" required>\r\n-          <option value=\"Active\" <?= $staff['status'] === 'Active' ? 'selected' : '' ?>>Active</option>\r\n-          <option value=\"Inactive\" <?= $staff['status'] === 'Inactive' ? 'selected' : '' ?>>Inactive</option>\r\n-        </select>\r\n-      </div>\r\n-      <button type=\"submit\" class=\"btn btn-success\">Update</button>\r\n-      <a href=\"manage-registar-staff.php\" class=\"btn btn-secondary\">Cancel</a>\r\n-    </form>\r\n-  </div>\r\n-</body>\r\n-</html>\r\n+header(\"Location: manage-register-staff.php\"); // Go back to the main page\r\n+exit();\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748628176863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,81 @@\n <?php\r\n include '../../db.php';\r\n-if (isset($_GET['id'])) {\r\n-  $id = intval($_GET['id']);\r\n-  $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n+\r\n+if (!isset($_GET['id'])) {\r\n+  header(\"Location: manage-register-staff.php\");\r\n+  exit();\r\n\\ No newline at end of file\n }\r\n-header(\"Location: manage-register-staff.php\"); // Go back to the main page\r\n-exit();\r\n-?>\n+\r\n+$id = intval($_GET['id']);\r\n+\r\n+// Fetch existing staff info\r\n+$stmt = $conn->prepare(\"SELECT * FROM registrar_staff WHERE id = ?\");\r\n+$stmt->bind_param(\"i\", $id);\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$staff = $result->fetch_assoc();\r\n+$stmt->close();\r\n+\r\n+if (!$staff) {\r\n+  echo \"Staff not found.\";\r\n+  exit();\r\n+}\r\n+\r\n+// Update logic\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+  $name = $_POST['staffName'];\r\n+  $email = $_POST['staffEmail'];\r\n+  $position = $_POST['staffPosition'];\r\n+  $status = $_POST['staffStatus'];\r\n+\r\n+  $stmt = $conn->prepare(\"UPDATE registrar_staff SET name=?, email=?, position=?, status=? WHERE id=?\");\r\n+  $stmt->bind_param(\"ssssi\", $name, $email, $position, $status, $id);\r\n+  $stmt->execute();\r\n+  $stmt->close();\r\n+\r\n+  header(\"Location: manage-register-staff.php\");\r\n+  exit();\r\n+}\r\n+?>\r\n+\r\n+<!-- Simple edit form -->\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+  <meta charset=\"UTF-8\">\r\n+  <title>Edit Staff</title>\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n+</head>\r\n+<body class=\"bg-light p-5\">\r\n+  <div class=\"container\">\r\n+    <h2 class=\"mb-4\">Edit Staff Account</h2>\r\n+    <form method=\"POST\">\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Full Name</label>\r\n+        <input type=\"text\" name=\"staffName\" class=\"form-control\" value=\"<?= htmlspecialchars($staff['name']) ?>\" required>\r\n+      </div>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Email</label>\r\n+        <input type=\"email\" name=\"staffEmail\" class=\"form-control\" value=\"<?= htmlspecialchars($staff['email']) ?>\" required>\r\n+      </div>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Position</label>\r\n+        <select name=\"staffPosition\" class=\"form-select\" required>\r\n+          <option <?= $staff['position'] == 'Registrar' ? 'selected' : '' ?>>Registrar</option>\r\n+          <option <?= $staff['position'] == 'Enrollment Staff' ? 'selected' : '' ?>>Enrollment Staff</option>\r\n+          <option <?= $staff['position'] == 'Teacher' ? 'selected' : '' ?>>Teacher</option>\r\n+        </select>\r\n+      </div>\r\n+      <div class=\"mb-3\">\r\n+        <label class=\"form-label\">Status</label>\r\n+        <select name=\"staffStatus\" class=\"form-select\" required>\r\n+          <option <?= $staff['status'] == 'Active' ? 'selected' : '' ?>>Active</option>\r\n+          <option <?= $staff['status'] == 'Inactive' ? 'selected' : '' ?>>Inactive</option>\r\n+        </select>\r\n+      </div>\r\n+      <button type=\"submit\" class=\"btn btn-success\">Update Staff</button>\r\n+      <a href=\"manage-register-staff.php\" class=\"btn btn-secondary\">Cancel</a>\r\n+    </form>\r\n+  </div>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1748628177520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,5 +77,5 @@\n       <a href=\"manage-register-staff.php\" class=\"btn btn-secondary\">Cancel</a>\r\n     </form>\r\n   </div>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1748628296911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,81 +1,9 @@\n <?php\r\n include '../../db.php';\r\n-\r\n-if (!isset($_GET['id'])) {\r\n-  header(\"Location: manage-register-staff.php\");\r\n-  exit();\r\n+if (isset($_GET['id'])) {\r\n+  $id = intval($_GET['id']);\r\n+  $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n }\r\n-\r\n-$id = intval($_GET['id']);\r\n-\r\n-// Fetch existing staff info\r\n-$stmt = $conn->prepare(\"SELECT * FROM registrar_staff WHERE id = ?\");\r\n-$stmt->bind_param(\"i\", $id);\r\n-$stmt->execute();\r\n-$result = $stmt->get_result();\r\n-$staff = $result->fetch_assoc();\r\n-$stmt->close();\r\n-\r\n-if (!$staff) {\r\n-  echo \"Staff not found.\";\r\n-  exit();\r\n-}\r\n-\r\n-// Update logic\r\n-if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-  $name = $_POST['staffName'];\r\n-  $email = $_POST['staffEmail'];\r\n-  $position = $_POST['staffPosition'];\r\n-  $status = $_POST['staffStatus'];\r\n-\r\n-  $stmt = $conn->prepare(\"UPDATE registrar_staff SET name=?, email=?, position=?, status=? WHERE id=?\");\r\n-  $stmt->bind_param(\"ssssi\", $name, $email, $position, $status, $id);\r\n-  $stmt->execute();\r\n-  $stmt->close();\r\n-\r\n-  header(\"Location: manage-register-staff.php\");\r\n-  exit();\r\n-}\r\n-?>\r\n-\r\n-<!-- Simple edit form -->\r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-  <meta charset=\"UTF-8\">\r\n-  <title>Edit Staff</title>\r\n-  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-</head>\r\n-<body class=\"bg-light p-5\">\r\n-  <div class=\"container\">\r\n-    <h2 class=\"mb-4\">Edit Staff Account</h2>\r\n-    <form method=\"POST\">\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Full Name</label>\r\n-        <input type=\"text\" name=\"staffName\" class=\"form-control\" value=\"<?= htmlspecialchars($staff['name']) ?>\" required>\r\n-      </div>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Email</label>\r\n-        <input type=\"email\" name=\"staffEmail\" class=\"form-control\" value=\"<?= htmlspecialchars($staff['email']) ?>\" required>\r\n-      </div>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Position</label>\r\n-        <select name=\"staffPosition\" class=\"form-select\" required>\r\n-          <option <?= $staff['position'] == 'Registrar' ? 'selected' : '' ?>>Registrar</option>\r\n-          <option <?= $staff['position'] == 'Enrollment Staff' ? 'selected' : '' ?>>Enrollment Staff</option>\r\n-          <option <?= $staff['position'] == 'Teacher' ? 'selected' : '' ?>>Teacher</option>\r\n-        </select>\r\n-      </div>\r\n-      <div class=\"mb-3\">\r\n-        <label class=\"form-label\">Status</label>\r\n-        <select name=\"staffStatus\" class=\"form-select\" required>\r\n-          <option <?= $staff['status'] == 'Active' ? 'selected' : '' ?>>Active</option>\r\n-          <option <?= $staff['status'] == 'Inactive' ? 'selected' : '' ?>>Inactive</option>\r\n-        </select>\r\n-      </div>\r\n-      <button type=\"submit\" class=\"btn btn-success\">Update Staff</button>\r\n-      <a href=\"manage-register-staff.php\" class=\"btn btn-secondary\">Cancel</a>\r\n-    </form>\r\n-  </div>\r\n-</body>\r\n-</html>\r\n+header(\"Location: manage-register-staff.php\"); // Go back to the main page\r\n+exit();\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748628313894,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,39 @@\n <?php\r\n include '../../db.php';\r\n-if (isset($_GET['id'])) {\r\n-  $id = intval($_GET['id']);\r\n-  $conn->query(\"EDIT FROM staff WHERE id = $id\");\r\n+\r\n+if (!isset($_GET['id'])) {\r\n+  header(\"Location: manage-register-staff.php\");\r\n+  exit();\r\n\\ No newline at end of file\n }\r\n-header(\"Location: manage-register-staff.php\"); // Go back to the main page\r\n-exit();\r\n-?>\n+\r\n+$id = intval($_GET['id']);\r\n+\r\n+// Fetch existing staff info\r\n+$stmt = $conn->prepare(\"SELECT * FROM registrar_staff WHERE id = ?\");\r\n+$stmt->bind_param(\"i\", $id);\r\n+$stmt->execute();\r\n+$result = $stmt->get_result();\r\n+$staff = $result->fetch_assoc();\r\n+$stmt->close();\r\n+\r\n+if (!$staff) {\r\n+  echo \"Staff not found.\";\r\n+  exit();\r\n+}\r\n+\r\n+// Update logic\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+  $name = $_POST['staffName'];\r\n+  $email = $_POST['staffEmail'];\r\n+  $position = $_POST['staffPosition'];\r\n+  $status = $_POST['staffStatus'];\r\n+\r\n+  $stmt = $conn->prepare(\"UPDATE registrar_staff SET name=?, email=?, position=?, status=? WHERE id=?\");\r\n+  $stmt->bind_param(\"ssssi\", $name, $email, $position, $status, $id);\r\n+  $stmt->execute();\r\n+  $stmt->close();\r\n+\r\n+  header(\"Location: manage-register-staff.php\");\r\n+  exit();\r\n+}\r\n+?>\r\n"
                }
            ],
            "date": 1748624709545,
            "name": "Commit-0",
            "content": "<?php\r\ninclude 'db.php';\r\nif (isset($_GET['id'])) {\r\n  $id = intval($_GET['id']);\r\n  $conn->query(\"DELETE FROM staff WHERE id = $id\");\r\n}\r\nheader(\"Location: manage-staff.php\"); // Go back to the main page\r\nexit();\r\n?>"
        }
    ]
}