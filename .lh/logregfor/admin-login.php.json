{
    "sourceFile": "logregfor/admin-login.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 53,
            "patches": [
                {
                    "date": 1748595641911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748595678510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,9 @@\n             height: 100vh;\r\n             justify-content: center;\r\n             align-items: center;\r\n             background: #e6e6e6;\r\n+            display: contents;\r\n         }\r\n         .login-box {\r\n             display: flex;\r\n             width: 900px;\r\n"
                },
                {
                    "date": 1748597684769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,8 +36,9 @@\n     <meta charset=\"UTF-8\">\r\n     <title>Admin Login</title>\r\n     <link rel=\"stylesheet\" href=\"../css/style.css\"> <!-- Use your existing login CSS -->\r\n     <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n+    <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n     <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n     <style>\r\n         /* You can remove this if already in your style.css */\r\n         .container {\r\n"
                },
                {
                    "date": 1748598157876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,33 +1,23 @@\n <?php\r\n session_start();\r\n-include '../db.php'; // adjust the path if needed\r\n+include '../db.php';\r\n \r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    $username = trim($_POST[\"username\"]);\r\n-    $password = $_POST[\"password\"];\r\n+    $admin_username = $_POST['admin_username'];\r\n+    $admin_password = $_POST['admin_password'];\r\n \r\n-    $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE username = ?\");\r\n-    $stmt->bind_param(\"s\", $username);\r\n-    $stmt->execute();\r\n-    $admin = $stmt->get_result()->fetch_assoc();\r\n+    $sql = \"SELECT * FROM admin_settings WHERE admin_username = '$admin_username' AND admin_password = '$admin_password'\";\r\n+    $result = $conn->query($sql);\r\n \r\n-    if ($admin && password_verify($password, $admin['password'])) {\r\n+    if ($result->num_rows === 1) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n-        $_SESSION['admin_username'] = $admin['username'];\r\n-        header(\"Location: ../admin/dashboard.php\");\r\n+        $_SESSION['admin_username'] = $admin_username;\r\n+\r\n+        header(\"Location: ../admin/admin-dashboard.php\");\r\n         exit();\r\n     } else {\r\n-        echo \"<script>\r\n-            Swal.fire({\r\n-                icon: 'error',\r\n-                title: 'Login Failed',\r\n-                text: 'Invalid admin username or password',\r\n-                confirmButtonColor: '#3085d6'\r\n-            }).then(() => {\r\n-                window.location.href='admin-login.php';\r\n-            });\r\n-        </script>\";\r\n+        echo \"<script>alert('Invalid username or password'); window.location.href='admin-login.php';</script>\";\r\n     }\r\n }\r\n ?>\r\n <!DOCTYPE html>\r\n"
                },
                {
                    "date": 1748598179282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,21 +122,13 @@\n             <p>Use your admin credentials to access the dashboard.</p>\r\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n-            <form method=\"POST\">\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n-                    <i class=\"bi bi-person\"></i>\r\n-                </div>\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n-                    <i class=\"bi bi-lock\"></i>\r\n-                </div>\r\n-                <!-- Optional: Uncomment if you want a Forgot Password link -->\r\n-                <!-- <a href=\"#\" class=\"forgot\">Forgot password?</a> -->\r\n-                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n-            </form>\r\n+            <form method=\"POST\" action=\"\">\r\n+    <input type=\"text\" name=\"admin_username\" placeholder=\"Username\" required>\r\n+    <input type=\"password\" name=\"admin_password\" placeholder=\"Password\" required>\r\n+    <button type=\"submit\">Login</button>\r\n+</form>\r\n         </div>\r\n     </div>\r\n </div>\r\n </body>\r\n"
                },
                {
                    "date": 1748598189903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,12 +123,12 @@\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n             <form method=\"POST\" action=\"\">\r\n-    <input type=\"text\" name=\"admin_username\" placeholder=\"Username\" required>\r\n-    <input type=\"password\" name=\"admin_password\" placeholder=\"Password\" required>\r\n-    <button type=\"submit\">Login</button>\r\n-</form>\r\n+            <input type=\"text\" name=\"admin_username\" placeholder=\"Username\" required>\r\n+            <input type=\"password\" name=\"admin_password\" placeholder=\"Password\" required>\r\n+            <button type=\"submit\">Login</button>\r\n+            </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n </body>\r\n"
                },
                {
                    "date": 1748598535635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,12 +122,20 @@\n             <p>Use your admin credentials to access the dashboard.</p>\r\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n-            <form method=\"POST\" action=\"\">\r\n-            <input type=\"text\" name=\"admin_username\" placeholder=\"Username\" required>\r\n-            <input type=\"password\" name=\"admin_password\" placeholder=\"Password\" required>\r\n-            <button type=\"submit\">Login</button>\r\n+            <form method=\"POST\">\r\n+                <div class=\"input-box\">\r\n+                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n+                    <i class=\"bi bi-person\"></i>\r\n+                </div>\r\n+                <div class=\"input-box\">\r\n+                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n+                    <i class=\"bi bi-lock\"></i>\r\n+                </div>\r\n+                <!-- Optional: Uncomment if you want a Forgot Password link -->\r\n+                <!-- <a href=\"#\" class=\"forgot\">Forgot password?</a> -->\r\n+                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n             </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n"
                },
                {
                    "date": 1748598620092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,25 +2,27 @@\n session_start();\r\n include '../db.php';\r\n \r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    $admin_username = $_POST['admin_username'];\r\n-    $admin_password = $_POST['admin_password'];\r\n+    // Use isset() to avoid \"undefined\" errors\r\n+    $admin_username = isset($_POST['admin_username']) ? $_POST['admin_username'] : '';\r\n+    $admin_password = isset($_POST['admin_password']) ? $_POST['admin_password'] : '';\r\n \r\n-    $sql = \"SELECT * FROM admin_settings WHERE admin_username = '$admin_username' AND admin_password = '$admin_password'\";\r\n+    // Replace these column names with the ACTUAL column names in your database\r\n+    $sql = \"SELECT * FROM admin_settings WHERE username = '$admin_username' AND password = '$admin_password'\";\r\n     $result = $conn->query($sql);\r\n \r\n-    if ($result->num_rows === 1) {\r\n+    if ($result && $result->num_rows === 1) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n         $_SESSION['admin_username'] = $admin_username;\r\n-\r\n         header(\"Location: ../admin/admin-dashboard.php\");\r\n         exit();\r\n     } else {\r\n         echo \"<script>alert('Invalid username or password'); window.location.href='admin-login.php';</script>\";\r\n     }\r\n }\r\n ?>\r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1748598644952,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,23 +2,32 @@\n session_start();\r\n include '../db.php';\r\n \r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    // Use isset() to avoid \"undefined\" errors\r\n-    $admin_username = isset($_POST['admin_username']) ? $_POST['admin_username'] : '';\r\n-    $admin_password = isset($_POST['admin_password']) ? $_POST['admin_password'] : '';\r\n+    // Use correct input field names\r\n+    $username = $_POST['username'];\r\n+    $password = $_POST['password'];\r\n \r\n-    // Replace these column names with the ACTUAL column names in your database\r\n-    $sql = \"SELECT * FROM admin_settings WHERE username = '$admin_username' AND password = '$admin_password'\";\r\n+    // Use correct column names from your database (example: username, password)\r\n+    $sql = \"SELECT * FROM admin_settings WHERE username = '$username' AND password = '$password'\";\r\n     $result = $conn->query($sql);\r\n \r\n     if ($result && $result->num_rows === 1) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n-        $_SESSION['admin_username'] = $admin_username;\r\n+        $_SESSION['admin_username'] = $username;\r\n+\r\n         header(\"Location: ../admin/admin-dashboard.php\");\r\n         exit();\r\n     } else {\r\n-        echo \"<script>alert('Invalid username or password'); window.location.href='admin-login.php';</script>\";\r\n+        echo \"<script>\r\n+                Swal.fire({\r\n+                    icon: 'error',\r\n+                    title: 'Login Failed',\r\n+                    text: 'Invalid username or password'\r\n+                }).then(() => {\r\n+                    window.location.href = 'admin-login.php';\r\n+                });\r\n+              </script>\";\r\n     }\r\n }\r\n ?>\r\n \r\n"
                },
                {
                    "date": 1748599041277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,36 +2,48 @@\n session_start();\r\n include '../db.php';\r\n \r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    // Use correct input field names\r\n     $username = $_POST['username'];\r\n     $password = $_POST['password'];\r\n \r\n-    // Use correct column names from your database (example: username, password)\r\n-    $sql = \"SELECT * FROM admin_settings WHERE username = '$username' AND password = '$password'\";\r\n-    $result = $conn->query($sql);\r\n+    // Prepared statement to prevent SQL injection\r\n+    $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE username = ? AND password = ?\");\r\n+    $stmt->bind_param(\"ss\", $username, $password);\r\n+    $stmt->execute();\r\n+    $result = $stmt->get_result();\r\n \r\n     if ($result && $result->num_rows === 1) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n         $_SESSION['admin_username'] = $username;\r\n \r\n         header(\"Location: ../admin/admin-dashboard.php\");\r\n         exit();\r\n     } else {\r\n-        echo \"<script>\r\n+        // SweetAlert fallback\r\n+        echo \"\r\n+        <html>\r\n+        <head>\r\n+            <script src='https://cdn.jsdelivr.net/npm/sweetalert2@11'></script>\r\n+        </head>\r\n+        <body>\r\n+            <script>\r\n                 Swal.fire({\r\n                     icon: 'error',\r\n                     title: 'Login Failed',\r\n                     text: 'Invalid username or password'\r\n                 }).then(() => {\r\n                     window.location.href = 'admin-login.php';\r\n                 });\r\n-              </script>\";\r\n+            </script>\r\n+        </body>\r\n+        </html>\";\r\n+        exit();\r\n     }\r\n }\r\n ?>\r\n \r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1748599087580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,13 +154,11 @@\n                 <div class=\"input-box\">\r\n                     <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n                     <i class=\"bi bi-lock\"></i>\r\n                 </div>\r\n-                <!-- Optional: Uncomment if you want a Forgot Password link -->\r\n-                <!-- <a href=\"#\" class=\"forgot\">Forgot password?</a> -->\r\n                 <button type=\"submit\" class=\"btn-login\">Login</button>\r\n             </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n </body>\r\n-</html>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748599107735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,142 +1,12 @@\n-<?php\r\n-session_start();\r\n-include '../db.php';\r\n-\r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    $username = $_POST['username'];\r\n-    $password = $_POST['password'];\r\n-\r\n-    // Prepared statement to prevent SQL injection\r\n-    $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE username = ? AND password = ?\");\r\n-    $stmt->bind_param(\"ss\", $username, $password);\r\n-    $stmt->execute();\r\n-    $result = $stmt->get_result();\r\n-\r\n-    if ($result && $result->num_rows === 1) {\r\n-        $_SESSION['admin_logged_in'] = true;\r\n-        $_SESSION['admin_username'] = $username;\r\n-\r\n-        header(\"Location: ../admin/admin-dashboard.php\");\r\n-        exit();\r\n-    } else {\r\n-        // SweetAlert fallback\r\n-        echo \"\r\n-        <html>\r\n-        <head>\r\n-            <script src='https://cdn.jsdelivr.net/npm/sweetalert2@11'></script>\r\n-        </head>\r\n-        <body>\r\n-            <script>\r\n-                Swal.fire({\r\n-                    icon: 'error',\r\n-                    title: 'Login Failed',\r\n-                    text: 'Invalid username or password'\r\n-                }).then(() => {\r\n-                    window.location.href = 'admin-login.php';\r\n-                });\r\n-            </script>\r\n-        </body>\r\n-        </html>\";\r\n-        exit();\r\n-    }\r\n-}\r\n-?>\r\n-\r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <title>Admin Login</title>\r\n-    <link rel=\"stylesheet\" href=\"../css/style.css\"> <!-- Use your existing login CSS -->\r\n+    <link rel=\"stylesheet\" href=\"../css/style.css\">\r\n     <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n     <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    <style>\r\n-        /* You can remove this if already in your style.css */\r\n-        .container {\r\n-            display: flex;\r\n-            height: 100vh;\r\n-            justify-content: center;\r\n-            align-items: center;\r\n-            background: #e6e6e6;\r\n-            display: contents;\r\n-        }\r\n-        .login-box {\r\n-            display: flex;\r\n-            width: 900px;\r\n-            box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n-            border-radius: 25px;\r\n-            overflow: hidden;\r\n-        }\r\n-        .left-panel {\r\n-            background: #2e7d32;\r\n-            color: white;\r\n-            width: 50%;\r\n-            padding: 50px 30px;\r\n-            display: flex;\r\n-            flex-direction: column;\r\n-            justify-content: center;\r\n-            border-top-left-radius: 25px;\r\n-            border-bottom-left-radius: 25px;\r\n-        }\r\n-        .left-panel h2 {\r\n-            font-size: 32px;\r\n-            margin-bottom: 15px;\r\n-        }\r\n-        .right-panel {\r\n-            background: white;\r\n-            width: 50%;\r\n-            padding: 50px 30px;\r\n-            display: flex;\r\n-            flex-direction: column;\r\n-            justify-content: center;\r\n-        }\r\n-        .right-panel h2 {\r\n-            font-size: 28px;\r\n-            margin-bottom: 20px;\r\n-            text-align: center;\r\n-        }\r\n-        .input-box {\r\n-            position: relative;\r\n-            margin-bottom: 20px;\r\n-        }\r\n-        .input-box input {\r\n-            width: 100%;\r\n-            padding: 12px 40px 12px 15px;\r\n-            border: 1px solid #ccc;\r\n-            border-radius: 10px;\r\n-        }\r\n-        .input-box i {\r\n-            position: absolute;\r\n-            right: 15px;\r\n-            top: 50%;\r\n-            transform: translateY(-50%);\r\n-            color: #777;\r\n-        }\r\n-        .btn-login {\r\n-            background: #5c6bc0;\r\n-            color: white;\r\n-            border: none;\r\n-            padding: 12px;\r\n-            border-radius: 10px;\r\n-            font-size: 16px;\r\n-            cursor: pointer;\r\n-            transition: background 0.3s ease;\r\n-        }\r\n-        .btn-login:hover {\r\n-            background: #3f51b5;\r\n-        }\r\n-        .forgot {\r\n-            font-size: 13px;\r\n-            text-align: right;\r\n-            display: block;\r\n-            margin-bottom: 10px;\r\n-            color: #888;\r\n-            text-decoration: none;\r\n-        }\r\n-    </style>\r\n </head>\r\n <body>\r\n <div class=\"container\">\r\n     <div class=\"login-box\">\r\n@@ -160,5 +30,5 @@\n         </div>\r\n     </div>\r\n </div>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1748599195261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,106 @@\n     <link rel=\"stylesheet\" href=\"../css/style.css\">\r\n     <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n     <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n </head>\r\n+<style>\r\n+  body {\r\n+    background-color: #e6e6e6;\r\n+    font-family: 'Segoe UI', sans-serif;\r\n+}\r\n+\r\n+.container {\r\n+    display: flex;\r\n+    height: 100vh;\r\n+    justify-content: center;\r\n+    align-items: center;\r\n+}\r\n+\r\n+.login-box {\r\n+    display: flex;\r\n+    width: 900px;\r\n+    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n+    border-radius: 25px;\r\n+    overflow: hidden;\r\n+    background: white;\r\n+}\r\n+\r\n+.left-panel {\r\n+    background: #2e7d32;\r\n+    color: white;\r\n+    width: 50%;\r\n+    padding: 50px 30px;\r\n+    display: flex;\r\n+    flex-direction: column;\r\n+    justify-content: center;\r\n+    border-top-left-radius: 25px;\r\n+    border-bottom-left-radius: 25px;\r\n+}\r\n+\r\n+.left-panel h2 {\r\n+    font-size: 32px;\r\n+    margin-bottom: 15px;\r\n+}\r\n+\r\n+.right-panel {\r\n+    width: 50%;\r\n+    padding: 50px 30px;\r\n+    display: flex;\r\n+    flex-direction: column;\r\n+    justify-content: center;\r\n+}\r\n+\r\n+.right-panel h2 {\r\n+    font-size: 28px;\r\n+    margin-bottom: 20px;\r\n+    text-align: center;\r\n+}\r\n+\r\n+.input-box {\r\n+    position: relative;\r\n+    margin-bottom: 20px;\r\n+}\r\n+\r\n+.input-box input {\r\n+    width: 100%;\r\n+    padding: 12px 40px 12px 15px;\r\n+    border: 1px solid #ccc;\r\n+    border-radius: 10px;\r\n+}\r\n+\r\n+.input-box i {\r\n+    position: absolute;\r\n+    right: 15px;\r\n+    top: 50%;\r\n+    transform: translateY(-50%);\r\n+    color: #777;\r\n+}\r\n+\r\n+.btn-login {\r\n+    background: #5c6bc0;\r\n+    color: white;\r\n+    border: none;\r\n+    padding: 12px;\r\n+    border-radius: 10px;\r\n+    font-size: 16px;\r\n+    cursor: pointer;\r\n+    transition: background 0.3s ease;\r\n+    width: 100%;\r\n+}\r\n+\r\n+.btn-login:hover {\r\n+    background: #3f51b5;\r\n+}\r\n+\r\n+.forgot {\r\n+    font-size: 13px;\r\n+    text-align: right;\r\n+    display: block;\r\n+    margin-bottom: 10px;\r\n+    color: #888;\r\n+    text-decoration: none;\r\n+}\r\n+</style>\r\n <body>\r\n <div class=\"container\">\r\n     <div class=\"login-box\">\r\n         <div class=\"left-panel\">\r\n"
                },
                {
                    "date": 1748599260717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n     <title>Admin Login</title>\r\n     <link rel=\"stylesheet\" href=\"../css/style.css\">\r\n     <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n     <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n </head>\r\n <style>\r\n   body {\r\n     background-color: #e6e6e6;\r\n@@ -127,6 +128,7 @@\n             </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n+<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n </body>\r\n </html>\r\n"
                },
                {
                    "date": 1748599407117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,9 @@\n <style>\r\n   body {\r\n     background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n+    display: contents;\r\n }\r\n \r\n .container {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748599423617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,16 +11,16 @@\n <style>\r\n   body {\r\n     background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n-    display: contents;\r\n }\r\n \r\n .container {\r\n     display: flex;\r\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n+    display: contents;\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748599436002,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n     display: flex;\r\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n-    display: contents;\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748599472332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,8 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n </head>\r\n <style>\r\n   body {\r\n-    background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n }\r\n \r\n .container {\r\n"
                },
                {
                    "date": 1748599479339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,16 +9,18 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n </head>\r\n <style>\r\n   body {\r\n+    background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n }\r\n \r\n .container {\r\n     display: flex;\r\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n+    display: contents;\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748599492772,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,9 @@\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n     display: contents;\r\n+     box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748599530054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,15 +19,15 @@\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n     display: contents;\r\n-     box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n+    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n     width: 900px;\r\n-    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n+    box-shadow: 0 0 20px rgba(5, 224, 115, 0.2);\r\n     border-radius: 25px;\r\n     overflow: hidden;\r\n     background: white;\r\n }\r\n"
                },
                {
                    "date": 1748599538629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,8 @@\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n     display: contents;\r\n-    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748600651501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,36 @@\n+<?php\r\n+session_start();\r\n+$error = '';\r\n+\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+    include 'db.php'; // Include your database connection\r\n+\r\n+    $username = trim($_POST['username']);\r\n+    $password = trim($_POST['password']);\r\n+\r\n+    $stmt = $conn->prepare(\"SELECT * FROM admin WHERE username = ?\");\r\n+    $stmt->bind_param(\"s\", $username);\r\n+    $stmt->execute();\r\n+    $result = $stmt->get_result();\r\n+\r\n+    if ($result->num_rows === 1) {\r\n+        $admin = $result->fetch_assoc();\r\n+        if (password_verify($password, $admin['password'])) {\r\n+            $_SESSION['admin_logged_in'] = true;\r\n+            $_SESSION['admin_username'] = $admin['username'];\r\n+            header(\"Location: admin-dashboard.php\");\r\n+            exit;\r\n+        } else {\r\n+            $error = \"Incorrect password!\";\r\n+        }\r\n+    } else {\r\n+        $error = \"Admin not found!\";\r\n+    }\r\n+}\r\n+?>\r\n+\r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n@@ -18,15 +50,13 @@\n     display: flex;\r\n     height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n-    display: contents;\r\n }\r\n \r\n .login-box {\r\n-    display: flex;\r\n     width: 900px;\r\n-    box-shadow: 0 0 20px rgba(5, 224, 115, 0.2);\r\n+    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n     border-radius: 25px;\r\n     overflow: hidden;\r\n     background: white;\r\n }\r\n"
                },
                {
                    "date": 1748600732899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,8 +145,11 @@\n             <p>Use your admin credentials to access the dashboard.</p>\r\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n+            <?php if ($error): ?>\r\n+        <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n+    <?php endif; ?>\r\n             <form method=\"POST\">\r\n                 <div class=\"input-box\">\r\n                     <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n                     <i class=\"bi bi-person\"></i>\r\n"
                },
                {
                    "date": 1748600783762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -146,10 +146,10 @@\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n             <?php if ($error): ?>\r\n-        <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n-    <?php endif; ?>\r\n+            <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n+            <?php endif; ?>\r\n             <form method=\"POST\">\r\n                 <div class=\"input-box\">\r\n                     <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n                     <i class=\"bi bi-person\"></i>\r\n"
                },
                {
                    "date": 1748600994579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,17 @@\n <?php\r\n session_start();\r\n+\r\n+// Redirect if already logged in\r\n+if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in']) {\r\n+    header(\"Location: admin-dashboard.php\");\r\n+    exit;\r\n+}\r\n+\r\n $error = '';\r\n \r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    include 'db.php'; // Include your database connection\r\n+    include 'db.php';\r\n \r\n     $username = trim($_POST['username']);\r\n     $password = trim($_POST['password']);\r\n \r\n@@ -28,9 +35,8 @@\n     }\r\n }\r\n ?>\r\n \r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n@@ -109,8 +115,9 @@\n     right: 15px;\r\n     top: 50%;\r\n     transform: translateY(-50%);\r\n     color: #777;\r\n+    cursor: pointer;\r\n }\r\n \r\n .btn-login {\r\n     background: #5c6bc0;\r\n@@ -148,21 +155,53 @@\n             <h2>Admin Login</h2>\r\n             <?php if ($error): ?>\r\n             <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n             <?php endif; ?>\r\n-            <form method=\"POST\">\r\n+            <form method=\"POST\" novalidate>\r\n                 <div class=\"input-box\">\r\n-                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n+                    <input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"form-control\" required>\r\n                     <i class=\"bi bi-person\"></i>\r\n+                    <div class=\"invalid-feedback\">Please enter your username.</div>\r\n                 </div>\r\n                 <div class=\"input-box\">\r\n-                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n-                    <i class=\"bi bi-lock\"></i>\r\n+                    <input type=\"password\" name=\"password\" placeholder=\"Password\" class=\"form-control\" required id=\"admin-password\">\r\n+                    <i class=\"bi bi-lock\" id=\"togglePassword\"></i>\r\n+                    <div class=\"invalid-feedback\">Please enter your password.</div>\r\n                 </div>\r\n+                <!-- Uncomment if you already have forgot-password.php -->\r\n+                <!-- <a href=\"forgot-password.php\" class=\"forgot\">Forgot password?</a> -->\r\n                 <button type=\"submit\" class=\"btn-login\">Login</button>\r\n             </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n+\r\n+<!-- Scripts -->\r\n <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n+<script>\r\n+// Bootstrap validation\r\n+(() => {\r\n+  'use strict'\r\n+  const forms = document.querySelectorAll('form');\r\n+  Array.from(forms).forEach(form => {\r\n+    form.addEventListener('submit', event => {\r\n+      if (!form.checkValidity()) {\r\n+        event.preventDefault()\r\n+        event.stopPropagation()\r\n+      }\r\n+      form.classList.add('was-validated')\r\n+    }, false)\r\n+  })\r\n+})();\r\n+\r\n+// Toggle password visibility\r\n+document.getElementById('togglePassword').addEventListener('click', function () {\r\n+  const passwordInput = document.getElementById('admin-password');\r\n+  const icon = this;\r\n+  const isPassword = passwordInput.type === 'password';\r\n+  passwordInput.type = isPassword ? 'text' : 'password';\r\n+  icon.classList.toggle('bi-lock');\r\n+  icon.classList.toggle('bi-unlock');\r\n+});\r\n+</script>\r\n </body>\r\n </html>\r\n"
                },
                {
                    "date": 1748601028511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,207 +1,294 @@\n <?php\r\n session_start();\r\n+include '../db.php';\r\n \r\n-// Redirect if already logged in\r\n-if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in']) {\r\n-    header(\"Location: admin-dashboard.php\");\r\n+if (isset($_SESSION['student_id'])) {\r\n+    header(\"Location: ../student/student-dashboard.php\");\r\n     exit;\r\n }\r\n \r\n-$error = '';\r\n+use PHPMailer\\PHPMailer\\PHPMailer;\r\n+use PHPMailer\\PHPMailer\\Exception;\r\n \r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    include 'db.php';\r\n+require '../PHPMailer/src/Exception.php';\r\n+require '../PHPMailer/src/PHPMailer.php';\r\n+require '../PHPMailer/src/SMTP.php';\r\n \r\n-    $username = trim($_POST['username']);\r\n-    $password = trim($_POST['password']);\r\n+$message = \"\";\r\n+$alert_type = \"info\";\r\n \r\n-    $stmt = $conn->prepare(\"SELECT * FROM admin WHERE username = ?\");\r\n-    $stmt->bind_param(\"s\", $username);\r\n-    $stmt->execute();\r\n-    $result = $stmt->get_result();\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+    $action = $_POST['form_action'] ?? '';\r\n \r\n-    if ($result->num_rows === 1) {\r\n-        $admin = $result->fetch_assoc();\r\n-        if (password_verify($password, $admin['password'])) {\r\n-            $_SESSION['admin_logged_in'] = true;\r\n-            $_SESSION['admin_username'] = $admin['username'];\r\n-            header(\"Location: admin-dashboard.php\");\r\n-            exit;\r\n+    if ($action === 'login') {\r\n+        $username = trim($_POST['username'] ?? '');\r\n+        $password = $_POST['password'] ?? '';\r\n+        $account_type = $_POST['account_type'] ?? '';\r\n+\r\n+        if (!$username || !$password || !$account_type) {\r\n+            $message = \"Please fill all the fields.\";\r\n+            $alert_type = \"warning\";\r\n         } else {\r\n-            $error = \"Incorrect password!\";\r\n-        }\r\n-    } else {\r\n-        $error = \"Admin not found!\";\r\n-    }\r\n-}\r\n-?>\r\n+            if ($account_type === \"admin\") {\r\n+                $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE email = ?\");\r\n+                $stmt->bind_param(\"s\", $username);\r\n+            } elseif ($account_type === \"student\") {\r\n+                $stmt = $conn->prepare(\"SELECT * FROM students WHERE username = ?\");\r\n+                $stmt->bind_param(\"s\", $username);\r\n+            } else {\r\n+                $message = \"Invalid account type.\";\r\n+                $alert_type = \"error\";\r\n+            }\r\n \r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <title>Admin Login</title>\r\n-    <link rel=\"stylesheet\" href=\"../css/style.css\">\r\n-    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n-    <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-</head>\r\n-<style>\r\n-  body {\r\n-    background-color: #e6e6e6;\r\n-    font-family: 'Segoe UI', sans-serif;\r\n-}\r\n+            if (empty($message)) {\r\n+                $stmt->execute();\r\n+                $result = $stmt->get_result();\r\n \r\n-.container {\r\n-    display: flex;\r\n-    height: 100vh;\r\n-    justify-content: center;\r\n-    align-items: center;\r\n-}\r\n+                if ($result->num_rows === 1) {\r\n+                    $user = $result->fetch_assoc();\r\n \r\n-.login-box {\r\n-    width: 900px;\r\n-    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n-    border-radius: 25px;\r\n-    overflow: hidden;\r\n-    background: white;\r\n-}\r\n+                    if ($account_type === 'student' && $user['is_verified'] != 1) {\r\n+                        $message = \"Please verify your email first.\";\r\n+                        $alert_type = \"warning\";\r\n+                    } elseif (password_verify($password, $user['password'])) {\r\n+                        $_SESSION['role'] = $account_type;\r\n+                        if ($account_type === \"admin\") {\r\n+                            $_SESSION['admin_email'] = $user['email'];\r\n+                            header(\"Location: ../admin/dashboard.php\");\r\n+                        } else {\r\n+                        $_SESSION['student_id'] = $user['id'];\r\n+                        $_SESSION['student_username'] = $user['username'];\r\n+                        $_SESSION['student_number'] = $user['student_number'];\r\n+                            header(\"Location: ../student/student-dashboard.php\");\r\n+                        }\r\n+                        exit;\r\n+                    } else {\r\n+                        $message = \"Incorrect password.\";\r\n+                        $alert_type = \"error\";\r\n+                    }\r\n+                } else {\r\n+                    $message = \"User not found.\";\r\n+                    $alert_type = \"error\";\r\n+                }\r\n+            }\r\n+        }\r\n+    }\r\n \r\n-.left-panel {\r\n-    background: #2e7d32;\r\n-    color: white;\r\n-    width: 50%;\r\n-    padding: 50px 30px;\r\n-    display: flex;\r\n-    flex-direction: column;\r\n-    justify-content: center;\r\n-    border-top-left-radius: 25px;\r\n-    border-bottom-left-radius: 25px;\r\n-}\r\n+    if ($action === 'register') {\r\n+        $username = trim($_POST['username'] ?? '');\r\n+        $first_name = trim($_POST['first_name'] ?? '');\r\n+        $middle_name = trim($_POST['middle_name'] ?? '');\r\n+        $last_name = trim($_POST['last_name'] ?? '');\r\n+        $email = trim($_POST['email'] ?? '');\r\n+        $raw_password = trim($_POST['password'] ?? '');\r\n \r\n-.left-panel h2 {\r\n-    font-size: 32px;\r\n-    margin-bottom: 15px;\r\n-}\r\n+        if ($username && $first_name && $middle_name && $last_name && $email && $raw_password) {\r\n+            $password = password_hash($raw_password, PASSWORD_DEFAULT);\r\n+            $verification_code = bin2hex(random_bytes(16));\r\n \r\n-.right-panel {\r\n-    width: 50%;\r\n-    padding: 50px 30px;\r\n-    display: flex;\r\n-    flex-direction: column;\r\n-    justify-content: center;\r\n-}\r\n+            $check = $conn->prepare(\"SELECT id FROM students WHERE email = ? OR username = ?\");\r\n+            $check->bind_param(\"ss\", $email, $username);\r\n+            $check->execute();\r\n+            $result = $check->get_result();\r\n \r\n-.right-panel h2 {\r\n-    font-size: 28px;\r\n-    margin-bottom: 20px;\r\n-    text-align: center;\r\n-}\r\n+            if ($result->num_rows > 0) {\r\n+                $message = \"Username or Email already exists.\";\r\n+                $alert_type = \"error\";\r\n+            } else {\r\n+                $stmt = $conn->prepare(\"INSERT INTO students (username, first_name, middle_name, last_name, email, password, verification_code) VALUES (?, ?, ?, ?, ?, ?, ?)\");\r\n+                $stmt->bind_param(\"sssssss\", $username, $first_name, $middle_name, $last_name, $email, $password, $verification_code);\r\n \r\n-.input-box {\r\n-    position: relative;\r\n-    margin-bottom: 20px;\r\n-}\r\n+                if ($stmt->execute()) {\r\n+                    $mail = new PHPMailer(true);\r\n+                    try {\r\n+                        $mail->isSMTP();\r\n+                        $mail->Host = 'smtp.gmail.com';\r\n+                        $mail->SMTPAuth = true;\r\n+                        $mail->Username = 'jerickreyes982@gmail.com';\r\n+                        $mail->Password = 'efjbmtwsnvleklgb';\r\n+                        $mail->SMTPSecure = 'tls';\r\n+                        $mail->Port = 587;\r\n+                        $mail->setFrom('jerickreyes982@gmail.com', 'Enrollment System');\r\n+                        $mail->addAddress($email, $first_name);\r\n+                        $mail->isHTML(true);\r\n+                        $mail->Subject = 'Email Verification';\r\n+                        $mail->Body = \"Hi $first_name,<br><br>Click the link to verify your account:<br><a href='http://localhost/IT2C_Enrollment_System_SourceCode/verify.php?code=$verification_code'>Verify Email</a>\";\r\n \r\n-.input-box input {\r\n-    width: 100%;\r\n-    padding: 12px 40px 12px 15px;\r\n-    border: 1px solid #ccc;\r\n-    border-radius: 10px;\r\n+                        $mail->send();\r\n+                        header(\"Location: login.php?registered=1\");\r\n+                        exit;\r\n+                    } catch (Exception $e) {\r\n+                        $message = \"Mailer Error: {$mail->ErrorInfo}\";\r\n+                        $alert_type = \"error\";\r\n+                    }\r\n+                } else {\r\n+                    $message = \"Registration failed.\";\r\n+                    $alert_type = \"error\";\r\n+                }\r\n+                $stmt->close();\r\n+            }\r\n+            $check->close();\r\n+        } else {\r\n+            $message = \"Please fill out all required fields.\";\r\n+            $alert_type = \"warning\";\r\n+        }\r\n+    }\r\n }\r\n+?>\r\n \r\n-.input-box i {\r\n-    position: absolute;\r\n-    right: 15px;\r\n-    top: 50%;\r\n-    transform: translateY(-50%);\r\n-    color: #777;\r\n-    cursor: pointer;\r\n-}\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+  <meta charset=\"UTF-8\" />\r\n+  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n+  <title>Login/Register/Forgot Password</title>\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n+  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'/>\r\n+  <link rel=\"stylesheet\" href=\"/IT2C_Enrollment_System_SourceCode/CSS/style.css\">\r\n+  <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+  <style>\r\n+    .container {\r\n+      max-width: 1100px !important;\r\n+      height: 650px;\r\n+      margin: auto;\r\n+    }\r\n+    .form-box.forgot-password form button {\r\n+      display: block;\r\n+      width: 100%;\r\n+      margin-bottom: 10px;\r\n+    }\r\n+    .form-box form {\r\n+      overflow-y: auto;\r\n+      max-height: 85vh;\r\n+      padding-bottom: 20px;\r\n+    }\r\n+@media screen and (max-width: 650px) {\r\n+  .form-box {\r\n+    height: auto;\r\n+    max-height: 85vh;\r\n+    padding: 20px;\r\n+    overflow-y: auto;\r\n+  }\r\n \r\n-.btn-login {\r\n-    background: #5c6bc0;\r\n-    color: white;\r\n-    border: none;\r\n-    padding: 12px;\r\n-    border-radius: 10px;\r\n-    font-size: 16px;\r\n-    cursor: pointer;\r\n-    transition: background 0.3s ease;\r\n-    width: 100%;\r\n-}\r\n+  .form-box form {\r\n+    max-height: none;\r\n+  }\r\n \r\n-.btn-login:hover {\r\n-    background: #3f51b5;\r\n-}\r\n+  .form-box.register form {\r\n+    max-height: 70vh;\r\n+    overflow-y: auto;\r\n+  }\r\n \r\n-.forgot {\r\n-    font-size: 13px;\r\n-    text-align: right;\r\n-    display: block;\r\n-    margin-bottom: 10px;\r\n-    color: #888;\r\n-    text-decoration: none;\r\n+  .form-box.forgot-password {\r\n+    height: auto;\r\n+    max-height: 70vh;\r\n+    overflow-y: auto;\r\n+  }\r\n }\r\n </style>\r\n+</head>\r\n <body>\r\n-<div class=\"container\">\r\n-    <div class=\"login-box\">\r\n-        <div class=\"left-panel\">\r\n-            <h2>Welcome Admin!</h2>\r\n-            <p>Use your admin credentials to access the dashboard.</p>\r\n+  <?php if ($message): ?>\r\n+    <script>\r\n+      Swal.fire({\r\n+        icon: '<?= $alert_type ?>',\r\n+        html: <?= json_encode($message) ?>,\r\n+        timer: 3000,\r\n+        showConfirmButton: false\r\n+      });\r\n+    </script>\r\n+  <?php endif; ?>\r\n+\r\n+  <div class=\"container\">\r\n+    <!-- Login Form -->\r\n+    <div class=\"form-box login\">\r\n+      <form method=\"POST\" action=\"\">\r\n+        <h1>Login</h1>\r\n+        <input type=\"hidden\" name=\"form_action\" value=\"login\" />\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n+          <i class='bx bxs-user'></i>\r\n         </div>\r\n-        <div class=\"right-panel\">\r\n-            <h2>Admin Login</h2>\r\n-            <?php if ($error): ?>\r\n-            <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n-            <?php endif; ?>\r\n-            <form method=\"POST\" novalidate>\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"form-control\" required>\r\n-                    <i class=\"bi bi-person\"></i>\r\n-                    <div class=\"invalid-feedback\">Please enter your username.</div>\r\n-                </div>\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"password\" name=\"password\" placeholder=\"Password\" class=\"form-control\" required id=\"admin-password\">\r\n-                    <i class=\"bi bi-lock\" id=\"togglePassword\"></i>\r\n-                    <div class=\"invalid-feedback\">Please enter your password.</div>\r\n-                </div>\r\n-                <!-- Uncomment if you already have forgot-password.php -->\r\n-                <!-- <a href=\"forgot-password.php\" class=\"forgot\">Forgot password?</a> -->\r\n-                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n-            </form>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n+          <i class='bx bxs-lock-alt'></i>\r\n         </div>\r\n+        <div class=\"forgot-link\">\r\n+          <a href=\"#\" id=\"forgotLink\">Forgot password?</a>\r\n+        </div>\r\n+        <button type=\"submit\" class=\"btn\">Login</button>\r\n+      </form>\r\n     </div>\r\n-</div>\r\n \r\n-<!-- Scripts -->\r\n-<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n-<script>\r\n-// Bootstrap validation\r\n-(() => {\r\n-  'use strict'\r\n-  const forms = document.querySelectorAll('form');\r\n-  Array.from(forms).forEach(form => {\r\n-    form.addEventListener('submit', event => {\r\n-      if (!form.checkValidity()) {\r\n-        event.preventDefault()\r\n-        event.stopPropagation()\r\n-      }\r\n-      form.classList.add('was-validated')\r\n-    }, false)\r\n-  })\r\n-})();\r\n+    <!-- Register Form -->\r\n+    <div class=\"form-box register\">\r\n+      <form method=\"POST\" action=\"\">\r\n+        <h1>Registration</h1>\r\n+        <input type=\"hidden\" name=\"form_action\" value=\"register\" />\r\n+          <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n+        </div>\r\n+        <!-- <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"student_ID\" placeholder=\"Student ID\" required />\r\n+        </div> -->\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"first_name\" placeholder=\"First Name\" required />\r\n+          <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"middle_name\" placeholder=\"Middle Name\" required />\r\n+        </div>\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"last_name\" placeholder=\"Last Name\" required />\r\n+        </div>\r\n+        <!-- <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"year_level\" placeholder=\"Year Level\" required />\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"course\" placeholder=\"Course\" required />\r\n+        </div> -->\r\n+        <div class=\"input-box\">\r\n+          <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"password\" name=\"password\" placeholder=\"Password Verification\" required />\r\n+        </div>\r\n+        <button type=\"submit\" class=\"btn\">Register</button>\r\n+      </form>\r\n+    </div>\r\n \r\n-// Toggle password visibility\r\n-document.getElementById('togglePassword').addEventListener('click', function () {\r\n-  const passwordInput = document.getElementById('admin-password');\r\n-  const icon = this;\r\n-  const isPassword = passwordInput.type === 'password';\r\n-  passwordInput.type = isPassword ? 'text' : 'password';\r\n-  icon.classList.toggle('bi-lock');\r\n-  icon.classList.toggle('bi-unlock');\r\n-});\r\n-</script>\r\n+    <!-- Forgot Password Form -->\r\n+    <div class=\"form-box forgot-password\">\r\n+      <form action=\"send-reset.php\" method=\"POST\">\r\n+        <h1>Forgot Password</h1>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"email\" name=\"email\" placeholder=\"Enter your email\" required />\r\n+        </div>\r\n+        <p>We will send a reset link to your email.</p>\r\n+        <button type=\"submit\" class=\"btn\">Send Link</button>\r\n+        <button type=\"button\" class=\"btn login-btn\">Back to Login</button>\r\n+      </form>\r\n+    </div>\r\n+\r\n+    <!-- Panel Toggle -->\r\n+    <div class=\"toggle-box\">\r\n+      <div class=\"toggle-panel toggle-left\">\r\n+        <h1>Hello, Welcome!</h1>\r\n+        <p>Don't have an account?</p>\r\n+        <button class=\"btn register-btn\">Register</button>\r\n+      </div>\r\n+      <div class=\"toggle-panel toggle-right\">\r\n+        <h1>Welcome Back!</h1>\r\n+        <p>Already have an account?</p>\r\n+        <button class=\"btn login-btn\">Login</button>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n+  <script src=\"/IT2C_Enrollment_System_SourceCode/JS/script.js\"></script>\r\n </body>\r\n </html>\r\n"
                },
                {
                    "date": 1748601110859,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,294 +0,0 @@\n-<?php\r\n-session_start();\r\n-include '../db.php';\r\n-\r\n-if (isset($_SESSION['student_id'])) {\r\n-    header(\"Location: ../student/student-dashboard.php\");\r\n-    exit;\r\n-}\r\n-\r\n-use PHPMailer\\PHPMailer\\PHPMailer;\r\n-use PHPMailer\\PHPMailer\\Exception;\r\n-\r\n-require '../PHPMailer/src/Exception.php';\r\n-require '../PHPMailer/src/PHPMailer.php';\r\n-require '../PHPMailer/src/SMTP.php';\r\n-\r\n-$message = \"\";\r\n-$alert_type = \"info\";\r\n-\r\n-if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-    $action = $_POST['form_action'] ?? '';\r\n-\r\n-    if ($action === 'login') {\r\n-        $username = trim($_POST['username'] ?? '');\r\n-        $password = $_POST['password'] ?? '';\r\n-        $account_type = $_POST['account_type'] ?? '';\r\n-\r\n-        if (!$username || !$password || !$account_type) {\r\n-            $message = \"Please fill all the fields.\";\r\n-            $alert_type = \"warning\";\r\n-        } else {\r\n-            if ($account_type === \"admin\") {\r\n-                $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE email = ?\");\r\n-                $stmt->bind_param(\"s\", $username);\r\n-            } elseif ($account_type === \"student\") {\r\n-                $stmt = $conn->prepare(\"SELECT * FROM students WHERE username = ?\");\r\n-                $stmt->bind_param(\"s\", $username);\r\n-            } else {\r\n-                $message = \"Invalid account type.\";\r\n-                $alert_type = \"error\";\r\n-            }\r\n-\r\n-            if (empty($message)) {\r\n-                $stmt->execute();\r\n-                $result = $stmt->get_result();\r\n-\r\n-                if ($result->num_rows === 1) {\r\n-                    $user = $result->fetch_assoc();\r\n-\r\n-                    if ($account_type === 'student' && $user['is_verified'] != 1) {\r\n-                        $message = \"Please verify your email first.\";\r\n-                        $alert_type = \"warning\";\r\n-                    } elseif (password_verify($password, $user['password'])) {\r\n-                        $_SESSION['role'] = $account_type;\r\n-                        if ($account_type === \"admin\") {\r\n-                            $_SESSION['admin_email'] = $user['email'];\r\n-                            header(\"Location: ../admin/dashboard.php\");\r\n-                        } else {\r\n-                        $_SESSION['student_id'] = $user['id'];\r\n-                        $_SESSION['student_username'] = $user['username'];\r\n-                        $_SESSION['student_number'] = $user['student_number'];\r\n-                            header(\"Location: ../student/student-dashboard.php\");\r\n-                        }\r\n-                        exit;\r\n-                    } else {\r\n-                        $message = \"Incorrect password.\";\r\n-                        $alert_type = \"error\";\r\n-                    }\r\n-                } else {\r\n-                    $message = \"User not found.\";\r\n-                    $alert_type = \"error\";\r\n-                }\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    if ($action === 'register') {\r\n-        $username = trim($_POST['username'] ?? '');\r\n-        $first_name = trim($_POST['first_name'] ?? '');\r\n-        $middle_name = trim($_POST['middle_name'] ?? '');\r\n-        $last_name = trim($_POST['last_name'] ?? '');\r\n-        $email = trim($_POST['email'] ?? '');\r\n-        $raw_password = trim($_POST['password'] ?? '');\r\n-\r\n-        if ($username && $first_name && $middle_name && $last_name && $email && $raw_password) {\r\n-            $password = password_hash($raw_password, PASSWORD_DEFAULT);\r\n-            $verification_code = bin2hex(random_bytes(16));\r\n-\r\n-            $check = $conn->prepare(\"SELECT id FROM students WHERE email = ? OR username = ?\");\r\n-            $check->bind_param(\"ss\", $email, $username);\r\n-            $check->execute();\r\n-            $result = $check->get_result();\r\n-\r\n-            if ($result->num_rows > 0) {\r\n-                $message = \"Username or Email already exists.\";\r\n-                $alert_type = \"error\";\r\n-            } else {\r\n-                $stmt = $conn->prepare(\"INSERT INTO students (username, first_name, middle_name, last_name, email, password, verification_code) VALUES (?, ?, ?, ?, ?, ?, ?)\");\r\n-                $stmt->bind_param(\"sssssss\", $username, $first_name, $middle_name, $last_name, $email, $password, $verification_code);\r\n-\r\n-                if ($stmt->execute()) {\r\n-                    $mail = new PHPMailer(true);\r\n-                    try {\r\n-                        $mail->isSMTP();\r\n-                        $mail->Host = 'smtp.gmail.com';\r\n-                        $mail->SMTPAuth = true;\r\n-                        $mail->Username = 'jerickreyes982@gmail.com';\r\n-                        $mail->Password = 'efjbmtwsnvleklgb';\r\n-                        $mail->SMTPSecure = 'tls';\r\n-                        $mail->Port = 587;\r\n-                        $mail->setFrom('jerickreyes982@gmail.com', 'Enrollment System');\r\n-                        $mail->addAddress($email, $first_name);\r\n-                        $mail->isHTML(true);\r\n-                        $mail->Subject = 'Email Verification';\r\n-                        $mail->Body = \"Hi $first_name,<br><br>Click the link to verify your account:<br><a href='http://localhost/IT2C_Enrollment_System_SourceCode/verify.php?code=$verification_code'>Verify Email</a>\";\r\n-\r\n-                        $mail->send();\r\n-                        header(\"Location: login.php?registered=1\");\r\n-                        exit;\r\n-                    } catch (Exception $e) {\r\n-                        $message = \"Mailer Error: {$mail->ErrorInfo}\";\r\n-                        $alert_type = \"error\";\r\n-                    }\r\n-                } else {\r\n-                    $message = \"Registration failed.\";\r\n-                    $alert_type = \"error\";\r\n-                }\r\n-                $stmt->close();\r\n-            }\r\n-            $check->close();\r\n-        } else {\r\n-            $message = \"Please fill out all required fields.\";\r\n-            $alert_type = \"warning\";\r\n-        }\r\n-    }\r\n-}\r\n-?>\r\n-\r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-  <meta charset=\"UTF-8\" />\r\n-  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n-  <title>Login/Register/Forgot Password</title>\r\n-  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'/>\r\n-  <link rel=\"stylesheet\" href=\"/IT2C_Enrollment_System_SourceCode/CSS/style.css\">\r\n-  <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n-  <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-  <style>\r\n-    .container {\r\n-      max-width: 1100px !important;\r\n-      height: 650px;\r\n-      margin: auto;\r\n-    }\r\n-    .form-box.forgot-password form button {\r\n-      display: block;\r\n-      width: 100%;\r\n-      margin-bottom: 10px;\r\n-    }\r\n-    .form-box form {\r\n-      overflow-y: auto;\r\n-      max-height: 85vh;\r\n-      padding-bottom: 20px;\r\n-    }\r\n-@media screen and (max-width: 650px) {\r\n-  .form-box {\r\n-    height: auto;\r\n-    max-height: 85vh;\r\n-    padding: 20px;\r\n-    overflow-y: auto;\r\n-  }\r\n-\r\n-  .form-box form {\r\n-    max-height: none;\r\n-  }\r\n-\r\n-  .form-box.register form {\r\n-    max-height: 70vh;\r\n-    overflow-y: auto;\r\n-  }\r\n-\r\n-  .form-box.forgot-password {\r\n-    height: auto;\r\n-    max-height: 70vh;\r\n-    overflow-y: auto;\r\n-  }\r\n-}\r\n-</style>\r\n-</head>\r\n-<body>\r\n-  <?php if ($message): ?>\r\n-    <script>\r\n-      Swal.fire({\r\n-        icon: '<?= $alert_type ?>',\r\n-        html: <?= json_encode($message) ?>,\r\n-        timer: 3000,\r\n-        showConfirmButton: false\r\n-      });\r\n-    </script>\r\n-  <?php endif; ?>\r\n-\r\n-  <div class=\"container\">\r\n-    <!-- Login Form -->\r\n-    <div class=\"form-box login\">\r\n-      <form method=\"POST\" action=\"\">\r\n-        <h1>Login</h1>\r\n-        <input type=\"hidden\" name=\"form_action\" value=\"login\" />\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n-          <i class='bx bxs-user'></i>\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n-          <i class='bx bxs-lock-alt'></i>\r\n-        </div>\r\n-        <div class=\"forgot-link\">\r\n-          <a href=\"#\" id=\"forgotLink\">Forgot password?</a>\r\n-        </div>\r\n-        <button type=\"submit\" class=\"btn\">Login</button>\r\n-      </form>\r\n-    </div>\r\n-\r\n-    <!-- Register Form -->\r\n-    <div class=\"form-box register\">\r\n-      <form method=\"POST\" action=\"\">\r\n-        <h1>Registration</h1>\r\n-        <input type=\"hidden\" name=\"form_action\" value=\"register\" />\r\n-          <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n-        </div>\r\n-        <!-- <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"student_ID\" placeholder=\"Student ID\" required />\r\n-        </div> -->\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"first_name\" placeholder=\"First Name\" required />\r\n-          <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"middle_name\" placeholder=\"Middle Name\" required />\r\n-        </div>\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"last_name\" placeholder=\"Last Name\" required />\r\n-        </div>\r\n-        <!-- <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"year_level\" placeholder=\"Year Level\" required />\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"course\" placeholder=\"Course\" required />\r\n-        </div> -->\r\n-        <div class=\"input-box\">\r\n-          <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password Verification\" required />\r\n-        </div>\r\n-        <button type=\"submit\" class=\"btn\">Register</button>\r\n-      </form>\r\n-    </div>\r\n-\r\n-    <!-- Forgot Password Form -->\r\n-    <div class=\"form-box forgot-password\">\r\n-      <form action=\"send-reset.php\" method=\"POST\">\r\n-        <h1>Forgot Password</h1>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"email\" name=\"email\" placeholder=\"Enter your email\" required />\r\n-        </div>\r\n-        <p>We will send a reset link to your email.</p>\r\n-        <button type=\"submit\" class=\"btn\">Send Link</button>\r\n-        <button type=\"button\" class=\"btn login-btn\">Back to Login</button>\r\n-      </form>\r\n-    </div>\r\n-\r\n-    <!-- Panel Toggle -->\r\n-    <div class=\"toggle-box\">\r\n-      <div class=\"toggle-panel toggle-left\">\r\n-        <h1>Hello, Welcome!</h1>\r\n-        <p>Don't have an account?</p>\r\n-        <button class=\"btn register-btn\">Register</button>\r\n-      </div>\r\n-      <div class=\"toggle-panel toggle-right\">\r\n-        <h1>Welcome Back!</h1>\r\n-        <p>Already have an account?</p>\r\n-        <button class=\"btn login-btn\">Login</button>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-\r\n-  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-  <script src=\"/IT2C_Enrollment_System_SourceCode/JS/script.js\"></script>\r\n-</body>\r\n-</html>\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748601111642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +0,0 @@\n-\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748601135493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,168 @@\n-\n+<?php\r\n+session_start();\r\n+$error = '';\r\n+\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+    include 'db.php'; // Include your database connection\r\n+\r\n+    $username = trim($_POST['username']);\r\n+    $password = trim($_POST['password']);\r\n+\r\n+    $stmt = $conn->prepare(\"SELECT * FROM admin WHERE username = ?\");\r\n+    $stmt->bind_param(\"s\", $username);\r\n+    $stmt->execute();\r\n+    $result = $stmt->get_result();\r\n+\r\n+    if ($result->num_rows === 1) {\r\n+        $admin = $result->fetch_assoc();\r\n+        if (password_verify($password, $admin['password'])) {\r\n+            $_SESSION['admin_logged_in'] = true;\r\n+            $_SESSION['admin_username'] = $admin['username'];\r\n+            header(\"Location: admin-dashboard.php\");\r\n+            exit;\r\n+        } else {\r\n+            $error = \"Incorrect password!\";\r\n+        }\r\n+    } else {\r\n+        $error = \"Admin not found!\";\r\n+    }\r\n+}\r\n+?>\r\n+\r\n+\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <title>Admin Login</title>\r\n+    <link rel=\"stylesheet\" href=\"../css/style.css\">\r\n+    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n+    <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n+</head>\r\n+<style>\r\n+  body {\r\n+    background-color: #e6e6e6;\r\n+    font-family: 'Segoe UI', sans-serif;\r\n+}\r\n+\r\n+.container {\r\n+    display: flex;\r\n+    height: 100vh;\r\n+    justify-content: center;\r\n+    align-items: center;\r\n+}\r\n+\r\n+.login-box {\r\n+    width: 900px;\r\n+    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n+    border-radius: 25px;\r\n+    overflow: hidden;\r\n+    background: white;\r\n+}\r\n+\r\n+.left-panel {\r\n+    background: #2e7d32;\r\n+    color: white;\r\n+    width: 50%;\r\n+    padding: 50px 30px;\r\n+    display: flex;\r\n+    flex-direction: column;\r\n+    justify-content: center;\r\n+    border-top-left-radius: 25px;\r\n+    border-bottom-left-radius: 25px;\r\n+}\r\n+\r\n+.left-panel h2 {\r\n+    font-size: 32px;\r\n+    margin-bottom: 15px;\r\n+}\r\n+\r\n+.right-panel {\r\n+    width: 50%;\r\n+    padding: 50px 30px;\r\n+    display: flex;\r\n+    flex-direction: column;\r\n+    justify-content: center;\r\n+}\r\n+\r\n+.right-panel h2 {\r\n+    font-size: 28px;\r\n+    margin-bottom: 20px;\r\n+    text-align: center;\r\n+}\r\n+\r\n+.input-box {\r\n+    position: relative;\r\n+    margin-bottom: 20px;\r\n+}\r\n+\r\n+.input-box input {\r\n+    width: 100%;\r\n+    padding: 12px 40px 12px 15px;\r\n+    border: 1px solid #ccc;\r\n+    border-radius: 10px;\r\n+}\r\n+\r\n+.input-box i {\r\n+    position: absolute;\r\n+    right: 15px;\r\n+    top: 50%;\r\n+    transform: translateY(-50%);\r\n+    color: #777;\r\n+}\r\n+\r\n+.btn-login {\r\n+    background: #5c6bc0;\r\n+    color: white;\r\n+    border: none;\r\n+    padding: 12px;\r\n+    border-radius: 10px;\r\n+    font-size: 16px;\r\n+    cursor: pointer;\r\n+    transition: background 0.3s ease;\r\n+    width: 100%;\r\n+}\r\n+\r\n+.btn-login:hover {\r\n+    background: #3f51b5;\r\n+}\r\n+\r\n+.forgot {\r\n+    font-size: 13px;\r\n+    text-align: right;\r\n+    display: block;\r\n+    margin-bottom: 10px;\r\n+    color: #888;\r\n+    text-decoration: none;\r\n+}\r\n+</style>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <div class=\"login-box\">\r\n+        <div class=\"left-panel\">\r\n+            <h2>Welcome Admin!</h2>\r\n+            <p>Use your admin credentials to access the dashboard.</p>\r\n+        </div>\r\n+        <div class=\"right-panel\">\r\n+            <h2>Admin Login</h2>\r\n+            <?php if ($error): ?>\r\n+            <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n+            <?php endif; ?>\r\n+            <form method=\"POST\">\r\n+                <div class=\"input-box\">\r\n+                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n+                    <i class=\"bi bi-person\"></i>\r\n+                </div>\r\n+                <div class=\"input-box\">\r\n+                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n+                    <i class=\"bi bi-lock\"></i>\r\n+                </div>\r\n+                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n+            </form>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n+</body>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748601163816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,17 @@\n <?php\r\n session_start();\r\n+\r\n+// Redirect if already logged in\r\n+if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in']) {\r\n+    header(\"Location: admin-dashboard.php\");\r\n+    exit;\r\n+}\r\n+\r\n $error = '';\r\n \r\n if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    include 'db.php'; // Include your database connection\r\n+    include 'db.php';\r\n \r\n     $username = trim($_POST['username']);\r\n     $password = trim($_POST['password']);\r\n \r\n@@ -28,9 +35,8 @@\n     }\r\n }\r\n ?>\r\n \r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n@@ -109,8 +115,9 @@\n     right: 15px;\r\n     top: 50%;\r\n     transform: translateY(-50%);\r\n     color: #777;\r\n+    cursor: pointer;\r\n }\r\n \r\n .btn-login {\r\n     background: #5c6bc0;\r\n@@ -148,21 +155,53 @@\n             <h2>Admin Login</h2>\r\n             <?php if ($error): ?>\r\n             <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n             <?php endif; ?>\r\n-            <form method=\"POST\">\r\n+            <form method=\"POST\" novalidate>\r\n                 <div class=\"input-box\">\r\n-                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n+                    <input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"form-control\" required>\r\n                     <i class=\"bi bi-person\"></i>\r\n+                    <div class=\"invalid-feedback\">Please enter your username.</div>\r\n                 </div>\r\n                 <div class=\"input-box\">\r\n-                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n-                    <i class=\"bi bi-lock\"></i>\r\n+                    <input type=\"password\" name=\"password\" placeholder=\"Password\" class=\"form-control\" required id=\"admin-password\">\r\n+                    <i class=\"bi bi-lock\" id=\"togglePassword\"></i>\r\n+                    <div class=\"invalid-feedback\">Please enter your password.</div>\r\n                 </div>\r\n+                <!-- Uncomment if you already have forgot-password.php -->\r\n+                <!-- <a href=\"forgot-password.php\" class=\"forgot\">Forgot password?</a> -->\r\n\\ No newline at end of file\n                 <button type=\"submit\" class=\"btn-login\">Login</button>\r\n             </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n+\r\n+<!-- Scripts -->\r\n <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n+<script>\r\n+// Bootstrap validation\r\n+(() => {\r\n+  'use strict'\r\n+  const forms = document.querySelectorAll('form');\r\n+  Array.from(forms).forEach(form => {\r\n+    form.addEventListener('submit', event => {\r\n+      if (!form.checkValidity()) {\r\n+        event.preventDefault()\r\n+        event.stopPropagation()\r\n+      }\r\n+      form.classList.add('was-validated')\r\n+    }, false)\r\n+  })\r\n+})();\r\n+\r\n+// Toggle password visibility\r\n+document.getElementById('togglePassword').addEventListener('click', function () {\r\n+  const passwordInput = document.getElementById('admin-password');\r\n+  const icon = this;\r\n+  const isPassword = passwordInput.type === 'password';\r\n+  passwordInput.type = isPassword ? 'text' : 'password';\r\n+  icon.classList.toggle('bi-lock');\r\n+  icon.classList.toggle('bi-unlock');\r\n+});\r\n+</script>\r\n </body>\r\n-</html>\n+</html>\r\n"
                },
                {
                    "date": 1748601164521,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -203,5 +203,5 @@\n   icon.classList.toggle('bi-unlock');\r\n });\r\n </script>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1748601256516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,11 +46,13 @@\n     <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n </head>\r\n <style>\r\n-  body {\r\n+ body {\r\n     background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n+    margin: 0;\r\n+    padding: 0;\r\n }\r\n \r\n .container {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748601264276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,11 +55,13 @@\n }\r\n \r\n .container {\r\n     display: flex;\r\n-    height: 100vh;\r\n     justify-content: center;\r\n     align-items: center;\r\n+    min-height: 100vh;\r\n+    padding: 0 15px;\r\n+    background-color: #e6e6e6; /* Optional: change background if needed */\r\n }\r\n \r\n .login-box {\r\n     width: 900px;\r\n"
                },
                {
                    "date": 1748601276906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,15 +63,18 @@\n     background-color: #e6e6e6; /* Optional: change background if needed */\r\n }\r\n \r\n .login-box {\r\n-    width: 900px;\r\n-    box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n-    border-radius: 25px;\r\n+    display: flex;\r\n+    flex-direction: row;\r\n+    width: 700px;\r\n+    border-radius: 20px;\r\n     overflow: hidden;\r\n     background: white;\r\n+    margin: 0 auto;\r\n+    box-shadow: none; /* Removed the big shadow */\r\n+    border: 1px solid #ccc; /* Optional: add subtle border */\r\n }\r\n-\r\n .left-panel {\r\n     background: #2e7d32;\r\n     color: white;\r\n     width: 50%;\r\n"
                },
                {
                    "date": 1748601297498,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,8 @@\n     background-color: #e6e6e6; /* Optional: change background if needed */\r\n }\r\n \r\n .login-box {\r\n-    display: flex;\r\n     flex-direction: row;\r\n     width: 700px;\r\n     border-radius: 20px;\r\n     overflow: hidden;\r\n"
                },
                {
                    "date": 1748601331037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,20 +59,22 @@\n     justify-content: center;\r\n     align-items: center;\r\n     min-height: 100vh;\r\n     padding: 0 15px;\r\n-    background-color: #e6e6e6; /* Optional: change background if needed */\r\n+    background-color: #e6e6e6;\r\n+    display: block;\r\n }\r\n \r\n .login-box {\r\n+    display: flex;\r\n     flex-direction: row;\r\n     width: 700px;\r\n     border-radius: 20px;\r\n     overflow: hidden;\r\n     background: white;\r\n     margin: 0 auto;\r\n-    box-shadow: none; /* Removed the big shadow */\r\n-    border: 1px solid #ccc; /* Optional: add subtle border */\r\n+    box-shadow: none;\r\n+    border: 1px solid #ccc; \r\n }\r\n .left-panel {\r\n     background: #2e7d32;\r\n     color: white;\r\n"
                },
                {
                    "date": 1748601346547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,15 +54,13 @@\n     padding: 0;\r\n }\r\n \r\n .container {\r\n-    display: flex;\r\n     justify-content: center;\r\n     align-items: center;\r\n     min-height: 100vh;\r\n     padding: 0 15px;\r\n     background-color: #e6e6e6;\r\n-    display: block;\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748601435970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,11 +51,13 @@\n     background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n     margin: 0;\r\n     padding: 0;\r\n+     background-color: #f0f2f5; /\r\n }\r\n \r\n .container {\r\n+    display: flex;\r\n     justify-content: center;\r\n     align-items: center;\r\n     min-height: 100vh;\r\n     padding: 0 15px;\r\n"
                },
                {
                    "date": 1748601458415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n     background-color: #e6e6e6;\r\n     font-family: 'Segoe UI', sans-serif;\r\n     margin: 0;\r\n     padding: 0;\r\n-     background-color: #f0f2f5; /\r\n+    background-color: #f0f2f5; /\r\n }\r\n \r\n .container {\r\n     display: flex;\r\n@@ -61,8 +61,11 @@\n     align-items: center;\r\n     min-height: 100vh;\r\n     padding: 0 15px;\r\n     background-color: #e6e6e6;\r\n+    box-shadow: none;           /* Remove outer shadow */\r\n+    border: none;               /* Remove border */\r\n+    background: white;\r\n }\r\n \r\n .login-box {\r\n     display: flex;\r\n"
                },
                {
                    "date": 1748601488087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,8 @@\n     background: white;\r\n }\r\n \r\n .login-box {\r\n-    display: flex;\r\n     flex-direction: row;\r\n     width: 700px;\r\n     border-radius: 20px;\r\n     overflow: hidden;\r\n"
                },
                {
                    "date": 1748601521962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,217 +1,294 @@\n <?php\r\n session_start();\r\n+include '../db.php';\r\n \r\n-// Redirect if already logged in\r\n-if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in']) {\r\n-    header(\"Location: admin-dashboard.php\");\r\n+if (isset($_SESSION['student_id'])) {\r\n+    header(\"Location: ../student/student-dashboard.php\");\r\n     exit;\r\n }\r\n \r\n-$error = '';\r\n+use PHPMailer\\PHPMailer\\PHPMailer;\r\n+use PHPMailer\\PHPMailer\\Exception;\r\n \r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    include 'db.php';\r\n+require '../PHPMailer/src/Exception.php';\r\n+require '../PHPMailer/src/PHPMailer.php';\r\n+require '../PHPMailer/src/SMTP.php';\r\n \r\n-    $username = trim($_POST['username']);\r\n-    $password = trim($_POST['password']);\r\n+$message = \"\";\r\n+$alert_type = \"info\";\r\n \r\n-    $stmt = $conn->prepare(\"SELECT * FROM admin WHERE username = ?\");\r\n-    $stmt->bind_param(\"s\", $username);\r\n-    $stmt->execute();\r\n-    $result = $stmt->get_result();\r\n+if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n+    $action = $_POST['form_action'] ?? '';\r\n \r\n-    if ($result->num_rows === 1) {\r\n-        $admin = $result->fetch_assoc();\r\n-        if (password_verify($password, $admin['password'])) {\r\n-            $_SESSION['admin_logged_in'] = true;\r\n-            $_SESSION['admin_username'] = $admin['username'];\r\n-            header(\"Location: admin-dashboard.php\");\r\n-            exit;\r\n+    if ($action === 'login') {\r\n+        $username = trim($_POST['username'] ?? '');\r\n+        $password = $_POST['password'] ?? '';\r\n+        $account_type = $_POST['account_type'] ?? '';\r\n+\r\n+        if (!$username || !$password || !$account_type) {\r\n+            $message = \"Please fill all the fields.\";\r\n+            $alert_type = \"warning\";\r\n         } else {\r\n-            $error = \"Incorrect password!\";\r\n+            if ($account_type === \"admin\") {\r\n+                $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE email = ?\");\r\n+                $stmt->bind_param(\"s\", $username);\r\n+            } elseif ($account_type === \"student\") {\r\n+                $stmt = $conn->prepare(\"SELECT * FROM students WHERE username = ?\");\r\n+                $stmt->bind_param(\"s\", $username);\r\n+            } else {\r\n+                $message = \"Invalid account type.\";\r\n+                $alert_type = \"error\";\r\n+            }\r\n+\r\n+            if (empty($message)) {\r\n+                $stmt->execute();\r\n+                $result = $stmt->get_result();\r\n+\r\n+                if ($result->num_rows === 1) {\r\n+                    $user = $result->fetch_assoc();\r\n+\r\n+                    if ($account_type === 'student' && $user['is_verified'] != 1) {\r\n+                        $message = \"Please verify your email first.\";\r\n+                        $alert_type = \"warning\";\r\n+                    } elseif (password_verify($password, $user['password'])) {\r\n+                        $_SESSION['role'] = $account_type;\r\n+                        if ($account_type === \"admin\") {\r\n+                            $_SESSION['admin_email'] = $user['email'];\r\n+                            header(\"Location: ../admin/dashboard.php\");\r\n+                        } else {\r\n+                        $_SESSION['student_id'] = $user['id'];\r\n+                        $_SESSION['student_username'] = $user['username'];\r\n+                        $_SESSION['student_number'] = $user['student_number'];\r\n+                            header(\"Location: ../student/student-dashboard.php\");\r\n+                        }\r\n+                        exit;\r\n+                    } else {\r\n+                        $message = \"Incorrect password.\";\r\n+                        $alert_type = \"error\";\r\n+                    }\r\n+                } else {\r\n+                    $message = \"User not found.\";\r\n+                    $alert_type = \"error\";\r\n+                }\r\n+            }\r\n         }\r\n-    } else {\r\n-        $error = \"Admin not found!\";\r\n     }\r\n-}\r\n-?>\r\n \r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <title>Admin Login</title>\r\n-    <link rel=\"stylesheet\" href=\"../css/style.css\">\r\n-    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n-    <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-</head>\r\n-<style>\r\n- body {\r\n-    background-color: #e6e6e6;\r\n-    font-family: 'Segoe UI', sans-serif;\r\n-    margin: 0;\r\n-    padding: 0;\r\n-    background-color: #f0f2f5; /\r\n-}\r\n+    if ($action === 'register') {\r\n+        $username = trim($_POST['username'] ?? '');\r\n+        $first_name = trim($_POST['first_name'] ?? '');\r\n+        $middle_name = trim($_POST['middle_name'] ?? '');\r\n+        $last_name = trim($_POST['last_name'] ?? '');\r\n+        $email = trim($_POST['email'] ?? '');\r\n+        $raw_password = trim($_POST['password'] ?? '');\r\n \r\n-.container {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    align-items: center;\r\n-    min-height: 100vh;\r\n-    padding: 0 15px;\r\n-    background-color: #e6e6e6;\r\n-    box-shadow: none;           /* Remove outer shadow */\r\n-    border: none;               /* Remove border */\r\n-    background: white;\r\n-}\r\n+        if ($username && $first_name && $middle_name && $last_name && $email && $raw_password) {\r\n+            $password = password_hash($raw_password, PASSWORD_DEFAULT);\r\n+            $verification_code = bin2hex(random_bytes(16));\r\n \r\n-.login-box {\r\n-    flex-direction: row;\r\n-    width: 700px;\r\n-    border-radius: 20px;\r\n-    overflow: hidden;\r\n-    background: white;\r\n-    margin: 0 auto;\r\n-    box-shadow: none;\r\n-    border: 1px solid #ccc; \r\n-}\r\n-.left-panel {\r\n-    background: #2e7d32;\r\n-    color: white;\r\n-    width: 50%;\r\n-    padding: 50px 30px;\r\n-    display: flex;\r\n-    flex-direction: column;\r\n-    justify-content: center;\r\n-    border-top-left-radius: 25px;\r\n-    border-bottom-left-radius: 25px;\r\n-}\r\n+            $check = $conn->prepare(\"SELECT id FROM students WHERE email = ? OR username = ?\");\r\n+            $check->bind_param(\"ss\", $email, $username);\r\n+            $check->execute();\r\n+            $result = $check->get_result();\r\n \r\n-.left-panel h2 {\r\n-    font-size: 32px;\r\n-    margin-bottom: 15px;\r\n-}\r\n+            if ($result->num_rows > 0) {\r\n+                $message = \"Username or Email already exists.\";\r\n+                $alert_type = \"error\";\r\n+            } else {\r\n+                $stmt = $conn->prepare(\"INSERT INTO students (username, first_name, middle_name, last_name, email, password, verification_code) VALUES (?, ?, ?, ?, ?, ?, ?)\");\r\n+                $stmt->bind_param(\"sssssss\", $username, $first_name, $middle_name, $last_name, $email, $password, $verification_code);\r\n \r\n-.right-panel {\r\n-    width: 50%;\r\n-    padding: 50px 30px;\r\n-    display: flex;\r\n-    flex-direction: column;\r\n-    justify-content: center;\r\n-}\r\n+                if ($stmt->execute()) {\r\n+                    $mail = new PHPMailer(true);\r\n+                    try {\r\n+                        $mail->isSMTP();\r\n+                        $mail->Host = 'smtp.gmail.com';\r\n+                        $mail->SMTPAuth = true;\r\n+                        $mail->Username = 'jerickreyes982@gmail.com';\r\n+                        $mail->Password = 'efjbmtwsnvleklgb';\r\n+                        $mail->SMTPSecure = 'tls';\r\n+                        $mail->Port = 587;\r\n+                        $mail->setFrom('jerickreyes982@gmail.com', 'Enrollment System');\r\n+                        $mail->addAddress($email, $first_name);\r\n+                        $mail->isHTML(true);\r\n+                        $mail->Subject = 'Email Verification';\r\n+                        $mail->Body = \"Hi $first_name,<br><br>Click the link to verify your account:<br><a href='http://localhost/IT2C_Enrollment_System_SourceCode/verify.php?code=$verification_code'>Verify Email</a>\";\r\n \r\n-.right-panel h2 {\r\n-    font-size: 28px;\r\n-    margin-bottom: 20px;\r\n-    text-align: center;\r\n+                        $mail->send();\r\n+                        header(\"Location: login.php?registered=1\");\r\n+                        exit;\r\n+                    } catch (Exception $e) {\r\n+                        $message = \"Mailer Error: {$mail->ErrorInfo}\";\r\n+                        $alert_type = \"error\";\r\n+                    }\r\n+                } else {\r\n+                    $message = \"Registration failed.\";\r\n+                    $alert_type = \"error\";\r\n+                }\r\n+                $stmt->close();\r\n+            }\r\n+            $check->close();\r\n+        } else {\r\n+            $message = \"Please fill out all required fields.\";\r\n+            $alert_type = \"warning\";\r\n+        }\r\n+    }\r\n }\r\n+?>\r\n \r\n-.input-box {\r\n-    position: relative;\r\n-    margin-bottom: 20px;\r\n-}\r\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+  <meta charset=\"UTF-8\" />\r\n+  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n+  <title>Login/Register/Forgot Password</title>\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n+  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'/>\r\n+  <link rel=\"stylesheet\" href=\"/IT2C_Enrollment_System_SourceCode/CSS/style.css\">\r\n+  <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+  <style>\r\n+    .container {\r\n+      max-width: 1100px !important;\r\n+      height: 650px;\r\n+      margin: auto;\r\n+    }\r\n+    .form-box.forgot-password form button {\r\n+      display: block;\r\n+      width: 100%;\r\n+      margin-bottom: 10px;\r\n+    }\r\n+    .form-box form {\r\n+      overflow-y: auto;\r\n+      max-height: 85vh;\r\n+      padding-bottom: 20px;\r\n+    }\r\n+@media screen and (max-width: 650px) {\r\n+  .form-box {\r\n+    height: auto;\r\n+    max-height: 85vh;\r\n+    padding: 20px;\r\n+    overflow-y: auto;\r\n+  }\r\n \r\n-.input-box input {\r\n-    width: 100%;\r\n-    padding: 12px 40px 12px 15px;\r\n-    border: 1px solid #ccc;\r\n-    border-radius: 10px;\r\n-}\r\n+  .form-box form {\r\n+    max-height: none;\r\n+  }\r\n \r\n-.input-box i {\r\n-    position: absolute;\r\n-    right: 15px;\r\n-    top: 50%;\r\n-    transform: translateY(-50%);\r\n-    color: #777;\r\n-    cursor: pointer;\r\n-}\r\n+  .form-box.register form {\r\n+    max-height: 70vh;\r\n+    overflow-y: auto;\r\n+  }\r\n \r\n-.btn-login {\r\n-    background: #5c6bc0;\r\n-    color: white;\r\n-    border: none;\r\n-    padding: 12px;\r\n-    border-radius: 10px;\r\n-    font-size: 16px;\r\n-    cursor: pointer;\r\n-    transition: background 0.3s ease;\r\n-    width: 100%;\r\n+  .form-box.forgot-password {\r\n+    height: auto;\r\n+    max-height: 70vh;\r\n+    overflow-y: auto;\r\n+  }\r\n }\r\n-\r\n-.btn-login:hover {\r\n-    background: #3f51b5;\r\n-}\r\n-\r\n-.forgot {\r\n-    font-size: 13px;\r\n-    text-align: right;\r\n-    display: block;\r\n-    margin-bottom: 10px;\r\n-    color: #888;\r\n-    text-decoration: none;\r\n-}\r\n </style>\r\n+</head>\r\n <body>\r\n-<div class=\"container\">\r\n-    <div class=\"login-box\">\r\n-        <div class=\"left-panel\">\r\n-            <h2>Welcome Admin!</h2>\r\n-            <p>Use your admin credentials to access the dashboard.</p>\r\n+  <?php if ($message): ?>\r\n+    <script>\r\n+      Swal.fire({\r\n+        icon: '<?= $alert_type ?>',\r\n+        html: <?= json_encode($message) ?>,\r\n+        timer: 3000,\r\n+        showConfirmButton: false\r\n+      });\r\n+    </script>\r\n+  <?php endif; ?>\r\n+\r\n+  <div class=\"container\">\r\n+    <!-- Login Form -->\r\n+    <div class=\"form-box login\">\r\n+      <form method=\"POST\" action=\"\">\r\n+        <h1>Login</h1>\r\n+        <input type=\"hidden\" name=\"form_action\" value=\"login\" />\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n+          <i class='bx bxs-user'></i>\r\n         </div>\r\n-        <div class=\"right-panel\">\r\n-            <h2>Admin Login</h2>\r\n-            <?php if ($error): ?>\r\n-            <p style=\"color:red;\"><?= htmlspecialchars($error) ?></p>\r\n-            <?php endif; ?>\r\n-            <form method=\"POST\" novalidate>\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"form-control\" required>\r\n-                    <i class=\"bi bi-person\"></i>\r\n-                    <div class=\"invalid-feedback\">Please enter your username.</div>\r\n-                </div>\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"password\" name=\"password\" placeholder=\"Password\" class=\"form-control\" required id=\"admin-password\">\r\n-                    <i class=\"bi bi-lock\" id=\"togglePassword\"></i>\r\n-                    <div class=\"invalid-feedback\">Please enter your password.</div>\r\n-                </div>\r\n-                <!-- Uncomment if you already have forgot-password.php -->\r\n-                <!-- <a href=\"forgot-password.php\" class=\"forgot\">Forgot password?</a> -->\r\n-                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n-            </form>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n+          <i class='bx bxs-lock-alt'></i>\r\n         </div>\r\n+        <div class=\"forgot-link\">\r\n+          <a href=\"#\" id=\"forgotLink\">Forgot password?</a>\r\n+        </div>\r\n+        <button type=\"submit\" class=\"btn\">Login</button>\r\n+      </form>\r\n     </div>\r\n-</div>\r\n \r\n-<!-- Scripts -->\r\n-<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n-<script>\r\n-// Bootstrap validation\r\n-(() => {\r\n-  'use strict'\r\n-  const forms = document.querySelectorAll('form');\r\n-  Array.from(forms).forEach(form => {\r\n-    form.addEventListener('submit', event => {\r\n-      if (!form.checkValidity()) {\r\n-        event.preventDefault()\r\n-        event.stopPropagation()\r\n-      }\r\n-      form.classList.add('was-validated')\r\n-    }, false)\r\n-  })\r\n-})();\r\n+    <!-- Register Form -->\r\n+    <div class=\"form-box register\">\r\n+      <form method=\"POST\" action=\"\">\r\n+        <h1>Registration</h1>\r\n+        <input type=\"hidden\" name=\"form_action\" value=\"register\" />\r\n+          <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n+        </div>\r\n+        <!-- <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"student_ID\" placeholder=\"Student ID\" required />\r\n+        </div> -->\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"first_name\" placeholder=\"First Name\" required />\r\n+          <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"middle_name\" placeholder=\"Middle Name\" required />\r\n+        </div>\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"last_name\" placeholder=\"Last Name\" required />\r\n+        </div>\r\n+        <!-- <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"year_level\" placeholder=\"Year Level\" required />\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"text\" name=\"course\" placeholder=\"Course\" required />\r\n+        </div> -->\r\n+        <div class=\"input-box\">\r\n+          <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n+        </div>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"password\" name=\"password\" placeholder=\"Password Verification\" required />\r\n+        </div>\r\n+        <button type=\"submit\" class=\"btn\">Register</button>\r\n+      </form>\r\n+    </div>\r\n \r\n-// Toggle password visibility\r\n-document.getElementById('togglePassword').addEventListener('click', function () {\r\n-  const passwordInput = document.getElementById('admin-password');\r\n-  const icon = this;\r\n-  const isPassword = passwordInput.type === 'password';\r\n-  passwordInput.type = isPassword ? 'text' : 'password';\r\n-  icon.classList.toggle('bi-lock');\r\n-  icon.classList.toggle('bi-unlock');\r\n-});\r\n-</script>\r\n+    <!-- Forgot Password Form -->\r\n+    <div class=\"form-box forgot-password\">\r\n+      <form action=\"send-reset.php\" method=\"POST\">\r\n+        <h1>Forgot Password</h1>\r\n+        <div class=\"input-box\">\r\n+          <input type=\"email\" name=\"email\" placeholder=\"Enter your email\" required />\r\n+        </div>\r\n+        <p>We will send a reset link to your email.</p>\r\n+        <button type=\"submit\" class=\"btn\">Send Link</button>\r\n+        <button type=\"button\" class=\"btn login-btn\">Back to Login</button>\r\n+      </form>\r\n+    </div>\r\n+\r\n+    <!-- Panel Toggle -->\r\n+    <div class=\"toggle-box\">\r\n+      <div class=\"toggle-panel toggle-left\">\r\n+        <h1>Hello, Welcome!</h1>\r\n+        <p>Don't have an account?</p>\r\n+        <button class=\"btn register-btn\">Register</button>\r\n+      </div>\r\n+      <div class=\"toggle-panel toggle-right\">\r\n+        <h1>Welcome Back!</h1>\r\n+        <p>Already have an account?</p>\r\n+        <button class=\"btn login-btn\">Login</button>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n+  <script src=\"/IT2C_Enrollment_System_SourceCode/JS/script.js\"></script>\r\n </body>\r\n </html>\r\n"
                },
                {
                    "date": 1748601667939,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,294 +1,152 @@\n <?php\r\n session_start();\r\n-include '../db.php';\r\n+include '../db.php'; // adjust the path if needed\r\n \r\n-if (isset($_SESSION['student_id'])) {\r\n-    header(\"Location: ../student/student-dashboard.php\");\r\n-    exit;\r\n-}\r\n+if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n+    $username = trim($_POST[\"username\"]);\r\n+    $password = $_POST[\"password\"];\r\n \r\n-use PHPMailer\\PHPMailer\\PHPMailer;\r\n-use PHPMailer\\PHPMailer\\Exception;\r\n+    $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE username = ?\");\r\n+    $stmt->bind_param(\"s\", $username);\r\n+    $stmt->execute();\r\n+    $admin = $stmt->get_result()->fetch_assoc();\r\n \r\n-require '../PHPMailer/src/Exception.php';\r\n-require '../PHPMailer/src/PHPMailer.php';\r\n-require '../PHPMailer/src/SMTP.php';\r\n-\r\n-$message = \"\";\r\n-$alert_type = \"info\";\r\n-\r\n-if ($_SERVER['REQUEST_METHOD'] === 'POST') {\r\n-    $action = $_POST['form_action'] ?? '';\r\n-\r\n-    if ($action === 'login') {\r\n-        $username = trim($_POST['username'] ?? '');\r\n-        $password = $_POST['password'] ?? '';\r\n-        $account_type = $_POST['account_type'] ?? '';\r\n-\r\n-        if (!$username || !$password || !$account_type) {\r\n-            $message = \"Please fill all the fields.\";\r\n-            $alert_type = \"warning\";\r\n-        } else {\r\n-            if ($account_type === \"admin\") {\r\n-                $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE email = ?\");\r\n-                $stmt->bind_param(\"s\", $username);\r\n-            } elseif ($account_type === \"student\") {\r\n-                $stmt = $conn->prepare(\"SELECT * FROM students WHERE username = ?\");\r\n-                $stmt->bind_param(\"s\", $username);\r\n-            } else {\r\n-                $message = \"Invalid account type.\";\r\n-                $alert_type = \"error\";\r\n-            }\r\n-\r\n-            if (empty($message)) {\r\n-                $stmt->execute();\r\n-                $result = $stmt->get_result();\r\n-\r\n-                if ($result->num_rows === 1) {\r\n-                    $user = $result->fetch_assoc();\r\n-\r\n-                    if ($account_type === 'student' && $user['is_verified'] != 1) {\r\n-                        $message = \"Please verify your email first.\";\r\n-                        $alert_type = \"warning\";\r\n-                    } elseif (password_verify($password, $user['password'])) {\r\n-                        $_SESSION['role'] = $account_type;\r\n-                        if ($account_type === \"admin\") {\r\n-                            $_SESSION['admin_email'] = $user['email'];\r\n-                            header(\"Location: ../admin/dashboard.php\");\r\n-                        } else {\r\n-                        $_SESSION['student_id'] = $user['id'];\r\n-                        $_SESSION['student_username'] = $user['username'];\r\n-                        $_SESSION['student_number'] = $user['student_number'];\r\n-                            header(\"Location: ../student/student-dashboard.php\");\r\n-                        }\r\n-                        exit;\r\n-                    } else {\r\n-                        $message = \"Incorrect password.\";\r\n-                        $alert_type = \"error\";\r\n-                    }\r\n-                } else {\r\n-                    $message = \"User not found.\";\r\n-                    $alert_type = \"error\";\r\n-                }\r\n-            }\r\n-        }\r\n+    if ($admin && password_verify($password, $admin['password'])) {\r\n+        $_SESSION['admin_logged_in'] = true;\r\n+        $_SESSION['admin_username'] = $admin['username'];\r\n+        header(\"Location: ../admin/dashboard.php\");\r\n+        exit();\r\n+    } else {\r\n+        echo \"<script>\r\n+            Swal.fire({\r\n+                icon: 'error',\r\n+                title: 'Login Failed',\r\n+                text: 'Invalid admin username or password',\r\n+                confirmButtonColor: '#3085d6'\r\n+            }).then(() => {\r\n+                window.location.href='admin-login.php';\r\n+            });\r\n+        </script>\";\r\n     }\r\n-\r\n-    if ($action === 'register') {\r\n-        $username = trim($_POST['username'] ?? '');\r\n-        $first_name = trim($_POST['first_name'] ?? '');\r\n-        $middle_name = trim($_POST['middle_name'] ?? '');\r\n-        $last_name = trim($_POST['last_name'] ?? '');\r\n-        $email = trim($_POST['email'] ?? '');\r\n-        $raw_password = trim($_POST['password'] ?? '');\r\n-\r\n-        if ($username && $first_name && $middle_name && $last_name && $email && $raw_password) {\r\n-            $password = password_hash($raw_password, PASSWORD_DEFAULT);\r\n-            $verification_code = bin2hex(random_bytes(16));\r\n-\r\n-            $check = $conn->prepare(\"SELECT id FROM students WHERE email = ? OR username = ?\");\r\n-            $check->bind_param(\"ss\", $email, $username);\r\n-            $check->execute();\r\n-            $result = $check->get_result();\r\n-\r\n-            if ($result->num_rows > 0) {\r\n-                $message = \"Username or Email already exists.\";\r\n-                $alert_type = \"error\";\r\n-            } else {\r\n-                $stmt = $conn->prepare(\"INSERT INTO students (username, first_name, middle_name, last_name, email, password, verification_code) VALUES (?, ?, ?, ?, ?, ?, ?)\");\r\n-                $stmt->bind_param(\"sssssss\", $username, $first_name, $middle_name, $last_name, $email, $password, $verification_code);\r\n-\r\n-                if ($stmt->execute()) {\r\n-                    $mail = new PHPMailer(true);\r\n-                    try {\r\n-                        $mail->isSMTP();\r\n-                        $mail->Host = 'smtp.gmail.com';\r\n-                        $mail->SMTPAuth = true;\r\n-                        $mail->Username = 'jerickreyes982@gmail.com';\r\n-                        $mail->Password = 'efjbmtwsnvleklgb';\r\n-                        $mail->SMTPSecure = 'tls';\r\n-                        $mail->Port = 587;\r\n-                        $mail->setFrom('jerickreyes982@gmail.com', 'Enrollment System');\r\n-                        $mail->addAddress($email, $first_name);\r\n-                        $mail->isHTML(true);\r\n-                        $mail->Subject = 'Email Verification';\r\n-                        $mail->Body = \"Hi $first_name,<br><br>Click the link to verify your account:<br><a href='http://localhost/IT2C_Enrollment_System_SourceCode/verify.php?code=$verification_code'>Verify Email</a>\";\r\n-\r\n-                        $mail->send();\r\n-                        header(\"Location: login.php?registered=1\");\r\n-                        exit;\r\n-                    } catch (Exception $e) {\r\n-                        $message = \"Mailer Error: {$mail->ErrorInfo}\";\r\n-                        $alert_type = \"error\";\r\n-                    }\r\n-                } else {\r\n-                    $message = \"Registration failed.\";\r\n-                    $alert_type = \"error\";\r\n-                }\r\n-                $stmt->close();\r\n-            }\r\n-            $check->close();\r\n-        } else {\r\n-            $message = \"Please fill out all required fields.\";\r\n-            $alert_type = \"warning\";\r\n-        }\r\n-    }\r\n }\r\n ?>\r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n-  <meta charset=\"UTF-8\" />\r\n-  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n-  <title>Login/Register/Forgot Password</title>\r\n-  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n-  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'/>\r\n-  <link rel=\"stylesheet\" href=\"/IT2C_Enrollment_System_SourceCode/CSS/style.css\">\r\n-  <link rel=\"icon\" href=\"/IT2C_Enrollment_System_SourceCode/picture/tlgc_pic.jpg\" type=\"image/x-icon\">\r\n-  <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-  <style>\r\n-    .container {\r\n-      max-width: 1100px !important;\r\n-      height: 650px;\r\n-      margin: auto;\r\n-    }\r\n-    .form-box.forgot-password form button {\r\n-      display: block;\r\n-      width: 100%;\r\n-      margin-bottom: 10px;\r\n-    }\r\n-    .form-box form {\r\n-      overflow-y: auto;\r\n-      max-height: 85vh;\r\n-      padding-bottom: 20px;\r\n-    }\r\n-@media screen and (max-width: 650px) {\r\n-  .form-box {\r\n-    height: auto;\r\n-    max-height: 85vh;\r\n-    padding: 20px;\r\n-    overflow-y: auto;\r\n-  }\r\n-\r\n-  .form-box form {\r\n-    max-height: none;\r\n-  }\r\n-\r\n-  .form-box.register form {\r\n-    max-height: 70vh;\r\n-    overflow-y: auto;\r\n-  }\r\n-\r\n-  .form-box.forgot-password {\r\n-    height: auto;\r\n-    max-height: 70vh;\r\n-    overflow-y: auto;\r\n-  }\r\n-}\r\n-</style>\r\n+    <meta charset=\"UTF-8\">\r\n+    <title>Admin Login</title>\r\n+    <link rel=\"stylesheet\" href=\"../css/style.css\"> <!-- Use your existing login CSS -->\r\n+    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+    <style>\r\n+        /* You can remove this if already in your style.css */\r\n+        .container {\r\n+            display: flex;\r\n+            height: 100vh;\r\n+            justify-content: center;\r\n+            align-items: center;\r\n+            background: #e6e6e6;\r\n+            display: contents;\r\n+        }\r\n+        .login-box {\r\n+            display: flex;\r\n+            width: 900px;\r\n+            box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n+            border-radius: 25px;\r\n+            overflow: hidden;\r\n+        }\r\n+        .left-panel {\r\n+            background: #2e7d32;\r\n+            color: white;\r\n+            width: 50%;\r\n+            padding: 50px 30px;\r\n+            display: flex;\r\n+            flex-direction: column;\r\n+            justify-content: center;\r\n+            border-top-left-radius: 25px;\r\n+            border-bottom-left-radius: 25px;\r\n+        }\r\n+        .left-panel h2 {\r\n+            font-size: 32px;\r\n+            margin-bottom: 15px;\r\n+        }\r\n+        .right-panel {\r\n+            background: white;\r\n+            width: 50%;\r\n+            padding: 50px 30px;\r\n+            display: flex;\r\n+            flex-direction: column;\r\n+            justify-content: center;\r\n+        }\r\n+        .right-panel h2 {\r\n+            font-size: 28px;\r\n+            margin-bottom: 20px;\r\n+            text-align: center;\r\n+        }\r\n+        .input-box {\r\n+            position: relative;\r\n+            margin-bottom: 20px;\r\n+        }\r\n+        .input-box input {\r\n+            width: 100%;\r\n+            padding: 12px 40px 12px 15px;\r\n+            border: 1px solid #ccc;\r\n+            border-radius: 10px;\r\n+        }\r\n+        .input-box i {\r\n+            position: absolute;\r\n+            right: 15px;\r\n+            top: 50%;\r\n+            transform: translateY(-50%);\r\n+            color: #777;\r\n+        }\r\n+        .btn-login {\r\n+            background: #5c6bc0;\r\n+            color: white;\r\n+            border: none;\r\n+            padding: 12px;\r\n+            border-radius: 10px;\r\n+            font-size: 16px;\r\n+            cursor: pointer;\r\n+            transition: background 0.3s ease;\r\n+        }\r\n+        .btn-login:hover {\r\n+            background: #3f51b5;\r\n+        }\r\n+        .forgot {\r\n+            font-size: 13px;\r\n+            text-align: right;\r\n+            display: block;\r\n+            margin-bottom: 10px;\r\n+            color: #888;\r\n+            text-decoration: none;\r\n+        }\r\n+    </style>\r\n </head>\r\n <body>\r\n-  <?php if ($message): ?>\r\n-    <script>\r\n-      Swal.fire({\r\n-        icon: '<?= $alert_type ?>',\r\n-        html: <?= json_encode($message) ?>,\r\n-        timer: 3000,\r\n-        showConfirmButton: false\r\n-      });\r\n-    </script>\r\n-  <?php endif; ?>\r\n-\r\n-  <div class=\"container\">\r\n-    <!-- Login Form -->\r\n-    <div class=\"form-box login\">\r\n-      <form method=\"POST\" action=\"\">\r\n-        <h1>Login</h1>\r\n-        <input type=\"hidden\" name=\"form_action\" value=\"login\" />\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n-          <i class='bx bxs-user'></i>\r\n+<div class=\"container\">\r\n+    <div class=\"login-box\">\r\n+        <div class=\"left-panel\">\r\n+            <h2>Welcome Admin!</h2>\r\n+            <p>Use your admin credentials to access the dashboard.</p>\r\n         </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n-          <i class='bx bxs-lock-alt'></i>\r\n+        <div class=\"right-panel\">\r\n+            <h2>Admin Login</h2>\r\n+            <form method=\"POST\">\r\n+                <div class=\"input-box\">\r\n+                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n+                    <i class=\"bi bi-person\"></i>\r\n+                </div>\r\n+                <div class=\"input-box\">\r\n+                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n+                    <i class=\"bi bi-lock\"></i>\r\n+                </div>\r\n+                <!-- Optional: Uncomment if you want a Forgot Password link -->\r\n+                <!-- <a href=\"#\" class=\"forgot\">Forgot password?</a> -->\r\n+                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n+            </form>\r\n         </div>\r\n-        <div class=\"forgot-link\">\r\n-          <a href=\"#\" id=\"forgotLink\">Forgot password?</a>\r\n-        </div>\r\n-        <button type=\"submit\" class=\"btn\">Login</button>\r\n-      </form>\r\n     </div>\r\n-\r\n-    <!-- Register Form -->\r\n-    <div class=\"form-box register\">\r\n-      <form method=\"POST\" action=\"\">\r\n-        <h1>Registration</h1>\r\n-        <input type=\"hidden\" name=\"form_action\" value=\"register\" />\r\n-          <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n-        </div>\r\n-        <!-- <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"student_ID\" placeholder=\"Student ID\" required />\r\n-        </div> -->\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"first_name\" placeholder=\"First Name\" required />\r\n-          <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"middle_name\" placeholder=\"Middle Name\" required />\r\n-        </div>\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"last_name\" placeholder=\"Last Name\" required />\r\n-        </div>\r\n-        <!-- <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"year_level\" placeholder=\"Year Level\" required />\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"text\" name=\"course\" placeholder=\"Course\" required />\r\n-        </div> -->\r\n-        <div class=\"input-box\">\r\n-          <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n-        </div>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password Verification\" required />\r\n-        </div>\r\n-        <button type=\"submit\" class=\"btn\">Register</button>\r\n-      </form>\r\n-    </div>\r\n-\r\n-    <!-- Forgot Password Form -->\r\n-    <div class=\"form-box forgot-password\">\r\n-      <form action=\"send-reset.php\" method=\"POST\">\r\n-        <h1>Forgot Password</h1>\r\n-        <div class=\"input-box\">\r\n-          <input type=\"email\" name=\"email\" placeholder=\"Enter your email\" required />\r\n-        </div>\r\n-        <p>We will send a reset link to your email.</p>\r\n-        <button type=\"submit\" class=\"btn\">Send Link</button>\r\n-        <button type=\"button\" class=\"btn login-btn\">Back to Login</button>\r\n-      </form>\r\n-    </div>\r\n-\r\n-    <!-- Panel Toggle -->\r\n-    <div class=\"toggle-box\">\r\n-      <div class=\"toggle-panel toggle-left\">\r\n-        <h1>Hello, Welcome!</h1>\r\n-        <p>Don't have an account?</p>\r\n-        <button class=\"btn register-btn\">Register</button>\r\n-      </div>\r\n-      <div class=\"toggle-panel toggle-right\">\r\n-        <h1>Welcome Back!</h1>\r\n-        <p>Already have an account?</p>\r\n-        <button class=\"btn login-btn\">Login</button>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-\r\n-  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-  <script src=\"/IT2C_Enrollment_System_SourceCode/JS/script.js\"></script>\r\n+</div>\r\n </body>\r\n-</html>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748601984930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n \r\n     if ($admin && password_verify($password, $admin['password'])) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n         $_SESSION['admin_username'] = $admin['username'];\r\n-        header(\"Location: ../admin/dashboard.php\");\r\n+        header(\"Location: ../ADMIN/dashboard.php\");\r\n         exit();\r\n     } else {\r\n         echo \"<script>\r\n             Swal.fire({\r\n"
                },
                {
                    "date": 1748601996251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n \r\n     if ($admin && password_verify($password, $admin['password'])) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n         $_SESSION['admin_username'] = $admin['username'];\r\n-        header(\"Location: ../ADMIN/dashboard.php\");\r\n+        header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n         exit();\r\n     } else {\r\n         echo \"<script>\r\n             Swal.fire({\r\n"
                },
                {
                    "date": 1748602404105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,11 +12,11 @@\n     $admin = $stmt->get_result()->fetch_assoc();\r\n \r\n     if ($admin && password_verify($password, $admin['password'])) {\r\n         $_SESSION['admin_logged_in'] = true;\r\n-        $_SESSION['admin_username'] = $admin['username'];\r\n-        header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n-        exit();\r\n+if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in'] === true) {\r\n+    header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n+    exit();\r\n     } else {\r\n         echo \"<script>\r\n             Swal.fire({\r\n                 icon: 'error',\r\n"
                },
                {
                    "date": 1748602811260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,18 @@\n <?php\r\n session_start();\r\n-include '../db.php'; // adjust the path if needed\r\n+$timeout = 900;\r\n \r\n-if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n-    $username = trim($_POST[\"username\"]);\r\n-    $password = $_POST[\"password\"];\r\n+if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n+    session_unset();\r\n+    session_destroy();\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n+    exit();\r\n+}\r\n+$_SESSION['LAST_ACTIVITY'] = time();\r\n \r\n-    $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE username = ?\");\r\n-    $stmt->bind_param(\"s\", $username);\r\n-    $stmt->execute();\r\n-    $admin = $stmt->get_result()->fetch_assoc();\r\n-\r\n-    if ($admin && password_verify($password, $admin['password'])) {\r\n-        $_SESSION['admin_logged_in'] = true;\r\n-if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in'] === true) {\r\n-    header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n+if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n+    header(\"Location: ../logregfor/admin-login.php\");\r\n     exit();\r\n     } else {\r\n         echo \"<script>\r\n             Swal.fire({\r\n@@ -27,10 +24,10 @@\n                 window.location.href='admin-login.php';\r\n             });\r\n         </script>\";\r\n     }\r\n-}\r\n ?>\r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1748603016711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,33 +1,11 @@\n <?php\r\n session_start();\r\n-$timeout = 900;\r\n-\r\n-if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $timeout)) {\r\n-    session_unset();\r\n-    session_destroy();\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n+if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in'] === true) {\r\n+    header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n     exit();\r\n }\r\n-$_SESSION['LAST_ACTIVITY'] = time();\r\n-\r\n-if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {\r\n-    header(\"Location: ../logregfor/admin-login.php\");\r\n-    exit();\r\n-    } else {\r\n-        echo \"<script>\r\n-            Swal.fire({\r\n-                icon: 'error',\r\n-                title: 'Login Failed',\r\n-                text: 'Invalid admin username or password',\r\n-                confirmButtonColor: '#3085d6'\r\n-            }).then(() => {\r\n-                window.location.href='admin-login.php';\r\n-            });\r\n-        </script>\";\r\n-    }\r\n ?>\r\n-\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n"
                },
                {
                    "date": 1748603740836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n     header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n     exit();\r\n }\r\n ?>\r\n+\r\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n@@ -106,21 +107,13 @@\n             <p>Use your admin credentials to access the dashboard.</p>\r\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n-            <form method=\"POST\">\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n-                    <i class=\"bi bi-person\"></i>\r\n-                </div>\r\n-                <div class=\"input-box\">\r\n-                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n-                    <i class=\"bi bi-lock\"></i>\r\n-                </div>\r\n-                <!-- Optional: Uncomment if you want a Forgot Password link -->\r\n-                <!-- <a href=\"#\" class=\"forgot\">Forgot password?</a> -->\r\n-                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n-            </form>\r\n+            <form action=\"admin-process-login.php\" method=\"POST\">\r\n+    <input type=\"text\" name=\"username\" required>\r\n+    <input type=\"password\" name=\"password\" required>\r\n+    <button type=\"submit\">Login</button>\r\n+</form>\r\n         </div>\r\n     </div>\r\n </div>\r\n </body>\r\n"
                },
                {
                    "date": 1748603748768,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,12 +108,12 @@\n         </div>\r\n         <div class=\"right-panel\">\r\n             <h2>Admin Login</h2>\r\n             <form action=\"admin-process-login.php\" method=\"POST\">\r\n-    <input type=\"text\" name=\"username\" required>\r\n-    <input type=\"password\" name=\"password\" required>\r\n-    <button type=\"submit\">Login</button>\r\n-</form>\r\n+           <input type=\"text\" name=\"username\" required>\r\n+           <input type=\"password\" name=\"password\" required>\r\n+           <button type=\"submit\">Login</button>\r\n+          </form>\r\n         </div>\r\n     </div>\r\n </div>\r\n </body>\r\n"
                },
                {
                    "date": 1748603860317,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,115 +6,32 @@\n }\r\n ?>\r\n \r\n <!DOCTYPE html>\r\n-<html lang=\"en\">\r\n+<html>\r\n <head>\r\n-    <meta charset=\"UTF-8\">\r\n     <title>Admin Login</title>\r\n-    <link rel=\"stylesheet\" href=\"../css/style.css\"> <!-- Use your existing login CSS -->\r\n-    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    <style>\r\n-        /* You can remove this if already in your style.css */\r\n-        .container {\r\n-            display: flex;\r\n-            height: 100vh;\r\n-            justify-content: center;\r\n-            align-items: center;\r\n-            background: #e6e6e6;\r\n-            display: contents;\r\n-        }\r\n-        .login-box {\r\n-            display: flex;\r\n-            width: 900px;\r\n-            box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n-            border-radius: 25px;\r\n-            overflow: hidden;\r\n-        }\r\n-        .left-panel {\r\n-            background: #2e7d32;\r\n-            color: white;\r\n-            width: 50%;\r\n-            padding: 50px 30px;\r\n-            display: flex;\r\n-            flex-direction: column;\r\n-            justify-content: center;\r\n-            border-top-left-radius: 25px;\r\n-            border-bottom-left-radius: 25px;\r\n-        }\r\n-        .left-panel h2 {\r\n-            font-size: 32px;\r\n-            margin-bottom: 15px;\r\n-        }\r\n-        .right-panel {\r\n-            background: white;\r\n-            width: 50%;\r\n-            padding: 50px 30px;\r\n-            display: flex;\r\n-            flex-direction: column;\r\n-            justify-content: center;\r\n-        }\r\n-        .right-panel h2 {\r\n-            font-size: 28px;\r\n-            margin-bottom: 20px;\r\n-            text-align: center;\r\n-        }\r\n-        .input-box {\r\n-            position: relative;\r\n-            margin-bottom: 20px;\r\n-        }\r\n-        .input-box input {\r\n-            width: 100%;\r\n-            padding: 12px 40px 12px 15px;\r\n-            border: 1px solid #ccc;\r\n-            border-radius: 10px;\r\n-        }\r\n-        .input-box i {\r\n-            position: absolute;\r\n-            right: 15px;\r\n-            top: 50%;\r\n-            transform: translateY(-50%);\r\n-            color: #777;\r\n-        }\r\n-        .btn-login {\r\n-            background: #5c6bc0;\r\n-            color: white;\r\n-            border: none;\r\n-            padding: 12px;\r\n-            border-radius: 10px;\r\n-            font-size: 16px;\r\n-            cursor: pointer;\r\n-            transition: background 0.3s ease;\r\n-        }\r\n-        .btn-login:hover {\r\n-            background: #3f51b5;\r\n-        }\r\n-        .forgot {\r\n-            font-size: 13px;\r\n-            text-align: right;\r\n-            display: block;\r\n-            margin-bottom: 10px;\r\n-            color: #888;\r\n-            text-decoration: none;\r\n-        }\r\n-    </style>\r\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n </head>\r\n-<body>\r\n-<div class=\"container\">\r\n-    <div class=\"login-box\">\r\n-        <div class=\"left-panel\">\r\n-            <h2>Welcome Admin!</h2>\r\n-            <p>Use your admin credentials to access the dashboard.</p>\r\n+<body class=\"bg-light\">\r\n+    <div class=\"container mt-5\">\r\n+        <div class=\"row justify-content-center\">\r\n+            <div class=\"col-md-4\">\r\n+                <div class=\"card shadow p-4\">\r\n+                    <h4 class=\"text-center mb-3\">Admin Login</h4>\r\n+                    <form method=\"POST\" action=\"admin-process-login.php\">\r\n+                        <div class=\"mb-3\">\r\n+                            <label for=\"username\" class=\"form-label\">Username</label>\r\n+                            <input type=\"text\" name=\"username\" class=\"form-control\" required>\r\n+                        </div>\r\n\\ No newline at end of file\n+                        <div class=\"mb-3\">\r\n+                            <label for=\"password\" class=\"form-label\">Password</label>\r\n+                            <input type=\"password\" name=\"password\" class=\"form-control\" required>\r\n+                        </div>\r\n+                        <button type=\"submit\" class=\"btn btn-success w-100\">Login</button>\r\n+                    </form>\r\n+                </div>\r\n+            </div>\r\n         </div>\r\n-        <div class=\"right-panel\">\r\n-            <h2>Admin Login</h2>\r\n-            <form action=\"admin-process-login.php\" method=\"POST\">\r\n-           <input type=\"text\" name=\"username\" required>\r\n-           <input type=\"password\" name=\"password\" required>\r\n-           <button type=\"submit\">Login</button>\r\n-          </form>\r\n-        </div>\r\n     </div>\r\n-</div>\r\n </body>\r\n-</html>\n+</html>\r\n"
                },
                {
                    "date": 1748603861262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,5 +33,5 @@\n             </div>\r\n         </div>\r\n     </div>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1748607052745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,18 +18,14 @@\n             <div class=\"col-md-4\">\r\n                 <div class=\"card shadow p-4\">\r\n                     <h4 class=\"text-center mb-3\">Admin Login</h4>\r\n                     <form method=\"POST\" action=\"admin-process-login.php\">\r\n-                        <div class=\"mb-3\">\r\n-                            <label for=\"username\" class=\"form-label\">Username</label>\r\n-                            <input type=\"text\" name=\"username\" class=\"form-control\" required>\r\n-                        </div>\r\n-                        <div class=\"mb-3\">\r\n-                            <label for=\"password\" class=\"form-label\">Password</label>\r\n-                            <input type=\"password\" name=\"password\" class=\"form-control\" required>\r\n-                        </div>\r\n-                        <button type=\"submit\" class=\"btn btn-success w-100\">Login</button>\r\n-                    </form>\r\n+    <label>Email:</label>\r\n+    <input type=\"email\" name=\"email\" required>\r\n+    <label>Password:</label>\r\n+    <input type=\"password\" name=\"password\" required>\r\n+    <button type=\"submit\">Login</button>\r\n+</form>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1748609556880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,9 @@\n+<!-- admin acccount\r\n+\r\n+email:    admin@example.com\r\n+password: admin123 -->\r\n+\r\n <?php\r\n session_start();\r\n if (isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in'] === true) {\r\n     header(\"Location: ../ADMIN/admin-dashboard.php\");\r\n@@ -18,14 +23,14 @@\n             <div class=\"col-md-4\">\r\n                 <div class=\"card shadow p-4\">\r\n                     <h4 class=\"text-center mb-3\">Admin Login</h4>\r\n                     <form method=\"POST\" action=\"admin-process-login.php\">\r\n-    <label>Email:</label>\r\n-    <input type=\"email\" name=\"email\" required>\r\n-    <label>Password:</label>\r\n-    <input type=\"password\" name=\"password\" required>\r\n-    <button type=\"submit\">Login</button>\r\n-</form>\r\n+                    <label>Email:</label>\r\n+                    <input type=\"email\" name=\"email\" required>\r\n+                    <label>Password:</label>\r\n+                    <input type=\"password\" name=\"password\" required>\r\n+                    <button type=\"submit\">Login</button>\r\n+                </form>\r\n                 </div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n"
                }
            ],
            "date": 1748595641911,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\ninclude '../db.php'; // adjust the path if needed\r\n\r\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\r\n    $username = trim($_POST[\"username\"]);\r\n    $password = $_POST[\"password\"];\r\n\r\n    $stmt = $conn->prepare(\"SELECT * FROM admin_settings WHERE username = ?\");\r\n    $stmt->bind_param(\"s\", $username);\r\n    $stmt->execute();\r\n    $admin = $stmt->get_result()->fetch_assoc();\r\n\r\n    if ($admin && password_verify($password, $admin['password'])) {\r\n        $_SESSION['admin_logged_in'] = true;\r\n        $_SESSION['admin_username'] = $admin['username'];\r\n        header(\"Location: ../admin/dashboard.php\");\r\n        exit();\r\n    } else {\r\n        echo \"<script>\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Login Failed',\r\n                text: 'Invalid admin username or password',\r\n                confirmButtonColor: '#3085d6'\r\n            }).then(() => {\r\n                window.location.href='admin-login.php';\r\n            });\r\n        </script>\";\r\n    }\r\n}\r\n?>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Admin Login</title>\r\n    <link rel=\"stylesheet\" href=\"../css/style.css\"> <!-- Use your existing login CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css\">\r\n    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n    <style>\r\n        /* You can remove this if already in your style.css */\r\n        .container {\r\n            display: flex;\r\n            height: 100vh;\r\n            justify-content: center;\r\n            align-items: center;\r\n            background: #e6e6e6;\r\n        }\r\n        .login-box {\r\n            display: flex;\r\n            width: 900px;\r\n            box-shadow: 0 0 20px rgba(0,0,0,0.2);\r\n            border-radius: 25px;\r\n            overflow: hidden;\r\n        }\r\n        .left-panel {\r\n            background: #2e7d32;\r\n            color: white;\r\n            width: 50%;\r\n            padding: 50px 30px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: center;\r\n            border-top-left-radius: 25px;\r\n            border-bottom-left-radius: 25px;\r\n        }\r\n        .left-panel h2 {\r\n            font-size: 32px;\r\n            margin-bottom: 15px;\r\n        }\r\n        .right-panel {\r\n            background: white;\r\n            width: 50%;\r\n            padding: 50px 30px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: center;\r\n        }\r\n        .right-panel h2 {\r\n            font-size: 28px;\r\n            margin-bottom: 20px;\r\n            text-align: center;\r\n        }\r\n        .input-box {\r\n            position: relative;\r\n            margin-bottom: 20px;\r\n        }\r\n        .input-box input {\r\n            width: 100%;\r\n            padding: 12px 40px 12px 15px;\r\n            border: 1px solid #ccc;\r\n            border-radius: 10px;\r\n        }\r\n        .input-box i {\r\n            position: absolute;\r\n            right: 15px;\r\n            top: 50%;\r\n            transform: translateY(-50%);\r\n            color: #777;\r\n        }\r\n        .btn-login {\r\n            background: #5c6bc0;\r\n            color: white;\r\n            border: none;\r\n            padding: 12px;\r\n            border-radius: 10px;\r\n            font-size: 16px;\r\n            cursor: pointer;\r\n            transition: background 0.3s ease;\r\n        }\r\n        .btn-login:hover {\r\n            background: #3f51b5;\r\n        }\r\n        .forgot {\r\n            font-size: 13px;\r\n            text-align: right;\r\n            display: block;\r\n            margin-bottom: 10px;\r\n            color: #888;\r\n            text-decoration: none;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n<div class=\"container\">\r\n    <div class=\"login-box\">\r\n        <div class=\"left-panel\">\r\n            <h2>Welcome Admin!</h2>\r\n            <p>Use your admin credentials to access the dashboard.</p>\r\n        </div>\r\n        <div class=\"right-panel\">\r\n            <h2>Admin Login</h2>\r\n            <form method=\"POST\">\r\n                <div class=\"input-box\">\r\n                    <input type=\"text\" name=\"username\" placeholder=\"Username\" required>\r\n                    <i class=\"bi bi-person\"></i>\r\n                </div>\r\n                <div class=\"input-box\">\r\n                    <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\r\n                    <i class=\"bi bi-lock\"></i>\r\n                </div>\r\n                <!-- Optional: Uncomment if you want a Forgot Password link -->\r\n                <!-- <a href=\"#\" class=\"forgot\">Forgot password?</a> -->\r\n                <button type=\"submit\" class=\"btn-login\">Login</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n</body>\r\n</html>\r\n"
        }
    ]
}