{
    "sourceFile": "logregfor/login.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1749394312742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749394322843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n-            --primary-green:rgb(90, 136, 92);\n+            --primary-green:rgb(204, 230, 205);\n             --light-green: #e8f5e9;\n             --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n"
                },
                {
                    "date": 1749394339138,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n-            --primary-green:rgb(204, 230, 205);\n+            --primary-green:rgb(60, 109, 61);\n             --light-green: #e8f5e9;\n             --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n"
                },
                {
                    "date": 1749394537685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n-            --primary-green:rgb(60, 109, 61);\n+            --primary-green:rgb(108, 114, 108);\n             --light-green: #e8f5e9;\n             --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n"
                },
                {
                    "date": 1749394548839,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n-            --primary-green:rgb(108, 114, 108);\n+            --primary-green:rgb(222, 233, 222);\n             --light-green: #e8f5e9;\n             --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n"
                },
                {
                    "date": 1749394567975,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n             --primary-green:rgb(222, 233, 222);\n-            --light-green: #e8f5e9;\n+            --light-green:rgb(47, 114, 52);\n             --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n         }\n"
                },
                {
                    "date": 1749394580515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,9 +106,9 @@\n     <style>\n         :root {\n             --primary-green:rgb(222, 233, 222);\n             --light-green:rgb(47, 114, 52);\n-            --accent-green: #43a047;\n+            --accent-green:rgb(40, 110, 44);\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n         }\n \n"
                },
                {
                    "date": 1749394595672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,11 +104,11 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n-            --primary-green:rgb(222, 233, 222);\n-            --light-green:rgb(47, 114, 52);\n-            --accent-green:rgb(40, 110, 44);\n+            --primary-green:rgb(221, 235, 222);\n+            --light-green: #e8f5e9;\n+            --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n         }\n \n"
                },
                {
                    "date": 1749394605231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n     <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n     <style>\n         :root {\n-            --primary-green:rgb(221, 235, 222);\n+            --primary-green:rgb(204, 230, 205);\n             --light-green: #e8f5e9;\n             --accent-green: #43a047;\n             --hover-green: #c8e6c9;\n             --dark-green: #1b5e20;\n"
                }
            ],
            "date": 1749394312742,
            "name": "Commit-0",
            "content": "<?php\nsession_start();\n\n// Redirect if already logged in\nif (isset($_SESSION['student_id'])) {\n    header(\"Location: ../student/student-dashboard.php\");\n    exit;\n}\n\nrequire_once '../db.php';\n\n$message = '';\n$messageType = '';\n\n// Handle Registration\nif ($_SERVER['REQUEST_METHOD'] === 'POST' && ($_POST['form_action'] ?? '') === 'register') {\n    $username = trim($_POST['username'] ?? '');\n    $firstName = trim($_POST['first_name'] ?? '');\n    $middleName = trim($_POST['middle_name'] ?? '');\n    $lastName = trim($_POST['last_name'] ?? '');\n    $email = trim($_POST['email'] ?? '');\n    $password = $_POST['password'] ?? '';\n    $confirmPassword = $_POST['confirm_password'] ?? '';\n\n    $errors = [];\n\n    // Validation\n    if (empty($username)) $errors[] = \"Username is required.\";\n    if (empty($firstName)) $errors[] = \"First name is required.\";\n    if (empty($lastName)) $errors[] = \"Last name is required.\";\n    if (empty($email) || !filter_var($email, FILTER_VALIDATE_EMAIL)) $errors[] = \"Valid email is required.\";\n    if (empty($password)) $errors[] = \"Password is required.\";\n    if (strlen($password) < 6) $errors[] = \"Password must be at least 6 characters long.\";\n    if ($password !== $confirmPassword) $errors[] = \"Passwords do not match.\";\n\n    // Check if username or email already exists\n    if (empty($errors)) {\n        $stmt = $pdo->prepare(\"SELECT student_id FROM students WHERE username = ? OR email = ?\");\n        $stmt->execute([$username, $email]);\n        if ($stmt->fetch()) {\n            $errors[] = \"Username or email already exists.\";\n        }\n    }\n\n    if (empty($errors)) {\n        try {\n            $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n            $stmt = $pdo->prepare(\"INSERT INTO students (username, first_name, middle_name, last_name, email, password) VALUES (?, ?, ?, ?, ?, ?)\");\n            $stmt->execute([$username, $firstName, $middleName, $lastName, $email, $hashedPassword]);\n            \n            $message = \"Registration successful! You can now log in.\";\n            $messageType = \"success\";\n        } catch (PDOException $e) {\n            $errors[] = \"Registration failed. Please try again.\";\n        }\n    }\n\n    if (!empty($errors)) {\n        $message = implode('<br>', $errors);\n        $messageType = \"danger\";\n    }\n}\n\n// Handle Login\nif ($_SERVER['REQUEST_METHOD'] === 'POST' && ($_POST['form_action'] ?? '') === 'login') {\n    $username = trim($_POST['username'] ?? '');\n    $password = $_POST['password'] ?? '';\n\n    if (empty($username) || empty($password)) {\n        $message = \"Please enter both username and password.\";\n        $messageType = \"warning\";\n    } else {\n        try {\n            $stmt = $pdo->prepare(\"SELECT student_id, password, first_name FROM students WHERE username = ? OR email = ?\");\n            $stmt->execute([$username, $username]);\n            $user = $stmt->fetch();\n\n            if ($user && password_verify($password, $user['password'])) {\n                $_SESSION['student_id'] = $user['student_id'];\n                $_SESSION['student_name'] = $user['first_name'];\n                $_SESSION['login_time'] = time();\n                \n                header(\"Location: ../student/student-dashboard.php\");\n                exit;\n            } else {\n                $message = \"Invalid username/email or password.\";\n                $messageType = \"danger\";\n            }\n        } catch (PDOException $e) {\n            $message = \"Login failed. Please try again.\";\n            $messageType = \"danger\";\n        }\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>Student Portal - Top Link Global College</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n    <link rel=\"icon\" href=\"../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n    <style>\n        :root {\n            --primary-green:rgb(90, 136, 92);\n            --light-green: #e8f5e9;\n            --accent-green: #43a047;\n            --hover-green: #c8e6c9;\n            --dark-green: #1b5e20;\n        }\n\n        body {\n            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);\n            min-height: 100vh;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .login-container {\n            background: rgba(255, 255, 255, 0.95);\n            backdrop-filter: blur(10px);\n            border-radius: 20px;\n            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n            overflow: hidden;\n            width: 100%;\n            max-width: 900px;\n            min-height: 600px;\n            display: flex;\n        }\n\n        .login-form-section {\n            flex: 1;\n            padding: 3rem;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n        }\n\n        .register-form-section {\n            flex: 1;\n            padding: 3rem;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            background: linear-gradient(135deg, var(--light-green) 0%, #f1f8e9 100%);\n        }\n\n        .school-header {\n            text-align: center;\n            margin-bottom: 2rem;\n        }\n\n        .school-logo {\n            width: 80px;\n            height: 80px;\n            object-fit: cover;\n            border-radius: 50%;\n            border: 4px solid var(--accent-green);\n            margin-bottom: 1rem;\n        }\n\n        .school-name {\n            color: var(--primary-green);\n            font-weight: 700;\n            font-size: 1.5rem;\n            margin-bottom: 0.5rem;\n        }\n\n        .school-subtitle {\n            color: #666;\n            font-size: 0.9rem;\n        }\n\n        .form-title {\n            color: var(--primary-green);\n            font-weight: 700;\n            font-size: 1.8rem;\n            margin-bottom: 1.5rem;\n            text-align: center;\n        }\n\n        .form-control {\n            border: 2px solid #e0e0e0;\n            border-radius: 10px;\n            padding: 12px 15px;\n            transition: all 0.3s ease;\n            background-color: #fafafa;\n        }\n\n        .form-control:focus {\n            border-color: var(--accent-green);\n            box-shadow: 0 0 0 0.25rem rgba(67, 160, 71, 0.25);\n            background-color: #fff;\n        }\n\n        .btn-login {\n            background: linear-gradient(135deg, var(--accent-green) 0%, var(--primary-green) 100%);\n            border: none;\n            color: white;\n            font-weight: 600;\n            padding: 12px 30px;\n            border-radius: 25px;\n            transition: all 0.3s ease;\n            width: 100%;\n        }\n\n        .btn-login:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 20px rgba(67, 160, 71, 0.4);\n            color: white;\n        }\n\n        .btn-toggle {\n            background: transparent;\n            border: 2px solid var(--accent-green);\n            color: var(--accent-green);\n            font-weight: 600;\n            padding: 8px 20px;\n            border-radius: 20px;\n            transition: all 0.3s ease;\n            margin-top: 1rem;\n        }\n\n        .btn-toggle:hover {\n            background: var(--accent-green);\n            color: white;\n        }\n\n        .form-section {\n            display: none;\n        }\n\n        .form-section.active {\n            display: block;\n        }\n\n        .input-group {\n            position: relative;\n            margin-bottom: 1rem;\n        }\n\n        .input-group i {\n            position: absolute;\n            left: 15px;\n            top: 50%;\n            transform: translateY(-50%);\n            color: #666;\n            z-index: 10;\n        }\n\n        .input-group .form-control {\n            padding-left: 45px;\n        }\n\n        .forgot-password {\n            text-align: center;\n            margin-top: 1rem;\n        }\n\n        .forgot-password a {\n            color: var(--accent-green);\n            text-decoration: none;\n            font-size: 0.9rem;\n        }\n\n        .forgot-password a:hover {\n            text-decoration: underline;\n        }\n\n        @media (max-width: 768px) {\n            .login-container {\n                flex-direction: column;\n                margin: 1rem;\n                min-height: auto;\n            }\n            \n            .login-form-section,\n            .register-form-section {\n                padding: 2rem;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"login-container\">\n        <!-- Login Section -->\n        <div class=\"login-form-section\">\n            <div class=\"school-header\">\n                <img src=\"../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\n                <div class=\"school-name\">Top Link Global College</div>\n                <div class=\"school-subtitle\">Student Portal</div>\n            </div>\n\n            <?php if ($message): ?>\n                <div class=\"alert alert-<?= $messageType ?> alert-dismissible fade show\" role=\"alert\">\n                    <?= $message ?>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                </div>\n            <?php endif; ?>\n\n            <!-- Login Form -->\n            <div class=\"form-section active\" id=\"loginForm\">\n                <h3 class=\"form-title\">Welcome Back</h3>\n                <form method=\"POST\" action=\"\">\n                    <input type=\"hidden\" name=\"form_action\" value=\"login\">\n                    \n                    <div class=\"input-group\">\n                        <i class=\"bi bi-person\"></i>\n                        <input type=\"text\" class=\"form-control\" name=\"username\" placeholder=\"Username or Email\" required>\n                    </div>\n\n                    <div class=\"input-group\">\n                        <i class=\"bi bi-lock\"></i>\n                        <input type=\"password\" class=\"form-control\" name=\"password\" placeholder=\"Password\" required>\n                    </div>\n\n                    <button type=\"submit\" class=\"btn-login\">\n                        <i class=\"bi bi-box-arrow-in-right\"></i> Sign In\n                    </button>\n                </form>\n\n                <div class=\"forgot-password\">\n                    <a href=\"forgot-password.php\">Forgot your password?</a>\n                </div>\n\n                <div class=\"text-center\">\n                    <button type=\"button\" class=\"btn-toggle\" onclick=\"toggleForm()\">\n                        Don't have an account? Register\n                    </button>\n                </div>\n            </div>\n\n            <!-- Register Form -->\n            <div class=\"form-section\" id=\"registerForm\">\n                <h3 class=\"form-title\">Create Account</h3>\n                <form method=\"POST\" action=\"\">\n                    <input type=\"hidden\" name=\"form_action\" value=\"register\">\n                    \n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-person\"></i>\n                                <input type=\"text\" class=\"form-control\" name=\"username\" placeholder=\"Username\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-envelope\"></i>\n                                <input type=\"email\" class=\"form-control\" name=\"email\" placeholder=\"Email\" required>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-md-4\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-person-badge\"></i>\n                                <input type=\"text\" class=\"form-control\" name=\"first_name\" placeholder=\"First Name\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-md-4\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-person-badge\"></i>\n                                <input type=\"text\" class=\"form-control\" name=\"middle_name\" placeholder=\"Middle Name\">\n                            </div>\n                        </div>\n                        <div class=\"col-md-4\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-person-badge\"></i>\n                                <input type=\"text\" class=\"form-control\" name=\"last_name\" placeholder=\"Last Name\" required>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-lock\"></i>\n                                <input type=\"password\" class=\"form-control\" name=\"password\" placeholder=\"Password\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <div class=\"input-group\">\n                                <i class=\"bi bi-lock-fill\"></i>\n                                <input type=\"password\" class=\"form-control\" name=\"confirm_password\" placeholder=\"Confirm Password\" required>\n                            </div>\n                        </div>\n                    </div>\n\n                    <button type=\"submit\" class=\"btn-login\">\n                        <i class=\"bi bi-person-plus\"></i> Create Account\n                    </button>\n                </form>\n\n                <div class=\"text-center\">\n                    <button type=\"button\" class=\"btn-toggle\" onclick=\"toggleForm()\">\n                        Already have an account? Sign In\n                    </button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Info Section -->\n        <div class=\"register-form-section\">\n            <div class=\"text-center\">\n                <h4 class=\"text-success mb-4\">Join Our Community</h4>\n                <div class=\"mb-4\">\n                    <i class=\"bi bi-mortarboard\" style=\"font-size: 4rem; color: var(--accent-green);\"></i>\n                </div>\n                <h5 class=\"mb-3\">Quality Education for Your Future</h5>\n                <p class=\"text-muted mb-4\">\n                    Access your student portal to manage enrollments, view grades, \n                    upload documents, and stay connected with your academic journey.\n                </p>\n                <div class=\"row text-center\">\n                    <div class=\"col-4\">\n                        <i class=\"bi bi-journal-check\" style=\"font-size: 2rem; color: var(--accent-green);\"></i>\n                        <p class=\"small mt-2\">Easy Enrollment</p>\n                    </div>\n                    <div class=\"col-4\">\n                        <i class=\"bi bi-cloud-upload\" style=\"font-size: 2rem; color: var(--accent-green);\"></i>\n                        <p class=\"small mt-2\">Document Upload</p>\n                    </div>\n                    <div class=\"col-4\">\n                        <i class=\"bi bi-graph-up\" style=\"font-size: 2rem; color: var(--accent-green);\"></i>\n                        <p class=\"small mt-2\">Track Progress</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        function toggleForm() {\n            const loginForm = document.getElementById('loginForm');\n            const registerForm = document.getElementById('registerForm');\n            \n            if (loginForm.classList.contains('active')) {\n                loginForm.classList.remove('active');\n                registerForm.classList.add('active');\n            } else {\n                registerForm.classList.remove('active');\n                loginForm.classList.add('active');\n            }\n        }\n\n        // Form validation\n        document.querySelectorAll('form').forEach(form => {\n            form.addEventListener('submit', function(e) {\n                const passwords = this.querySelectorAll('input[type=\"password\"]');\n                if (passwords.length === 2) {\n                    if (passwords[0].value !== passwords[1].value) {\n                        e.preventDefault();\n                        alert('Passwords do not match!');\n                        return false;\n                    }\n                    if (passwords[0].value.length < 6) {\n                        e.preventDefault();\n                        alert('Password must be at least 6 characters long!');\n                        return false;\n                    }\n                }\n            });\n        });\n    </script>\n</body>\n</html>\n"
        }
    ]
}