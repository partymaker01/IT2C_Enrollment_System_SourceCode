{
    "sourceFile": "student/Documents/View Uploaded Files.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1749395073242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1749395073242,
            "name": "Commit-0",
            "content": "<?php\nsession_start();\n\nif (!isset($_SESSION['student_id'])) {\n    header(\"Location: ../../logregfor/login.php\");\n    exit;\n}\n\nrequire_once '../../db.php';\n\n$student_id = $_SESSION['student_id'];\n\n// Fetch uploaded documents\n$stmt = $pdo->prepare(\"SELECT * FROM uploaded_documents WHERE student_id = ? ORDER BY upload_date DESC\");\n$stmt->execute([$student_id]);\n$documents = $stmt->fetchAll();\n\n// Helper functions\nfunction getStatusClass($status) {\n    return match(strtolower($status)) {\n        'uploaded' => 'bg-primary',\n        'verified' => 'bg-success',\n        'rejected' => 'bg-danger',\n        'pending' => 'bg-warning text-dark',\n        default => 'bg-secondary'\n    };\n}\n\nfunction getStatusIcon($status) {\n    return match(strtolower($status)) {\n        'uploaded' => 'bi-upload',\n        'verified' => 'bi-check-circle',\n        'rejected' => 'bi-x-circle',\n        'pending' => 'bi-clock',\n        default => 'bi-file'\n    };\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>View Uploaded Files - Student Portal</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css\" rel=\"stylesheet\">\n    <link rel=\"icon\" href=\"../../picture/tlgc_pic.jpg\" type=\"image/x-icon\">\n    <style>\n        :root {\n            --primary-green: #2e7d32;\n            --light-green: #e8f5e9;\n            --accent-green: #43a047;\n            --hover-green: #c8e6c9;\n            --dark-green: #1b5e20;\n        }\n\n        body {\n            background: linear-gradient(135deg, var(--light-green) 0%, #f1f8e9 100%);\n            min-height: 100vh;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        }\n\n        .navbar {\n            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);\n            box-shadow: 0 2px 10px rgba(46, 125, 50, 0.3);\n        }\n\n        .navbar-brand, .nav-link {\n            color: #fff !important;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n        }\n\n        .nav-link:hover {\n            color: var(--hover-green) !important;\n        }\n\n        .school-logo {\n            width: 50px;\n            height: 50px;\n            object-fit: cover;\n            border-radius: 50%;\n            margin-right: 15px;\n            border: 3px solid #fff;\n        }\n\n        .documents-card {\n            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n            border-radius: 20px;\n            box-shadow: 0 10px 30px rgba(46, 125, 50, 0.15);\n            padding: 2rem;\n            border: 1px solid rgba(46, 125, 50, 0.1);\n        }\n\n        .section-title {\n            color: var(--primary-green);\n            font-weight: 700;\n            margin-bottom: 1.5rem;\n            position: relative;\n            padding-bottom: 10px;\n        }\n\n        .section-title::after {\n            content: '';\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 50px;\n            height: 3px;\n            background: linear-gradient(90deg, var(--accent-green), var(--primary-green));\n            border-radius: 2px;\n        }\n\n        .table {\n            border-radius: 15px;\n            overflow: hidden;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);\n        }\n\n        .table thead th {\n            background: linear-gradient(135deg, var(--accent-green) 0%, var(--primary-green) 100%);\n            color: white;\n            border: none;\n            font-weight: 600;\n        }\n\n        .table tbody tr {\n            transition: all 0.3s ease;\n        }\n\n        .table tbody tr:hover {\n            background-color: var(--light-green);\n            transform: scale(1.01);\n        }\n\n        .document-card {\n            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n            border-radius: 15px;\n            padding: 1.5rem;\n            margin-bottom: 1rem;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);\n            transition: all 0.3s ease;\n        }\n\n        .document-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n        }\n\n        .btn-custom {\n            background: linear-gradient(135deg, var(--accent-green) 0%, var(--primary-green) 100%);\n            border: none;\n            color: white;\n            font-weight: 600;\n            padding: 8px 16px;\n            border-radius: 20px;\n            transition: all 0.3s ease;\n            text-decoration: none;\n            display: inline-block;\n            margin: 0.25rem;\n        }\n\n        .btn-custom:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 5px 15px rgba(67, 160, 71, 0.4);\n            color: white;\n        }\n    </style>\n</head>\n<body>\n    <!-- Navigation -->\n    <nav class=\"navbar navbar-expand-lg\">\n        <div class=\"container\">\n            <a class=\"navbar-brand d-flex align-items-center\" href=\"../student-dashboard.php\">\n                <img src=\"../../picture/tlgc_pic.jpg\" alt=\"School Logo\" class=\"school-logo\">\n                <span>Student Portal</span>\n            </a>\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n                <ul class=\"navbar-nav ms-auto\">\n                    <li class=\"nav-item\">\n                        <a class=\"nav-link\" href=\"../student-dashboard.php\">\n                            <i class=\"bi bi-arrow-left\"></i> Back to Dashboard\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"container my-4\">\n        <h2 class=\"section-title\">\n            <i class=\"bi bi-files\"></i>\n            My Uploaded Documents\n        </h2>\n\n        <div class=\"documents-card\">\n            <?php if (empty($documents)): ?>\n                <div class=\"text-center py-5\">\n                    <i class=\"bi bi-file-earmark-x\" style=\"font-size: 4rem; color: #6c757d;\"></i>\n                    <h4 class=\"text-muted mt-3\">No Documents Found</h4>\n                    <p class=\"text-muted\">You haven't uploaded any documents yet.</p>\n                    <a href=\"UploadRequirements.php\" class=\"btn-custom\">\n                        <i class=\"bi bi-upload me-2\"></i>Upload Your First Document\n                    </a>\n                </div>\n            <?php else: ?>\n                <!-- Desktop Table View -->\n                <div class=\"table-responsive d-none d-md-block\">\n                    <table class=\"table table-hover\">\n                        <thead>\n                            <tr>\n                                <th>Document Type</th>\n                                <th>File Name</th>\n                                <th>Upload Date</th>\n                                <th>Status</th>\n                                <th>Remarks</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <?php foreach ($documents as $doc): ?>\n                                <tr>\n                                    <td>\n                                        <i class=\"bi bi-file-earmark-text me-2\"></i>\n                                        <strong><?= htmlspecialchars($doc['doc_type']) ?></strong>\n                                    </td>\n                                    <td><?= htmlspecialchars($doc['file_name']) ?></td>\n                                    <td><?= date('M d, Y g:i A', strtotime($doc['upload_date'])) ?></td>\n                                    <td>\n                                        <span class=\"badge <?= getStatusClass($doc['status']) ?>\">\n                                            <i class=\"bi <?= getStatusIcon($doc['status']) ?> me-1\"></i>\n                                            <?= htmlspecialchars($doc['status']) ?>\n                                        </span>\n                                    </td>\n                                    <td>\n                                        <small><?= htmlspecialchars($doc['remarks']) ?></small>\n                                    </td>\n                                    <td>\n                                        <?php if ($doc['file_path']): ?>\n                                            <a href=\"uploads/<?= $student_id ?>/<?= htmlspecialchars($doc['file_path']) ?>\" \n                                               target=\"_blank\" class=\"btn btn-sm btn-outline-primary\">\n                                                <i class=\"bi bi-eye\"></i> View\n                                            </a>\n                                        <?php endif; ?>\n                                        <?php if ($doc['status'] === 'Rejected'): ?>\n                                            <a href=\"UploadRequirements.php\" class=\"btn btn-sm btn-outline-warning\">\n                                                <i class=\"bi bi-arrow-clockwise\"></i> Re-upload\n                                            </a>\n                                        <?php endif; ?>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n\n                <!-- Mobile Card View -->\n                <div class=\"d-md-none\">\n                    <?php foreach ($documents as $doc): ?>\n                        <div class=\"document-card\">\n                            <div class=\"d-flex justify-content-between align-items-start mb-2\">\n                                <h6 class=\"mb-0\">\n                                    <i class=\"bi bi-file-earmark-text me-2\"></i>\n                                    <?= htmlspecialchars($doc['doc_type']) ?>\n                                </h6>\n                                <span class=\"badge <?= getStatusClass($doc['status']) ?>\">\n                                    <i class=\"bi <?= getStatusIcon($doc['status']) ?> me-1\"></i>\n                                    <?= htmlspecialchars($doc['status']) ?>\n                                </span>\n                            </div>\n                            <p class=\"text-muted mb-2\">\n                                <small><strong>File:</strong> <?= htmlspecialchars($doc['file_name']) ?></small>\n                            </p>\n                            <p class=\"text-muted mb-2\">\n                                <small><strong>Uploaded:</strong> <?= date('M d, Y g:i A', strtotime($doc['upload_date'])) ?></small>\n                            </p>\n                            <p class=\"text-muted mb-3\">\n                                <small><strong>Remarks:</strong> <?= htmlspecialchars($doc['remarks']) ?></small>\n                            </p>\n                            <div class=\"d-flex gap-2\">\n                                <?php if ($doc['file_path']): ?>\n                                    <a href=\"uploads/<?= $student_id ?>/<?= htmlspecialchars($doc['file_path']) ?>\" \n                                       target=\"_blank\" class=\"btn btn-sm btn-outline-primary\">\n                                        <i class=\"bi bi-eye\"></i> View\n                                    </a>\n                                <?php endif; ?>\n                                <?php if ($doc['status'] === 'Rejected'): ?>\n                                    <a href=\"UploadRequirements.php\" class=\"btn btn-sm btn-outline-warning\">\n                                        <i class=\"bi bi-arrow-clockwise\"></i> Re-upload\n                                    </a>\n                                <?php endif; ?>\n                            </div>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n\n                <!-- Summary Statistics -->\n                <div class=\"row mt-4\">\n                    <div class=\"col-md-3 col-6 mb-3\">\n                        <div class=\"text-center\">\n                            <h5 class=\"text-primary\"><?= count($documents) ?></h5>\n                            <small class=\"text-muted\">Total Documents</small>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3 col-6 mb-3\">\n                        <div class=\"text-center\">\n                            <h5 class=\"text-success\"><?= count(array_filter($documents, fn($d) => $d['status'] === 'Verified')) ?></h5>\n                            <small class=\"text-muted\">Verified</small>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3 col-6 mb-3\">\n                        <div class=\"text-center\">\n                            <h5 class=\"text-warning\"><?= count(array_filter($documents, fn($d) => $d['status'] === 'Uploaded')) ?></h5>\n                            <small class=\"text-muted\">Pending</small>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3 col-6 mb-3\">\n                        <div class=\"text-center\">\n                            <h5 class=\"text-danger\"><?= count(array_filter($documents, fn($d) => $d['status'] === 'Rejected')) ?></h5>\n                            <small class=\"text-muted\">Rejected</small>\n                        </div>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>\n"
        }
    ]
}