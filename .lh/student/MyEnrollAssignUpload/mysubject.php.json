{
    "sourceFile": "student/MyEnrollAssignUpload/mysubject.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1748612055295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748612260487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,16 +10,17 @@\n   die(\"Connection failed: \" . $conn->connect_error);\r\n }\r\n \r\n // Fetch subjects from database\r\n-$sql = \"SELECT * FROM subjects ORDER BY code ASC\";\r\n+$sql = \"SELECT * FROM subjects ORDER BY subject_code ASC\";\r\n $result = $conn->query($sql);\r\n \r\n $subjects = [];\r\n if ($result && $result->num_rows > 0) {\r\n   while ($row = $result->fetch_assoc()) {\r\n-    // Convert comma separated days string to array\r\n-    $row['days'] = explode(',', $row['days']);\r\n+    // Convert single day to array for uniform handling\r\n+    $row['days'] = explode(',', $row['day']);\r\n+    $row['status'] = 'Confirmed'; // Add default status if missing\r\n     $subjects[] = $row;\r\n   }\r\n } else {\r\n   $subjects = [];\r\n@@ -110,12 +111,11 @@\n         </ul>\r\n       </div>\r\n     </div>\r\n   </nav>\r\n+\r\n   <div class=\"container py-4\">\r\n-    <h2 class=\"text-success mb-4 fw-bold\">\r\n-      Assigned Subjects / Class Schedule\r\n-    </h2>\r\n+    <h2 class=\"text-success mb-4 fw-bold\">Assigned Subjects / Class Schedule</h2>\r\n     <div class=\"table-responsive\">\r\n       <table class=\"table table-bordered table-striped align-middle\">\r\n         <thead class=\"table-success\">\r\n           <tr class=\"text-center\">\r\n@@ -131,11 +131,11 @@\n         <tbody>\r\n           <?php if (!empty($subjects)): ?>\r\n             <?php foreach ($subjects as $sub): ?>\r\n               <tr>\r\n-                <td><?= htmlspecialchars($sub['code']) ?></td>\r\n-                <td><?= htmlspecialchars($sub['description']) ?></td>\r\n-                <td><?= htmlspecialchars($sub['schedule']) ?></td>\r\n+                <td><?= htmlspecialchars($sub['subject_code']) ?></td>\r\n+                <td><?= htmlspecialchars($sub['subject_title']) ?></td>\r\n+                <td><?= htmlspecialchars($sub['day']) ?>, <?= htmlspecialchars($sub['time']) ?></td>\r\n                 <td><?= htmlspecialchars($sub['instructor']) ?></td>\r\n                 <td><?= htmlspecialchars($sub['room']) ?></td>\r\n                 <td>\r\n                   <span class=\"<?= strtolower($sub['status']) === 'confirmed' ? 'status-confirmed' : 'status-pending' ?>\">\r\n@@ -167,9 +167,9 @@\n             if (in_array($day, $sub['days'])) {\r\n               $hasClass = true;\r\n               $statusClass = strtolower($sub['status']) === 'pending' ? 'pending' : '';\r\n               echo \"<div class='class-item $statusClass'>\"\r\n-                   . htmlspecialchars($sub['code']) . \"<br>\"\r\n+                   . htmlspecialchars($sub['subject_code']) . \"<br>\"\r\n                    . htmlspecialchars($sub['time']) . \"<br>\"\r\n                    . htmlspecialchars($sub['room']) .\r\n                    \"</div>\";\r\n             }\r\n@@ -195,5 +195,5 @@\n   <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n </body>\r\n </html>\r\n \r\n-<?php $conn->close(); ?>\n\\ No newline at end of file\n+<?php $conn->close(); ?>\r\n"
                }
            ],
            "date": 1748612055295,
            "name": "Commit-0",
            "content": "<?php\r\n// DB connection config (adjust with your credentials)\r\n$host = 'localhost';\r\n$user = 'root';\r\n$pass = '';\r\n$dbname = 'enrollment_system';\r\n\r\n$conn = new mysqli($host, $user, $pass, $dbname);\r\nif ($conn->connect_error) {\r\n  die(\"Connection failed: \" . $conn->connect_error);\r\n}\r\n\r\n// Fetch subjects from database\r\n$sql = \"SELECT * FROM subjects ORDER BY code ASC\";\r\n$result = $conn->query($sql);\r\n\r\n$subjects = [];\r\nif ($result && $result->num_rows > 0) {\r\n  while ($row = $result->fetch_assoc()) {\r\n    // Convert comma separated days string to array\r\n    $row['days'] = explode(',', $row['days']);\r\n    $subjects[] = $row;\r\n  }\r\n} else {\r\n  $subjects = [];\r\n}\r\n\r\n$weekdays = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n?>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\" />\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n  <title>Assigned Subjects / Class Schedule</title>\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n  <link rel=\"icon\" href=\"favicon.ico\" type=\"image/x-icon\">\r\n  <style>\r\n    body {\r\n      background-color: #e8f5e9;\r\n    }\r\n    .navbar {\r\n      background-color: #2e7d32;\r\n    }\r\n    .navbar-brand, .nav-link {\r\n      color: #fff !important;\r\n      font-weight: 600;\r\n      letter-spacing: 0.05em;\r\n    }\r\n    .nav-link:hover {\r\n      color: #c8e6c9 !important;\r\n    }\r\n    .status-confirmed {\r\n      color: #2e7d32;\r\n      font-weight: 600;\r\n    }\r\n    .status-pending {\r\n      color: #fbc02d;\r\n      font-weight: 600;\r\n    }\r\n    .calendar {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n      gap: 1rem;\r\n      margin-top: 2rem;\r\n    }\r\n    .calendar-day {\r\n      background-color: white;\r\n      border-radius: 6px;\r\n      padding: 0.75rem;\r\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);\r\n    }\r\n    .calendar-day h6 {\r\n      border-bottom: 1px solid #ccc;\r\n      padding-bottom: 0.4rem;\r\n      margin-bottom: 0.5rem;\r\n      font-weight: bold;\r\n      color: #2e7d32;\r\n    }\r\n    .class-item {\r\n      background-color: #a5d6a7;\r\n      margin-bottom: 0.5rem;\r\n      border-radius: 5px;\r\n      padding: 0.5rem;\r\n      font-size: 0.9rem;\r\n    }\r\n    .class-item.pending {\r\n      background-color: #fff59d;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <nav class=\"navbar navbar-expand-lg\">\r\n    <div class=\"container\">\r\n      <a class=\"navbar-brand\" href=\"/IT2C_Enrollment_System_SourceCode/student/student-dashboard.php\">\r\n        Student Dashboard\r\n      </a>\r\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"\r\n        aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <ul class=\"navbar-nav ms-auto\">\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" href=\"/IT2C_Enrollment_System_SourceCode/student/student-dashboard.php\">\r\n              <i class=\"bi bi-arrow-left\"></i> Back to Dashboard\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n  <div class=\"container py-4\">\r\n    <h2 class=\"text-success mb-4 fw-bold\">\r\n      Assigned Subjects / Class Schedule\r\n    </h2>\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-bordered table-striped align-middle\">\r\n        <thead class=\"table-success\">\r\n          <tr class=\"text-center\">\r\n            <th>Subject Code</th>\r\n            <th>Description</th>\r\n            <th>Schedule</th>\r\n            <th>Instructor</th>\r\n            <th>Room</th>\r\n            <th>Status</th>\r\n            <th>Details</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <?php if (!empty($subjects)): ?>\r\n            <?php foreach ($subjects as $sub): ?>\r\n              <tr>\r\n                <td><?= htmlspecialchars($sub['code']) ?></td>\r\n                <td><?= htmlspecialchars($sub['description']) ?></td>\r\n                <td><?= htmlspecialchars($sub['schedule']) ?></td>\r\n                <td><?= htmlspecialchars($sub['instructor']) ?></td>\r\n                <td><?= htmlspecialchars($sub['room']) ?></td>\r\n                <td>\r\n                  <span class=\"<?= strtolower($sub['status']) === 'confirmed' ? 'status-confirmed' : 'status-pending' ?>\">\r\n                    <?= htmlspecialchars($sub['status']) ?>\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <a href=\"#\" class=\"btn btn-sm btn-outline-success\">View</a>\r\n                </td>\r\n              </tr>\r\n            <?php endforeach; ?>\r\n          <?php else: ?>\r\n            <tr>\r\n              <td colspan=\"7\" class=\"text-center\">No subjects assigned yet.</td>\r\n            </tr>\r\n          <?php endif; ?>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <h4 class=\"text-success mt-5 mb-3 fw-bold\">Weekly Class Schedule</h4>\r\n    <div class=\"calendar\">\r\n      <?php foreach ($weekdays as $day): ?>\r\n        <div class=\"calendar-day\">\r\n          <h6><?= $day ?></h6>\r\n          <?php\r\n          $hasClass = false;\r\n          foreach ($subjects as $sub) {\r\n            if (in_array($day, $sub['days'])) {\r\n              $hasClass = true;\r\n              $statusClass = strtolower($sub['status']) === 'pending' ? 'pending' : '';\r\n              echo \"<div class='class-item $statusClass'>\"\r\n                   . htmlspecialchars($sub['code']) . \"<br>\"\r\n                   . htmlspecialchars($sub['time']) . \"<br>\"\r\n                   . htmlspecialchars($sub['room']) .\r\n                   \"</div>\";\r\n            }\r\n          }\r\n          if (!$hasClass) {\r\n            echo \"<small class='text-muted'>No classes</small>\";\r\n          }\r\n          ?>\r\n        </div>\r\n      <?php endforeach; ?>\r\n    </div>\r\n\r\n    <div class=\"mt-4 text-end\">\r\n      <button class=\"btn btn-success me-2\">\r\n        Download Schedule (PDF)\r\n      </button>\r\n      <button class=\"btn btn-outline-success\">\r\n        Print Schedule\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n</body>\r\n</html>\r\n\r\n<?php $conn->close(); ?>"
        }
    ]
}