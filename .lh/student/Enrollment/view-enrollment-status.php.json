{
    "sourceFile": "student/Enrollment/view-enrollment-status.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1748463769882,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1748463769882,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\n\r\nif (!isset($_SESSION['student_logged_in']) || !isset($_SESSION['student_number'])) {\r\n    header(\"Location: ../logregfor/login.php\");\r\n    exit;\r\n}\r\n\r\n$host = 'localhost';\r\n$dbname = 'enrollment_system';\r\n$username = 'root';\r\n$password = '';\r\n\r\ntry {\r\n    $pdo = new PDO(\"mysql:host=$host;dbname=$dbname;charset=utf8mb4\", $username, $password);\r\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\r\n} catch (PDOException $e) {\r\n    die(\"Database connection failed: \" . $e->getMessage());\r\n}\r\n\r\n$student_number = $_SESSION['student_number'];\r\n\r\n// Fetch enrollment status for logged-in student\r\n$stmt = $pdo->prepare(\"SELECT * FROM enrollment_status WHERE student_number = ? ORDER BY date_submitted DESC LIMIT 1\");\r\n$stmt->execute([$student_number]);\r\n$enrollment = $stmt->fetch(PDO::FETCH_ASSOC);\r\n\r\nif (!$enrollment) {\r\n    // No enrollment found, set defaults or redirect\r\n    $enrollment = [\r\n        'program' => 'N/A',\r\n        'year_level' => 'N/A',\r\n        'semester' => 'N/A',\r\n        'section' => 'N/A',\r\n        'date_submitted' => null,\r\n        'status' => 'pending',\r\n        'remarks' => '',\r\n        'notification' => ''\r\n    ];\r\n}\r\n\r\n// Format date for display\r\n$dateSubmitted = $enrollment['date_submitted'] ? date(\"F j, Y\", strtotime($enrollment['date_submitted'])) : 'N/A';\r\n\r\n$status = $enrollment['status'];\r\n\r\n$badgeClass = [\r\n  'pending' => 'badge-pending',\r\n  'approved' => 'badge-approved',\r\n  'rejected' => 'badge-rejected'\r\n][$status] ?? 'badge-pending';\r\n\r\n$badgeLabel = ucfirst($status);\r\n\r\n?>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\" />\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n  <title>Current Enrollment Status</title>\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n  <link rel=\"icon\" href=\"favicon.ico\" type=\"image/x-icon\">\r\n  <style>\r\n    body {\r\n      background-color: #e8f5e9;\r\n    }\r\n    .navbar {\r\n      background-color: #2e7d32;\r\n    }\r\n    .navbar-brand, .nav-link {\r\n      color: #fff !important;\r\n      font-weight: 600;\r\n      letter-spacing: 0.05em;\r\n    }\r\n    .nav-link:hover {\r\n      color: #c8e6c9 !important;\r\n    }\r\n    .badge-pending {\r\n      background-color: #fbc02d;\r\n      color: #212529;\r\n    }\r\n    .badge-approved {\r\n      background-color: #43a047;\r\n    }\r\n    .badge-rejected {\r\n      background-color: #e53935;\r\n    }\r\n    .card {\r\n      border-radius: 12px;\r\n      border: none;\r\n    }\r\n    .btn-success {\r\n      background-color: #2e7d32;\r\n      border-color: #2e7d32;\r\n    }\r\n    .btn-success:hover {\r\n      background-color: #27642b;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <nav class=\"navbar navbar-expand-lg\">\r\n    <div class=\"container\">\r\n      <a class=\"navbar-brand\" href=\"/student/student-dashboard.php\">\r\n        Student Dashboard\r\n      </a>\r\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" \r\n          aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <ul class=\"navbar-nav ms-auto\">\r\n          <li class=\"nav-item\"><a class=\"nav-link\" href=\"/student/student-dashboard.php\" class=\"btn btn-outline-secondary mb-3\">\r\n          <i class=\"bi bi-arrow-left\"></i> Back to Dashboard\r\n          </a></li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n  <div class=\"container my-5\">\r\n    <h2 class=\"text-success mb-4 fw-bold\">\r\n      Current Enrollment Status\r\n    </h2>\r\n\r\n    <div class=\"card shadow-sm p-4 mb-4\">\r\n      <div class=\"row mb-3\">\r\n        <div class=\"col-md-6\"><strong>Program:</strong> <?= htmlspecialchars($enrollment['program']) ?></div>\r\n        <div class=\"col-md-3\"><strong>Year Level:</strong> <?= htmlspecialchars($enrollment['year_level']) ?></div>\r\n        <div class=\"col-md-3\"><strong>Semester:</strong> <?= htmlspecialchars($enrollment['semester']) ?></div>\r\n      </div>\r\n\r\n      <div class=\"row mb-3\">\r\n        <div class=\"col-md-6\"><strong>Section:</strong> <?= htmlspecialchars($enrollment['section']) ?></div>\r\n        <div class=\"col-md-6\"><strong>Date Submitted:</strong> <?= htmlspecialchars($dateSubmitted) ?></div>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <strong>Status:</strong>\r\n        <span class=\"badge <?= $badgeClass ?> fs-6 px-3 py-2\"><?= $badgeLabel ?></span>\r\n      </div>\r\n\r\n      <?php if ($status === 'rejected'): ?>\r\n        <div class=\"alert alert-danger mt-3\">\r\n          <strong>Remarks:</strong> <?= nl2br(htmlspecialchars($enrollment['remarks'])) ?>\r\n        </div>\r\n      <?php endif; ?>\r\n\r\n      <a href=\"#\" class=\"btn btn-success mt-2\">\r\n        View / Print Enrollment Slip\r\n      </a>\r\n    </div>\r\n\r\n    <?php if (!empty($enrollment['notification'])): ?>\r\n      <div class=\"alert alert-info\">\r\n        <strong>Notification:</strong> <?= nl2br(htmlspecialchars($enrollment['notification'])) ?>\r\n      </div>\r\n    <?php endif; ?>\r\n  </div>\r\n\r\n  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"></script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}